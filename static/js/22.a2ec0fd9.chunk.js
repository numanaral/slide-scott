(this["webpackJsonpslide-scott"]=this["webpackJsonpslide-scott"]||[]).push([[22],{817:function(t,e,n){"use strict";var r=n(6),a=n(50),c=n.n(a),i=n(79),o=n(78),u=n(5),s=n(0),l=n(141),b=n(80),d=n(137),f=n(140),j=n(63),O=n(788),g=n(782);e.a=function(t){var e=Object(d.a)().notifyError,n=Object(s.useState)(!1),a=Object(o.a)(n,2),p=a[0],h=a[1],m=Object(s.useState)(""),v=Object(o.a)(m,2),x=v[0],y=v[1],w=Object(s.useState)(null),S=Object(o.a)(w,2),T=S[0],D=S[1],E=Object(f.a)().userId,I=Object(b.useFirestore)({collection:"slides",where:["userId","==",E]});Object(s.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,I.collection("slides").where(l.a.firestore.FieldPath.documentId(),"==",t).where("userId","==",E).get();case 4:n=e.sent,D(n.docs),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),y(e.t0);case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=function(){var t=Object(i.a)(c.a.mark((function t(n){var a,i,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new Date,t.next=4,I.add("slides",Object(g.e)(Object(r.a)(Object(r.a)({},n),{},{createdOn:a,updatedOn:a,userId:E})));case 4:return i=t.sent,o=i.id,t.abrupt("return",o);case 9:return t.prev=9,t.t0=t.catch(0),e(t.t0),t.abrupt("return","");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var n=Object(i.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I.update("slides/".concat(t),Object(g.e)(r));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(t){return n.apply(this,arguments)}}(),L=function(){var n=Object(i.a)(c.a.mark((function n(){var r,a=arguments;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:t,n.prev=1,n.next=4,I.delete("slides/".concat(r));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})));return function(){return n.apply(this,arguments)}}(),X=p&&Object(u.jsx)(j.a,{}),z=x&&Object(u.jsx)(O.a,{}),B=!!(null===T||void 0===T?void 0:T.length);return{pending:X,error:z,hasEditAccess:B,canEdit:function(){return!!B||(e("Missing or insufficient permissions."),!1)},createSlideshow:k,updateSlideshow:R,deleteSlideshow:L}}},825:function(t,e,n){"use strict";var r=n(6),a=n(16),c=n(5),i=(n(0),n(763)),o=n(99),u=n(13),s=n(776);function l(){var t=Object(a.a)(["\n\theight: 5%;\n"]);return l=function(){return t},t}var b=Object(u.d)(i.a)(l());e.a=function(t){return Object(c.jsxs)(b,{container:!0,justify:"center",alignItems:"center",children:[Object(c.jsx)(o.a,Object(r.a)({variant:"h5"},t)),Object(c.jsx)(s.a,{direction:"bottom",spacing:"5"})]})}},885:function(t,e,n){"use strict";e.a=function(t){return{onDragStart:function(t){t.dataTransfer.setData("draggableType",t.target.getAttribute("draggable-type")),t.dataTransfer.setData("size",t.target.getAttribute("tool-size")),t.dataTransfer.effectAllowed="copy"},onDrop:function(e){e.preventDefault();var n,r=null===(n=e.target)||void 0===n?void 0:n.id.replace("container-",""),a=e.dataTransfer.getData("size"),c=e.target.getBoundingClientRect(),i=e.clientX-c.left-a,o=e.clientY-c.top-a,u=2*a,s=2*a,l={draggableType:e.dataTransfer.getData("draggableType"),translateXY:[0,0],widthHeight:[u,s],topLeft:[o,i],rotate:0,transformOrigin:"50% 50%"};t(null,l,r)},allowDrop:function(t){t.preventDefault()}}}},961:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return st}));var r=n(46),a=n(6),c=n(78),i=n(16),o=n(5),u=n(0),s=n(99),l=n(13),b=n(929),d=n.n(b),f=n(30),j=Object(f.a)((function(){return Promise.all([n.e(34),n.e(31)]).then(n.bind(null,971))})),O=n(28),g=n(778),p=n(4);p.bool,p.bool;function h(){var t=Object(i.a)(["\n\t","\n"]);return h=function(){return t},t}var m=Object(l.d)(g.a)(h(),(function(t){var e=t.theme,n=t.$topBottom,r=t.$rightLeft,a=t.$spacing,c="".concat(e.spacing(a||1),"px"),i=r&&c||"0";return"\n\t\t\tpadding: ".concat(n&&c||"0"," ").concat(i,";\n\t\t")})),v=function(t){var e=t.topBottom,n=t.rightLeft,r=t.spacing,c=Object(O.a)(t,["topBottom","rightLeft","spacing"]);return Object(o.jsx)(m,Object(a.a)({$topBottom:e,$rightLeft:n,$spacing:r},c))};v.defaultProps={topBottom:!1,rightLeft:!1};var x=v,y=n(62),w=n(61),S=n(774),T=n(50),D=n.n(T),E=n(79),I=n(785),k=n(779),R=n(100),L=n(793),X=function(t){var e=Object(R.a)().bitmoji,c=Object(I.a)(),i=c.openComponentDialog,u=c.closeDialog;return function(){var c=Object(E.a)(D.a.mark((function c(s,l,b){var d,f,j,O,g,p,h,m,v,x,y,w,S=arguments;return D.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return d=S.length>3&&void 0!==S[3]?S[3]:null,f=S.length>4&&void 0!==S[4]?S[4]:{},j=l.draggableType,c.next=5,Promise.resolve().then(n.bind(null,793));case 5:if(O=c.sent,g=O.default,p=g[j].settings,h=p.name,m=p.schema,v=p.items,x=p.type,y=d||"cloned-".concat(j,"-").concat(Date.now()),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(t){var c=Object(a.a)(Object(a.a)({},t[s].frames),{},Object(r.a)({},y,Object(a.a)(Object(a.a)(Object(a.a)({},t[s].frames[y]),l),{},{componentType:x,componentProps:e||{}})));return n&&u(),b(y),Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},s,{frames:c}))}))},v){c.next=15;break}if(x!==L.TOOL_TYPES.BITMOJI){c.next=14;break}return w(e),c.abrupt("return");case 14:w();case 15:i("Create new ".concat(h),Object(o.jsx)(k.b,{items:v,schema:m,submitText:"Save",defaultValues:f,onSubmit:function(t){w(t,!0)}}));case 16:case"end":return c.stop()}}),c)})));return function(t,e,n){return c.apply(this,arguments)}}()},z=n(930),B=n.n(z),P=function(t){var e=Object(u.useState)({}),n=Object(c.a)(e,2),i=n[0],o=n[1],s=i.draggableId,l=i.slideId,b=Object(u.useRef)(s),d=Object(u.useRef)(l);Object(u.useEffect)((function(){b.current=s,d.current=l}),[s,l]);var f=X(t),j=Object(u.useState)({target:null,originDraggable:!0,originRelative:!0,draggable:!0,origin:!0,rotatable:!0,resizable:!0,rotationPosition:"top",zoom:1,startDragRotate:0,throttleDrag:0,throttleDragRotate:0,throttleRotate:0,throttleResize:0,padding:{left:0,top:0,right:0,bottom:0},onResizeStart:function(e){var n=e.setOrigin,r=e.dragStart;n(["%","%"]),b.current&&r&&t((function(t){return r.set(t[d.current].frames[b.current].translateXY),t}))},onResize:function(e){var n=e.target,c=e.width,i=e.height,o=e.drag;if(b.current){var u=o.beforeTranslate;t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},d.current,{frames:Object(a.a)(Object(a.a)({},t[d.current].frames),{},Object(r.a)({},b.current,Object(a.a)(Object(a.a)({},t[d.current].frames[b.current]),{},{translateXY:u,widthHeight:[c,i]})))}))})),n.style.width="".concat(c,"px"),n.style.height="".concat(i,"px"),n.style.transform="translate(".concat(u[0],"px, ").concat(u[1],"px)")}},onRotateStart:function(e){var n=e.set;b.current&&t((function(t){return n(t[d.current].frames[b.current].rotate),t}))},onRotate:function(e){var n=e.target,c=e.beforeRotate;b.current&&(t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},d.current,{frames:Object(a.a)(Object(a.a)({},t[d.current].frames),{},Object(r.a)({},b.current,Object(a.a)(Object(a.a)({},t[d.current].frames[b.current]),{},{rotate:c})))}))})),n.style.transform="rotate(".concat(c,"deg)"))},onDragOriginStart:function(e){var n=e.dragStart;b.current&&n&&t((function(t){return n.set(t[d.current].frames[b.current].translateXY),t}))},onDragOrigin:function(e){var n=e.drag,c=e.transformOrigin;if(b.current){var i=n.beforeTranslate;t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},d.current,{frames:Object(a.a)(Object(a.a)({},t[d.current].frames),{},Object(r.a)({},b.current,Object(a.a)(Object(a.a)({},t[d.current].frames[b.current]),{},{translateXY:i,transformOrigin:c})))}))}))}},onDragStart:function(e){var n=e.set;b.current&&t((function(t){return n(t[d.current].frames[b.current].translateXY),t}))},onDrag:function(e){var n=e.beforeTranslate;b.current&&t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},d.current,{frames:Object(a.a)(Object(a.a)({},t[d.current].frames),{},Object(r.a)({},b.current,Object(a.a)(Object(a.a)({},t[d.current].frames[b.current]),{},{translateXY:n})))}))}))},onRender:function(e){var n=e.target;if(b.current){var r=n||document.getElementById(b.current);t((function(t){var e=t[d.current].frames[b.current],n=e.translateXY,a=e.rotate,c=e.transformOrigin;return r.style.transformOrigin=c,r.style.transform="translate(".concat(n[0],"px, ").concat(n[1],"px)")+" rotate(".concat(a,"deg)"),t}))}}}),O=Object(c.a)(j,2),g=O[0],p=O[1],h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;p((function(e){return Object(a.a)(Object(a.a)({},e),{},{target:t})}))},m=function(t,e){h(),f(e,t,(function(t){setTimeout((function(){var e=document.getElementById(t);h(e)}),150)}))};return{currentlyFocusedElement:i,setCurrentlyFocusedElement:o,setTarget:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(t),e&&m(e,n)},removeTarget:function(){t((function(t){var e=B()(t);return delete e[d.current].frames[b.current],e}))},options:g,addNewDraggable:m,updateDraggable:function(t,e){h(),f(d.current,{draggableType:t},(function(t){setTimeout((function(){var e=document.getElementById(t);h(e)}),150)}),b.current,e)}}},C=n(885),F=n(52),Y=n(969);p.node.isRequired,p.node.isRequired;function A(){var t=Object(i.a)(["\n\twidth: 50vw;\n\theight: 100vh;\n\t/* width: auto; */\n"]);return A=function(){return t},t}var q=l.d.div(A()),U=function(t){var e=t.button,n=t.children,r=Object(u.useState)(!1),a=Object(c.a)(r,2),i=a[0],s=a[1];return Object(o.jsxs)(o.Fragment,{children:[Object(u.cloneElement)(e,{onClick:function(){return s(!0)}}),Object(o.jsx)(Y.a,{anchor:"right",open:i,onClose:function(){return s(!1)},children:Object(o.jsx)(q,{role:"presentation",children:n})})]})};U.defaultProps={};var $=U,V=n(780),J=n(805),N=n(817),H=n(788),M=Object(f.a)((function(){return n.e(29).then(n.bind(null,963))}),{size:"large"}),W=Object(f.a)((function(){return n.e(28).then(n.bind(null,964))}),{size:"large"}),_=Object(f.a)((function(){return n.e(27).then(n.bind(null,966))}),{size:"large"}),G=n(825),K=n(792),Q=n(765),Z=[{type:k.a.TEXT,label:"Title",name:"title",required:!0},{type:k.a.TEXT,label:"Description",name:"description",required:!0},{type:k.a.TEXT,label:"Thumbnail Image Url",name:"thumbnailUrl",required:!0}],tt=K.c().shape({title:K.e().label("Title").required(),description:K.e().label("Description").required(),thumbnailUrl:K.e().url().label("Thumbnail Image Url")}),et=function(t){var e=t.onSubmit,n=t.defaultValues;return Object(o.jsx)(Q.a,{width:"100%",p:2,children:Object(o.jsx)(k.b,{schema:tt,items:Z,onSubmit:e,defaultValues:n,style:{width:"100%"}})})};function nt(){var t=Object(i.a)(["\n\t",";\n"]);return nt=function(){return t},t}function rt(){var t=Object(i.a)(["\n\tanimation: "," 1s ease-in-out 2;\n"]);return rt=function(){return t},t}function at(){var t=Object(i.a)(["\n\t0% {\n\t\tcolor: ",";\n\t}\n\n\t50% {\n\t\tcolor: ",";\n\t}\n\n\t100% {\n\t\tcolor: ",";\n\t}\n"]);return at=function(){return t},t}var ct=Object(l.d)(s.a)(nt(),(function(t){var e=t.theme;return Object(l.c)(rt(),function(t){return Object(l.e)(at(),t.palette.text.primary,t.palette.primary.main,t.palette.text.primary)}(e))})),it=function(t){var e=t.time;return Object(o.jsxs)(ct,{component:"span",children:["Last updated on: ",Object(F.b)(e)]},e)},ot=function(t){t.id;var e=t.slide,n=t.updateSlideshow,i=t.children,o=Object(u.useState)(""),s=Object(c.a)(o,2),l=s[0],b=s[1],f=Object(u.useState)(e.slides),j=Object(c.a)(f,2),O=j[0],g=j[1],p=function(t){g((function(e){return t instanceof Function?t(e):t}))};Object(u.useEffect)((function(){var t=setInterval((function(){g((function(t){return d()(e.slides,t)||(b(new Date),n({slides:t})),t}))}),3e3);return function(){clearInterval(t)}}),[g,e.slides,n]);var h=P(p),m=h.currentlyFocusedElement,v=h.setCurrentlyFocusedElement,x=h.setTarget,y=h.removeTarget,w=h.options,S=h.updateDraggable,T=Object(C.a)().onDragStart;Object(u.useEffect)((function(){var t=function(t){m.draggableId&&m.slideId&&"Delete"===t.key&&(x(),y())};return document.addEventListener("keyup",t),function(){document.removeEventListener("keyup",t)}}),[m.draggableId,m.slideId,y,x]);return i({slides:O,lastSave:l,onDragStart:T,options:w,sharedProps:{setTarget:x,removeTarget:y,deleteSlide:function(t){p((function(e){var n=Object(a.a)({},e);return delete n[t],n}))},updateDraggable:S,currentlyFocusedElement:m,setCurrentlyFocusedElement:v},onAddNewSlide:function(){var t=Date.now().toString();p((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},t,{frames:{}}))})),setTimeout((function(){Object(F.f)(document.getElementById("container-".concat(t)))}),100)}})},ut=function(t){var e=t.match.params.id,n=Object(J.a)(e),r=n.slide,c=n.pending,i=n.error,u=Object(N.a)(e),s=u.hasEditAccess,l=u.updateSlideshow,b=u.pending,d=u.error,f={id:e,slide:r,updateSlideshow:l};return c||i||b||d||!s&&Object(o.jsx)(H.a,{})||Object(o.jsx)(ot,Object(a.a)(Object(a.a)({},f),{},{children:function(t){var e=t.slides,n=t.lastSave,c=t.onDragStart,i=t.options,u=t.sharedProps,s=t.onAddNewSlide;return Object(o.jsxs)(x,{container:!0,spacing:5,children:[Object(o.jsxs)(x,{item:!0,xs:2,spacing:1,rightLeft:!0,children:[Object(o.jsx)(S.a,{style:{height:"3%"}}),Object(o.jsx)(M,{onDragStart:c})]}),Object(o.jsxs)(x,{item:!0,xs:8,spacing:1,rightLeft:!0,children:[Object(o.jsx)(S.a,{style:{height:"3%"}}),Object(o.jsxs)(G.a,{children:["Slides"," ",Object(o.jsx)($,{button:Object(o.jsx)(y.a,{tooltip:"Open settings",onClick:function(){return null},icon:w.E}),children:Object(o.jsx)(et,{onSubmit:function(t){console.log(t)},defaultValues:{title:r.title,description:r.description,thumbnailUrl:r.thumbnailUrl}})}),n&&Object(o.jsx)(it,{time:n})]}),Object(o.jsxs)(S.a,{style:{height:"85%",overflow:"auto",position:"relative"},children:[Object(o.jsx)(j,Object(a.a)({},i)),Object.keys(e).map((function(t,n){return Object(o.jsx)(W,Object(a.a)(Object(a.a)(Object(a.a)({},u),e[t]),{},{slideId:t,index:n+1}),t)}))]}),Object(o.jsx)(S.a,{style:{height:"3%"},children:Object(o.jsx)(y.a,{tooltip:"Add new slide",text:"Add new slide",fullWidth:!0,onClick:s,icon:w.b})})]}),Object(o.jsxs)(x,{item:!0,xs:2,spacing:1,rightLeft:!0,children:[Object(o.jsx)(S.a,{style:{height:"3%"}}),Object(o.jsx)(_,{})]})]})}}))};ut.defaultProps=V.b;var st=ut}}]);