(this["webpackJsonpslide-scott"]=this["webpackJsonpslide-scott"]||[]).push([[22],{820:function(t,e,n){"use strict";var r=n(6),a=n(54),c=n.n(a),i=n(79),u=n(45),o=n(5),s=n(0),l=n(86),d=n(80),b=n(99),f=n(139),j=n(64),O=n(790),g=n(784);e.a=function(t){var e=Object(b.a)().notifyError,n=Object(s.useState)(!1),a=Object(u.a)(n,2),p=a[0],h=a[1],m=Object(s.useState)(""),v=Object(u.a)(m,2),x=v[0],y=v[1],w=Object(s.useState)(null),S=Object(u.a)(w,2),T=S[0],D=S[1],E=Object(f.a)().userId,I=Object(d.useFirestore)({collection:"slides",where:["userId","==",E]});Object(s.useEffect)((function(){(function(){var e=Object(i.a)(c.a.mark((function e(){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,I.collection("slides").where(l.a.firestore.FieldPath.documentId(),"==",t).where("userId","==",E).get();case 4:n=e.sent,D(n.docs),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),y(e.t0);case 11:return e.prev=11,h(!1),e.finish(11);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=function(){var t=Object(i.a)(c.a.mark((function t(n){var a,i,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=new Date,t.next=4,I.add("slides",Object(g.e)(Object(r.a)(Object(r.a)({},n),{},{createdOn:a,updatedOn:a,userId:E})));case 4:return i=t.sent,u=i.id,t.abrupt("return",u);case 9:return t.prev=9,t.t0=t.catch(0),e(t.t0),t.abrupt("return","");case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),R=function(){var n=Object(i.a)(c.a.mark((function n(r){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,I.update("slides/".concat(t),Object(g.e)(r));case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),e(n.t0);case 8:case"end":return n.stop()}}),n,null,[[0,5]])})));return function(t){return n.apply(this,arguments)}}(),L=function(){var n=Object(i.a)(c.a.mark((function n(){var r,a=arguments;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:t,n.prev=1,n.next=4,I.delete("slides/".concat(r));case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(1),e(n.t0);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})));return function(){return n.apply(this,arguments)}}(),X=p&&Object(o.jsx)(j.a,{}),B=x&&Object(o.jsx)(O.a,{}),F=!!(null===T||void 0===T?void 0:T.length);return{pending:X,error:B,hasEditAccess:F,canEdit:function(){return!!F||(e("Missing or insufficient permissions."),!1)},createSlideshow:k,updateSlideshow:R,deleteSlideshow:L}}},884:function(t,e,n){"use strict";e.a=function(t){return{onDragStart:function(t){t.dataTransfer.setData("draggableType",t.target.getAttribute("draggable-type")),t.dataTransfer.setData("size",t.target.getAttribute("tool-size")),t.dataTransfer.effectAllowed="copy"},onDrop:function(e){e.preventDefault();var n,r=null===(n=e.target)||void 0===n?void 0:n.id.replace("container-",""),a=e.dataTransfer.getData("size"),c=e.target.getBoundingClientRect(),i=e.clientX-c.left-a,u=e.clientY-c.top-a,o=2*a,s=2*a,l={draggableType:e.dataTransfer.getData("draggableType"),translateXY:[0,0],widthHeight:[o,s],topLeft:[u,i],rotate:0,transformOrigin:"50% 50%"};t(null,l,r)},allowDrop:function(t){t.preventDefault()}}}},885:function(t,e,n){"use strict";var r=n(6),a=n(14),c=n(5),i=(n(0),n(764)),u=n(98),o=n(13),s=n(778);function l(){var t=Object(a.a)(["\n\theight: 5%;\n"]);return l=function(){return t},t}var d=Object(o.d)(i.a)(l());e.a=function(t){return Object(c.jsxs)(d,{container:!0,justify:"center",alignItems:"center",children:[Object(c.jsx)(u.a,Object(r.a)({variant:"h5"},t)),Object(c.jsx)(s.a,{direction:"bottom",spacing:"5"})]})}},963:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return dt}));var r=n(53),a=n(6),c=n(45),i=n(14),u=n(5),o=n(0),s=n(98),l=n(13),d=n(930),b=n.n(d),f=n(30),j=Object(f.a)((function(){return Promise.all([n.e(32),n.e(29)]).then(n.bind(null,971))})),O=n(26),g=n(787),p=n(4);p.bool,p.bool;function h(){var t=Object(i.a)(["\n\t","\n"]);return h=function(){return t},t}var m=Object(l.d)(g.a)(h(),(function(t){var e=t.theme,n=t.$topBottom,r=t.$rightLeft,a=t.$spacing,c="".concat(e.spacing(a||1),"px"),i=r&&c||"0";return"\n\t\t\tpadding: ".concat(n&&c||"0"," ").concat(i,";\n\t\t")})),v=function(t){var e=t.topBottom,n=t.rightLeft,r=t.spacing,c=Object(O.a)(t,["topBottom","rightLeft","spacing"]);return Object(u.jsx)(m,Object(a.a)({$topBottom:e,$rightLeft:n,$spacing:r},c))};v.defaultProps={topBottom:!1,rightLeft:!1};var x=v,y=n(78),w=n(52),S=n(775),T=n(54),D=n.n(T),E=n(79),I=n(788),k=n(780),R=n(100),L=n(796),X=function(t){var e=Object(R.a)().bitmoji,c=Object(I.a)(),i=c.openComponentDialog,o=c.closeDialog;return function(){var c=Object(E.a)(D.a.mark((function c(s,l,d){var b,f,j,O,g,p,h,m,v,x,y,w,S=arguments;return D.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return b=S.length>3&&void 0!==S[3]?S[3]:null,f=S.length>4&&void 0!==S[4]?S[4]:{},j=l.draggableType,c.next=5,Promise.resolve().then(n.bind(null,796));case 5:if(O=c.sent,g=O.default,p=g[j].settings,h=p.name,m=p.schema,v=p.items,x=p.type,y=b||"cloned-".concat(j,"-").concat(Date.now()),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t((function(t){var c=Object(a.a)(Object(a.a)({},t[s].frames),{},Object(r.a)({},y,Object(a.a)(Object(a.a)(Object(a.a)({},t[s].frames[y]),l),{},{componentType:x,componentProps:e||{}})));return n&&o(),d(y),Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},s,{frames:c}))}))},v){c.next=15;break}if(x!==L.TOOL_TYPES.BITMOJI){c.next=14;break}return w(e),c.abrupt("return");case 14:w();case 15:i("Create new ".concat(h),Object(u.jsx)(k.b,{items:v,schema:m,submitText:"Save",defaultValues:f,onSubmit:function(t){w(t,!0)}}));case 16:case"end":return c.stop()}}),c)})));return function(t,e,n){return c.apply(this,arguments)}}()},B=n(931),F=n.n(B),P=function(t){var e=Object(o.useState)({}),n=Object(c.a)(e,2),i=n[0],u=n[1],s=i.draggableId,l=i.slideId,d=Object(o.useRef)(s),b=Object(o.useRef)(l);Object(o.useEffect)((function(){d.current=s,b.current=l}),[s,l]);var f=X(t),j=Object(o.useState)({target:null,originDraggable:!0,originRelative:!0,draggable:!0,origin:!0,rotatable:!0,resizable:!0,rotationPosition:"top",zoom:1,startDragRotate:0,throttleDrag:0,throttleDragRotate:0,throttleRotate:0,throttleResize:0,padding:{left:0,top:0,right:0,bottom:0},onResizeStart:function(e){var n=e.setOrigin,r=e.dragStart;n(["%","%"]),d.current&&r&&t((function(t){return r.set(t[b.current].frames[d.current].translateXY),t}))},onResize:function(e){var n=e.target,c=e.width,i=e.height,u=e.drag;if(d.current){var o=u.beforeTranslate;t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},b.current,{frames:Object(a.a)(Object(a.a)({},t[b.current].frames),{},Object(r.a)({},d.current,Object(a.a)(Object(a.a)({},t[b.current].frames[d.current]),{},{translateXY:o,widthHeight:[c,i]})))}))})),n.style.width="".concat(c,"px"),n.style.height="".concat(i,"px"),n.style.transform="translate(".concat(o[0],"px, ").concat(o[1],"px)")}},onRotateStart:function(e){var n=e.set;d.current&&t((function(t){return n(t[b.current].frames[d.current].rotate),t}))},onRotate:function(e){var n=e.target,c=e.beforeRotate;d.current&&(t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},b.current,{frames:Object(a.a)(Object(a.a)({},t[b.current].frames),{},Object(r.a)({},d.current,Object(a.a)(Object(a.a)({},t[b.current].frames[d.current]),{},{rotate:c})))}))})),n.style.transform="rotate(".concat(c,"deg)"))},onDragOriginStart:function(e){var n=e.dragStart;d.current&&n&&t((function(t){return n.set(t[b.current].frames[d.current].translateXY),t}))},onDragOrigin:function(e){var n=e.drag,c=e.transformOrigin;if(d.current){var i=n.beforeTranslate;t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},b.current,{frames:Object(a.a)(Object(a.a)({},t[b.current].frames),{},Object(r.a)({},d.current,Object(a.a)(Object(a.a)({},t[b.current].frames[d.current]),{},{translateXY:i,transformOrigin:c})))}))}))}},onDragStart:function(e){var n=e.set;d.current&&t((function(t){return n(t[b.current].frames[d.current].translateXY),t}))},onDrag:function(e){var n=e.beforeTranslate;d.current&&t((function(t){return Object(a.a)(Object(a.a)({},t),{},Object(r.a)({},b.current,{frames:Object(a.a)(Object(a.a)({},t[b.current].frames),{},Object(r.a)({},d.current,Object(a.a)(Object(a.a)({},t[b.current].frames[d.current]),{},{translateXY:n})))}))}))},onRender:function(e){var n=e.target;if(d.current){var r=n||document.getElementById(d.current);t((function(t){var e=t[b.current].frames[d.current],n=e.translateXY,a=e.rotate,c=e.transformOrigin;return r.style.transformOrigin=c,r.style.transform="translate(".concat(n[0],"px, ").concat(n[1],"px)")+" rotate(".concat(a,"deg)"),t}))}}}),O=Object(c.a)(j,2),g=O[0],p=O[1],h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;p((function(e){return Object(a.a)(Object(a.a)({},e),{},{target:t})}))},m=function(t,e){h(),f(e,t,(function(t){setTimeout((function(){var e=document.getElementById(t);h(e)}),150)}))};return{currentlyFocusedElement:i,setCurrentlyFocusedElement:u,setTarget:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;h(t),e&&m(e,n)},removeTarget:function(){t((function(t){var e=F()(t);return delete e[b.current].frames[d.current],e}))},options:g,addNewDraggable:m,updateDraggable:function(t,e){h(),f(b.current,{draggableType:t},(function(t){setTimeout((function(){var e=document.getElementById(t);h(e)}),150)}),d.current,e)}}},z=n(884),C=n(48),Y=n(969);p.node.isRequired,p.node.isRequired;function A(){var t=Object(i.a)(["\n\twidth: 50vw;\n\theight: 100vh;\n\t/* width: auto; */\n"]);return A=function(){return t},t}var V=l.d.div(A()),$=Object(o.forwardRef)((function(t,e){var n=t.button,r=t.children,i=Object(O.a)(t,["button","children"]),s=Object(o.useState)(!1),l=Object(c.a)(s,2),d=l[0],b=l[1];return Object(u.jsxs)(u.Fragment,{children:[Object(o.cloneElement)(n,{onClick:function(){return b(!0)}}),Object(u.jsx)(Y.a,Object(a.a)(Object(a.a)({anchor:"right",open:d,onClose:function(){return b(!1)}},i),{},{ref:e,children:Object(u.jsx)(V,{role:"presentation",children:r})}))]})}));$.defaultProps={};var q=$,J=n(783),N=n(808),H=n(820),M=n(790),U=n(99),W=Object(f.a)((function(){return n.e(27).then(n.bind(null,964))}),{size:"large"}),_=Object(f.a)((function(){return n.e(26).then(n.bind(null,965))}),{size:"large"}),G=n(885),K=n(793),Q=n(766),Z=[{type:k.a.TEXT,label:"Title",name:"title",required:!0},{type:k.a.TEXT,label:"Description",name:"description",defaultValue:""},{type:k.a.TEXT,label:"Thumbnail Image Url",name:"thumbnail",defaultValue:""}],tt=K.c().shape({title:K.e().label("Title").required(),description:K.e().label("Description"),thumbnail:K.e().url().label("Thumbnail Image Url")}),et=function(t){var e=t.onSubmit,n=t.defaultValues;return Object(u.jsx)(Q.a,{width:"100%",p:2,children:Object(u.jsx)(k.b,{schema:tt,items:Z,onSubmit:e,defaultValues:n,style:{width:"100%"}})})};function nt(){var t=Object(i.a)(["\n\t",";\n"]);return nt=function(){return t},t}function rt(){var t=Object(i.a)(["\n\tanimation: "," 1s ease-in-out 2;\n"]);return rt=function(){return t},t}function at(){var t=Object(i.a)(["\n\t0% {\n\t\tcolor: ",";\n\t}\n\n\t50% {\n\t\tcolor: ",";\n\t}\n\n\t100% {\n\t\tcolor: ",";\n\t}\n"]);return at=function(){return t},t}function ct(){var t=Object(i.a)(["\n\theight: 82%;\n\toverflow: auto;\n\tposition: relative;\n\tpadding: 5px;\n\t","\n"]);return ct=function(){return t},t}var it=Object(l.d)(S.a)(ct(),(function(t){var e=t.theme;return"\n\t\tbackground-color: ".concat(e.palette.background.default,";\n\t")})),ut=Object(l.d)(s.a)(nt(),(function(t){var e=t.theme;return Object(l.c)(rt(),function(t){return Object(l.e)(at(),t.palette.text.primary,t.palette.primary.main,t.palette.text.primary)}(e))})),ot=function(t){var e=t.time;return Object(u.jsxs)(ut,{component:"span",children:["Last updated on: ",Object(C.c)(e)]},e)},st=function(t){var e=t.slide,n=t.updateSlideshow,i=t.children,u=Object(o.useState)(""),s=Object(c.a)(u,2),l=s[0],d=s[1],f=Object(o.useState)(e.slides),j=Object(c.a)(f,2),O=j[0],g=j[1],p=function(t){g((function(e){return t instanceof Function?t(e):t}))};Object(o.useEffect)((function(){var t=setInterval((function(){g((function(t){return b()(e.slides,t)||(d(new Date),n({slides:t})),t}))}),3e3);return function(){clearInterval(t)}}),[e.slides]);var h=P(p),m=h.currentlyFocusedElement,v=h.setCurrentlyFocusedElement,x=h.setTarget,y=h.removeTarget,w=h.options,S=h.updateDraggable,T=Object(z.a)().onDragStart;Object(o.useEffect)((function(){var t=function(t){m.draggableId&&m.slideId&&"Delete"===t.key&&(x(),y())};return document.addEventListener("keyup",t),function(){document.removeEventListener("keyup",t)}}),[m.draggableId,m.slideId,y,x]);return i({slides:O,lastSave:l,onDragStart:T,options:w,sharedProps:{setTarget:x,removeTarget:y,deleteSlide:function(t){p((function(e){var n=Object(a.a)({},e);return delete n[t],n}))},updateDraggable:S,currentlyFocusedElement:m,setCurrentlyFocusedElement:v},onAddNewSlide:function(){var t=Date.now().toString();p((function(e){return Object(a.a)(Object(a.a)({},e),{},Object(r.a)({},t,{frames:{}}))})),setTimeout((function(){Object(C.g)(document.getElementById("container-".concat(t)))}),100)}})},lt=function(t){var e=t.match.params.id,n=Object(U.a)().notifySuccess,r=Object(N.a)(e),c=r.slide,i=r.pending,s=r.error,l=Object(H.a)(e),d=l.hasEditAccess,b=l.updateSlideshow,f=l.pending,O=l.error,g={id:e,slide:c,updateSlideshow:b},p=Object(o.useRef)();return i||s||f||O||!d&&Object(u.jsx)(M.a,{})||Object(u.jsx)(st,Object(a.a)(Object(a.a)({},g),{},{children:function(t){var e=t.slides,r=t.lastSave,i=t.onDragStart,o=t.options,s=t.sharedProps,l=t.onAddNewSlide;return Object(u.jsxs)(x,{container:!0,spacing:5,children:[Object(u.jsxs)(x,{item:!0,xs:2,spacing:1,rightLeft:!0,children:[Object(u.jsx)(S.a,{style:{height:"3%"}}),Object(u.jsx)(W,{onDragStart:i})]}),Object(u.jsxs)(x,{item:!0,xs:10,spacing:1,rightLeft:!0,children:[Object(u.jsx)(S.a,{style:{height:"3%"}}),Object(u.jsxs)(G.a,{children:["Slides"," ",Object(u.jsx)(q,{ref:p,button:Object(u.jsx)(y.a,{tooltip:"Open settings",onClick:function(){return null},icon:w.F}),children:Object(u.jsx)(et,{onSubmit:function(t){var e;b(t),null===(e=p.current)||void 0===e||e.click(),n("Slide configuration was successfully updated")},defaultValues:{title:c.title,description:c.description,thumbnail:c.thumbnail}})}),r&&Object(u.jsx)(ot,{time:r})]}),Object(u.jsxs)(it,{children:[Object(u.jsx)(j,Object(a.a)({},o)),Object.keys(e).map((function(t,n){return Object(u.jsx)(_,Object(a.a)(Object(a.a)(Object(a.a)({},s),e[t]),{},{slideId:t,index:n+1}),t)}))]}),Object(u.jsx)(S.a,{style:{height:"2.5%"}}),Object(u.jsx)(S.a,{style:{height:"4%"},children:Object(u.jsx)(y.a,{tooltip:"Add new slide",text:"Add new slide",fullWidth:!0,onClick:l,icon:w.b})})]})]})}}))};lt.defaultProps=J.b;var dt=lt}}]);