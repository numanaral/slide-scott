/*! For license information please see 30.41a26e21.chunk.js.LICENSE.txt */
(this["webpackJsonpslide-scott"]=this["webpackJsonpslide-scott"]||[]).push([[30],{703:function(t,n,r){"use strict";function e(t,n){for(var r=t.length,e=0;e<r;++e)if(n(t[e],e))return!0;return!1}function i(t,n){for(var r=t.length,e=0;e<r;++e)if(n(t[e],e))return t[e];return null}function a(t,n){try{return new RegExp(t,"g").exec(n)}catch(r){return null}}function o(){if("undefined"===typeof navigator||!navigator||!navigator.userAgentData)return!1;var t=navigator.userAgentData,n=t.brands||t.uaList;return!(!n||!n.length)}function s(t){return t.replace(/_/g,".")}function u(t,n){var r=null,i="-1";return e(t,(function(t){var e=a("("+t.test+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return!(!e||t.brand)&&(r=t,i=e[3]||"-1",t.versionAlias?i=t.versionAlias:t.versionTest&&(i=function(t,n){var r=a("("+t+")((?:\\/|\\s|:)([0-9|\\.|_]+))?",n);return r?r[3]:""}(t.versionTest.toLowerCase(),n)||i),i=s(i),!0)})),{preset:r,version:i}}function l(t,n){return i(t,(function(t){var r=t.brand;return a(""+n.test,r.toLowerCase())}))}var c=[{test:"phantomjs",id:"phantomjs"},{test:"whale",id:"whale"},{test:"edgios|edge|edg",id:"edge"},{test:"msie|trident|windows phone",id:"ie",versionTest:"iemobile|msie|rv"},{test:"miuibrowser",id:"miui browser"},{test:"samsungbrowser",id:"samsung internet"},{test:"samsung",id:"samsung internet",versionTest:"version"},{test:"chrome|crios",id:"chrome"},{test:"firefox|fxios",id:"firefox"},{test:"android",id:"android browser",versionTest:"version"},{test:"safari|iphone|ipad|ipod",id:"safari",versionTest:"version"}],f=[{test:"(?=.*applewebkit/(53[0-7]|5[0-2]|[0-4]))(?=.*\\schrome)",id:"chrome"},{test:"chromium",id:"chrome"},{test:"whale",id:"chrome",brand:!0}],p=[{test:"applewebkit",id:"webkit"}],d=[{test:"(?=(iphone|ipad))(?!(.*version))",id:"webview"},{test:"(?=(android|iphone|ipad))(?=.*(naver|daum|; wv))",id:"webview"},{test:"webview",id:"webview"}],h=[{test:"windows phone",id:"windows phone"},{test:"windows 2000",id:"window",versionAlias:"5.0"},{test:"windows nt",id:"window"},{test:"iphone|ipad|ipod",id:"ios",versionTest:"iphone os|cpu os"},{test:"mac os x",id:"mac"},{test:"android",id:"android"},{test:"tizen",id:"tizen"},{test:"webos|web0s",id:"webos"}];function g(t){var n=navigator.userAgentData,r=(n.uaList||n.brands).slice(),a=n.mobile||!1,o=r[0],u={name:o.brand,version:o.version,majorVersion:-1,webkit:!1,webview:e(d,(function(t){return l(r,t)})),chromium:e(f,(function(t){return l(r,t)}))},g={name:"unknown",version:"-1",majorVersion:-1};if(u.webkit=!u.chromium&&e(p,(function(t){return l(r,t)})),t){var v=t.platform.toLowerCase(),m=i(h,(function(t){return new RegExp(""+t.test,"g").exec(v)}));g.name=m?m.id:v,g.version=t.platformVersion}return e(c,(function(n){var e=l(r,n);return!!e&&(u.name=n.id,u.version=t?t.uaFullVersion:e.version,!0)})),"Linux armv8l"===navigator.platform?g.name="android":u.webkit&&(g.name=a?"ios":"mac"),"ios"===g.name&&u.webview&&(u.version="-1"),g.version=s(g.version),u.version=s(u.version),g.majorVersion=parseInt(g.version,10),u.majorVersion=parseInt(u.version,10),{browser:u,os:g,isMobile:a,isHints:!0}}function v(t){var n=function(t){var n=t;if("undefined"===typeof n){if("undefined"===typeof navigator||!navigator)return"";n=navigator.userAgent||""}return n.toLowerCase()}(t),r=!!/mobi/g.exec(n),e={name:"unknown",version:"-1",majorVersion:-1,webview:!!u(d,n).preset,chromium:!!u(f,n).preset,webkit:!1},i={name:"unknown",version:"-1",majorVersion:-1},a=u(c,n),o=a.preset,s=a.version,l=u(h,n),g=l.preset,v=l.version;return e.webkit=!e.chromium&&!!u(p,n).preset,g&&(i.name=g.id,i.version=v,i.majorVersion=parseInt(v,10)),o&&(e.name=o.id,e.version=s,e.webview&&"ios"===i.name&&"safari"!==e.name&&(e.webview=!1)),e.majorVersion=parseInt(e.version,10),{browser:e,os:i,isMobile:r,isHints:!1}}function m(t){return"undefined"===typeof t&&o()?g():v(t)}var b=m;function x(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.map((function(n){return n.split(" ").map((function(n){return n?""+t+n:""})).join(" ")})).join(" ")}function E(t,n){return function(r){r&&(t[n]=r)}}function S(t,n,r){return function(e){e&&(t[n][r]=e)}}var y="undefined",M=(typeof document!==y&&document,['"',"'",'\\"',"\\'"]),C={cm:function(t){return 96*t/2.54},mm:function(t){return 96*t/254},in:function(t){return 96*t},pt:function(t){return 96*t/72},pc:function(t){return 96*t/6},"%":function(t,n){return t*n/100},vw:function(t,n){return void 0===n&&(n=window.innerWidth),t/100*n},vh:function(t,n){return void 0===n&&(n=window.innerHeight),t/100*n},vmax:function(t,n){return void 0===n&&(n=Math.max(window.innerWidth,window.innerHeight)),t/100*n},vmin:function(t,n){return void 0===n&&(n=Math.min(window.innerWidth,window.innerHeight)),t/100*n}};function w(t){return typeof t===y}function D(t){return t&&"object"===typeof t}function R(t){return Array.isArray(t)}function P(t){return"string"===typeof t}function O(t,n,r,e){for(var i=r;i<e;++i){var a=n[i].trim();if(a===t)return i;var o=i;if("("===a?o=O(")",n,i+1,e):M.indexOf(a)>-1&&(o=O(a,n,i+1,e)),-1===o)break;i=o}return-1}function z(t,n){for(var r=new RegExp("(\\s*"+(n||",")+"\\s*|\\(|\\)|\"|'|\\\\\"|\\\\'|\\s+)","g"),e=t.split(r).filter(Boolean),i=e.length,a=[],o=[],s=0;s<i;++s){var u=e[s].trim(),l=s;if("("===u)l=O(")",e,s+1,i);else{if(")"===u)throw new Error("invalid format");if(M.indexOf(u)>-1)l=O(u,e,s+1,i);else if(u===n){o.length&&(a.push(o.join("")),o=[]);continue}}-1===l&&(l=i-1),o.push(e.slice(s,l+1).join("")),s=l}return o.length&&a.push(o.join("")),a}function B(t){return z(t,"")}function G(t){return z(t,",")}function T(t){var n=/([^(]*)\(([\s\S]*)\)([\s\S]*)/g.exec(t);return!n||n.length<4?{}:{prefix:n[1],value:n[2],suffix:n[3]}}function A(t){var n=/^([^\d|e|\-|\+]*)((?:\d|\.|-|e-|e\+)+)(\S*)$/g.exec(t);if(!n)return{prefix:"",unit:"",value:NaN};var r=n[1],e=n[2];return{prefix:r,unit:n[3],value:parseFloat(e)}}function I(){return Date.now?Date.now():(new Date).getTime()}function k(t,n,r){void 0===r&&(r=-1);for(var e=t.length,i=0;i<e;++i)if(n(t[i],i,t))return i;return r}function Y(t){if(Object.keys)return Object.keys(t);var n=[];for(var r in n)n.push(r);return n}function X(t,n){var r=A(t),e=r.value,i=r.unit;if(D(n)){var a=n[i];if(a){if(function(t){return"function"===typeof t}(a))return a(e);if(C[i])return C[i](e,a)}}else if("%"===i)return e*n/100;return C[i]?C[i](e):e}function F(t,n,r){return[[n[0],n[0]*t[1]/t[0]],[n[1]*t[0]/t[1],n[1]]].filter((function(t){return t.every((function(t,e){return r?t<=n[e]:t>=n[e]}))}))[0]||t}function j(t,n,r,e){if(!e)return t.map((function(t,e){return function(t,n,r){return Math.max(n,Math.min(t,r))}(t,n[e],r[e])}));var i=t[0],a=t[1],o=F(t,n,!1),s=o[0],u=o[1],l=F(t,r,!0),c=l[0],f=l[1];return i<s||a<u?(i=s,a=u):(i>c||a>f)&&(i=c,a=f),[i,a]}function q(t){for(var n=t.length,r=0,e=n-1;e>=0;--e)r+=t[e];return n?r/n:0}function N(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=Math.atan2(e,r);return i>=0?i:i+2*Math.PI}function W(t){var n=function(t){return[0,1].map((function(n){return q(t.map((function(t){return t[n]})))}))}(t),r=N(n,t[0]),e=N(n,t[1]);return r<e&&e-r<Math.PI||r>e&&e-r<-Math.PI?1:-1}function L(t,n){return Math.sqrt(Math.pow((n?n[0]:0)-t[0],2)+Math.pow((n?n[1]:0)-t[1],2))}function _(t,n){return t.classList?t.classList.contains(n):!!t.className.match(new RegExp("(\\s|^)"+n+"(\\s|$)"))}function H(t,n,r,e){t.addEventListener(n,r,e)}function V(t,n,r){t.removeEventListener(n,r)}function U(t,n,r,e,i,a){for(var o=0;o<i;++o){var s=r+o*i,u=e+o*i;t[s]+=t[u]*a,n[s]+=n[u]*a}}function Z(t,n,r,e,i){for(var a=0;a<i;++a){var o=r+a*i,s=e+a*i,u=t[o],l=n[o];t[o]=t[s],t[s]=u,n[o]=n[s],n[s]=l}}function K(t,n,r,e,i){for(var a=0;a<e;++a){var o=r+a*e;t[o]/=i,n[o]/=i}}function $(t,n,r){void 0===r&&(r=Math.sqrt(t.length));for(var e=t.slice(),i=0;i<r;++i)e[i*r+n-1]=0,e[(n-1)*r+i]=0;return e[(n-1)*(r+1)]=1,e}function J(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=t.slice(),e=gt(n),i=0;i<n;++i){var a=n*i+i;if(0===r[a])for(var o=i+1;o<n;++o)if(r[n*i+o]){Z(r,e,i,o,n);break}if(!r[a])return[];K(r,e,i,n,r[a]);for(o=0;o<n;++o){var s=o,u=r[o+i*n];0!==u&&i!==o&&U(r,e,s,i,n,-u)}}return e}function Q(t,n){for(var r=t.slice(),e=t.length;e<n-1;++e)r[e]=0;return r[n-1]=1,r}function tt(t,n,r){if(void 0===n&&(n=Math.sqrt(t.length)),n===r)return t;for(var e=gt(r),i=Math.min(n,r),a=0;a<i-1;++a){for(var o=0;o<i-1;++o)e[a*r+o]=t[a*n+o];e[(a+1)*r-1]=t[(a+1)*n-1],e[(r-1)*r+a]=t[(n-1)*n+a]}return e[r*r-1]=t[n*n-1],e}function nt(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var e=gt(t);return n.forEach((function(n){e=rt(e,n,t)})),e}function rt(t,n,r){void 0===r&&(r=Math.sqrt(t.length));var e=[],i=t.length/r,a=n.length/i;if(!i)return n;if(!a)return t;for(var o=0;o<r;++o)for(var s=0;s<a;++s){e[s*r+o]=0;for(var u=0;u<i;++u)e[s*r+o]+=t[u*r+o]*n[s*i+u]}return e}function et(t,n){for(var r=Math.min(t.length,n.length),e=t.slice(),i=0;i<r;++i)e[i]=e[i]+n[i];return e}function it(t,n){for(var r=Math.min(t.length,n.length),e=t.slice(),i=0;i<r;++i)e[i]=e[i]-n[i];return e}function at(t,n){return void 0===n&&(n=9===t.length),n?[t[0],t[1],t[3],t[4],t[6],t[7]]:t}function ot(t,n,r){void 0===r&&(r=n.length);var e=rt(t,n,r),i=e[r-1];return e.map((function(t){return t/i}))}function st(t,n){return rt(t,[1,0,0,0,0,Math.cos(n),Math.sin(n),0,0,-Math.sin(n),Math.cos(n),0,0,0,0,1],4)}function ut(t,n){return rt(t,[Math.cos(n),0,-Math.sin(n),0,0,1,0,0,Math.sin(n),0,Math.cos(n),0,0,0,0,1],4)}function lt(t,n){return rt(t,ht(n,4))}function ct(t,n){var r=n[0],e=void 0===r?1:r,i=n[1],a=void 0===i?1:i,o=n[2];return rt(t,[e,0,0,0,0,a,0,0,0,0,void 0===o?1:o,0,0,0,0,1],4)}function ft(t,n){return ot(ht(n,3),Q(t,3))}function pt(t,n){var r=n[0],e=void 0===r?0:r,i=n[1],a=void 0===i?0:i,o=n[2];return rt(t,[1,0,0,0,0,1,0,0,0,0,1,0,e,a,void 0===o?0:o,1],4)}function dt(t,n){return rt(t,n,4)}function ht(t,n){var r=Math.cos(t),e=Math.sin(t),i=gt(n);return i[0]=r,i[1]=e,i[n]=-e,i[n+1]=r,i}function gt(t){for(var n=t*t,r=[],e=0;e<n;++e)r[e]=e%(t+1)?0:1;return r}function vt(t,n){for(var r=gt(n),e=Math.min(t.length,n-1),i=0;i<e;++i)r[(n+1)*i]=t[i];return r}function mt(t,n){for(var r=gt(n),e=Math.min(t.length,n-1),i=0;i<e;++i)r[n*(n-1)+i]=t[i];return r}function bt(t,n,r,e,i,a,o,s){var u=t[0],l=t[1],c=n[0],f=n[1],p=r[0],d=r[1],h=e[0],g=e[1],v=i[0],m=i[1],b=a[0],x=a[1],E=o[0],S=o[1],y=s[0],M=s[1],C=J([u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,0,0,u,0,c,0,p,0,h,0,l,0,f,0,d,0,g,0,1,0,1,0,1,0,1,-v*u,-m*u,-b*c,-x*c,-E*p,-S*p,-y*h,-M*h,-v*l,-m*l,-b*f,-x*f,-E*d,-S*d,-y*g,-M*g],8);if(!C.length)return[];var w=rt(C,[v,m,b,x,E,S,y,M],8);return w[8]=1,tt(function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],e=0;e<n;++e)for(var i=0;i<n;++i)r[i*n+e]=t[n*e+i];return r}(w),3,4)}function xt(t){return Et(St(t))}function Et(t){var n=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return t.forEach((function(t){var r=t.matrixFunction,e=t.functionValue;r&&(n=r(n,e))})),n}function St(t){return(R(t)?t:B(t)).map((function(t){var n=T(t),r=n.prefix,e=n.value,i=null,a=r,o="";if("translate"===r||"translateX"===r||"translate3d"===r){var s=G(e).map((function(t){return parseFloat(t)})),u=s[0],l=s[1],c=void 0===l?0:l,f=s[2];i=pt,o=[u,c,void 0===f?0:f]}else if("translateY"===r){i=pt,o=[0,c=parseFloat(e),0]}else if("translateZ"===r){i=pt,o=[0,0,parseFloat(e)]}else if("scale"===r||"scale3d"===r){var p=G(e).map((function(t){return parseFloat(t)})),d=p[0],h=p[1],g=void 0===h?d:h,v=p[2];i=ct,o=[d,g,void 0===v?1:v]}else if("scaleX"===r){i=ct,o=[d=parseFloat(e),1,1]}else if("scaleY"===r){i=ct,o=[1,g=parseFloat(e),1]}else if("scaleZ"===r){i=ct,o=[1,1,parseFloat(e)]}else if("rotate"===r||"rotateZ"===r||"rotateX"===r||"rotateY"===r){var m=A(e),b=m.unit,x=m.value;"rotate"===r||"rotateZ"===r?(a="rotateZ",i=lt):"rotateX"===r?i=st:"rotateY"===r&&(i=ut),o="rad"===b?x:x*Math.PI/180}else if("matrix3d"===r)i=dt,o=G(e).map((function(t){return parseFloat(t)}));else if("matrix"===r){var E=G(e).map((function(t){return parseFloat(t)}));i=dt,o=[E[0],E[1],0,0,E[2],E[3],0,0,0,0,1,0,E[4],E[5],0,1]}else a="";return{name:r,functionName:a,value:e,matrixFunction:i,functionValue:o}}))}function yt(t){return t.length<3?0:Math.abs(function(t){for(var n=0,r=t.length-1;r>=0;--r)n+=t[r];return n}(t.map((function(n,r){var e=t[r+1]||t[0];return n[0]*e[1]-e[0]*n[1]}))))/2}function Mt(t,n){var r=n.width,e=n.height,i=n.left,a=n.top,o=Ct(t),s=o.minX,u=o.minY,l=o.maxX,c=o.maxY,f=r/(l-s),p=e/(c-u);return t.map((function(t){return[i+(t[0]-s)*f,a+(t[1]-u)*p]}))}function Ct(t){var n=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]}));return{minX:Math.min.apply(Math,n),minY:Math.min.apply(Math,r),maxX:Math.max.apply(Math,n),maxY:Math.max.apply(Math,r)}}function wt(t,n,r){var e=t[0],i=t[1],a=Ct(n),o=a.minX,s=a.minY,u=a.maxX,l=a.maxY,c=[[o,i],[u,i]],f=[[e,s],[e,l]],p=Dt(c[0],c[1]),d=Dt(f[0],f[1]),h=Ot(n),g=[],v=[];return h.forEach((function(t){var n=Dt(t[0],t[1]),r=Pt(Rt(p,n),[c,t]),a=Pt(Rt(d,n),[f,t]);1===r.length&&t[0][1]===i||g.push.apply(g,r),1===a.length&&t[0][0]===e||v.push.apply(v,a),n[0]||g.push.apply(g,r),n[1]||v.push.apply(v,a)})),!r&&(k(g,(function(t){return t[0]===e}))>-1||k(v,(function(t){return t[1]===i}))>-1)||!!(g.filter((function(t){return t[0]>e})).length%2&&v.filter((function(t){return t[1]>i})).length%2)}function Dt(t,n){var r=t[0],e=t[1],i=n[0],a=n[1];if(r===i&&e===a)return[0,0,0];if(r===i)return[1,0,-r];if(e===a)return[0,1,-e];var o=(i-r)/(e-a);return[1,o,-r-o*e]}function Rt(t,n){var r,e,i=t[0],a=t[1],o=t[2],s=n[0],u=n[1],l=n[2],c=0===i&&0===s,f=0===a&&0===u;if(c&&f)return[];if(c){var p=-o/a;return p!==-l/u?[]:[[-1/0,p],[1/0,p]]}if(f){var d=-o/i;return d!==-l/s?[]:[[d,-1/0],[d,1/0]]}return 0===i?[[r=-(u*(e=-o/a)+l)/s,e]]:0===s?[[r=-(a*(e=-l/u)+o)/i,e]]:0===a?[[r=-o/i,e=-(s*r+l)/u]]:0===u?[[r=-l/s,e=-(i*r+o)/a]]:[[r=(a*l-u*o)/(u*i-a*s),e=-(i*r+o)/a]]}function Pt(t,n){var r=n.map((function(t){return[0,1].map((function(n){return[Math.min(t[0][n],t[1][n]),Math.max(t[0][n],t[1][n])]}))}));if(2===t.length){var e=t[0],i=e[0],a=e[1];if(i===t[1][0]){var o=Math.max.apply(Math,r.map((function(t){return t[1][0]}))),s=Math.min.apply(Math,r.map((function(t){return t[1][1]})));return o>s?[]:[[i,o],[i,s]]}if(a===t[1][1]){var u=Math.max.apply(Math,r.map((function(t){return t[0][0]}))),l=Math.min.apply(Math,r.map((function(t){return t[0][1]})));return u>l?[]:[[u,a],[l,a]]}}return t.filter((function(t){return r.every((function(n){return n[0][0]<=t[0]&&t[0]<=n[0][1]&&n[1][0]<=t[1]&&t[1]<=n[1][1]}))}))}function Ot(t){return function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var e=Array(t),i=0;for(n=0;n<r;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)e[i]=a[o];return e}(t.slice(1),[t[0]]).map((function(n,r){return[t[r],n]}))}function zt(t,n){return yt(function(t,n){var r=t.slice(),e=n.slice();-1===W(r)&&r.reverse(),-1===W(e)&&e.reverse();var i=Ot(r),a=Ot(e),o=i.map((function(t){return Dt(t[0],t[1])})),s=a.map((function(t){return Dt(t[0],t[1])})),u=[];o.forEach((function(t,n){var r=i[n],o=[];s.forEach((function(e,i){var s=Pt(Rt(t,e),[r,a[i]]);o.push.apply(o,s.map((function(t){return{index1:n,index2:i,pos:t}})))})),o.sort((function(t,n){return L(r[0],t.pos)-L(r[0],n.pos)})),u.push.apply(u,o),wt(r[1],e)&&u.push({index1:n,index2:-1,pos:r[1]})})),a.forEach((function(t,n){if(wt(t[1],r)){var e=!1,i=k(u,(function(t){return t.index2===n?(e=!0,!1):!!e}));-1===i&&(e=!1,i=k(u,(function(t){var r=t.index1,i=t.index2;return-1===r&&i+1===n?(e=!0,!1):!!e}))),-1===i?u.push({index1:-1,index2:n,pos:t[1]}):u.splice(i,0,{index1:-1,index2:n,pos:t[1]})}}));var l=u.map((function(t){return t.pos})),c={};return l.filter((function(t){var n=t[0]+"x"+t[1];return!c[n]&&(c[n]=!0,!0)}))}(t,n))}var Bt=function(){return(Bt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var Gt=function(){function t(){this._events={}}var n=t.prototype;return n.on=function(t,n){if(D(t))for(var r in t)this.on(r,t[r]);else this._addEvent(t,n,{});return this},n.off=function(t,n){if(t)if(D(t))for(var r in t)this.off(r);else if(n){var e=this._events[t];if(e){var i=k(e,(function(t){return t.listener===n}));i>-1&&e.splice(i,1)}}else this._events[t]=[];else this._events={};return this},n.once=function(t,n){var r=this;return n&&this._addEvent(t,n,{once:!0}),new Promise((function(n){r._addEvent(t,n,{once:!0})}))},n.emit=function(t,n){var r=this;void 0===n&&(n={});var e=this._events[t];if(!t||!e)return!0;var i=!1;return n.eventType=t,n.stop=function(){i=!0},n.currentTarget=this,function(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var e=Array(t),i=0;for(n=0;n<r;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)e[i]=a[o];return e}(e).forEach((function(e){e.listener(n),e.once&&r.off(t,e.listener)})),!i},n.trigger=function(t,n){return void 0===n&&(n={}),this.emit(t,n)},n._addEvent=function(t,n,r){var e=this._events;e[t]=e[t]||[],e[t].push(Bt({listener:n},r))},t}(),Tt=function(t,n){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function At(t){var n=t.container;return[n.scrollLeft,n.scrollTop]}var It=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.startRect=null,n.startPos=[],n.prevTime=0,n.timer=0,n}!function(t,n){function r(){this.constructor=t}Tt(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t);var r=n.prototype;return r.dragStart=function(t,n){var r=n.container.getBoundingClientRect(),e=r.top,i=r.left,a=r.width,o=r.height;this.startPos=[t.clientX,t.clientY],this.startRect={top:e,left:i,width:a,height:o}},r.drag=function(t,n){var r=this,e=t.clientX,i=t.clientY,a=n.container,o=n.threshold,s=void 0===o?0:o,u=n.throttleTime,l=void 0===u?0:u,c=n.getScrollPosition,f=void 0===c?At:c,p=this.startRect,d=this.startPos,h=I(),g=Math.max(l+this.prevTime-h,0),v=[0,0];if(p.top>i-s?(d[1]>p.top||i<d[1])&&(v[1]=-1):p.top+p.height<i+s&&(d[1]<p.top+p.height||i>d[1])&&(v[1]=1),p.left>e-s?(d[0]>p.left||e<d[0])&&(v[0]=-1):p.left+p.width<e+s&&(d[0]<p.left+p.width||e>d[0])&&(v[0]=1),clearTimeout(this.timer),!v[0]&&!v[1])return!1;if(g>0)return this.timer=window.setTimeout((function(){r.drag(t,n)}),g),!1;this.prevTime=h;var m=f({container:a,direction:v});this.trigger("scroll",{container:a,direction:v,inputEvent:t});var b=f({container:a,direction:v}),x=b[0]-m[0],E=b[1]-m[1];return!(!x&&!E)&&(this.trigger("move",{offsetX:v[0]?x:0,offsetY:v[1]?E:0,inputEvent:t}),l&&(this.timer=window.setTimeout((function(){r.drag(t,n)}),l)),!0)},r.dragEnd=function(){clearTimeout(this.timer)},n}(Gt),kt=r(0),Yt=function(t,n){return(Yt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var Xt=function(){return(Xt=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function Ft(t){return function(t,n){var r=n[0]-t[0],e=n[1]-t[1],i=Math.atan2(e,r);return i>=0?i:i+2*Math.PI}([t[0].clientX,t[0].clientY],[t[1].clientX,t[1].clientY])/Math.PI*180}function jt(t){return t.touches?function(t){for(var n=Math.min(t.length,2),r=[],e=0;e<n;++e)r.push(Wt(t[e]));return r}(t.touches):[Wt(t)]}function qt(t,n,r){var e=r.length,i=Lt(t,e),a=i.clientX,o=i.clientY,s=i.originalClientX,u=i.originalClientY,l=Lt(n,e),c=l.clientX,f=l.clientY,p=Lt(r,e);return{clientX:s,clientY:u,deltaX:a-c,deltaY:o-f,distX:a-p.clientX,distY:o-p.clientY}}function Nt(t){return Math.sqrt(Math.pow(t[0].clientX-t[1].clientX,2)+Math.pow(t[0].clientY-t[1].clientY,2))}function Wt(t){return{clientX:t.clientX,clientY:t.clientY}}function Lt(t,n){void 0===n&&(n=t.length);for(var r={clientX:0,clientY:0,originalClientX:0,originalClientY:0},e=0;e<n;++e){var i=t[e];r.originalClientX+="originalClientX"in i?i.originalClientX:i.clientX,r.originalClientY+="originalClientY"in i?i.originalClientY:i.clientY,r.clientX+=i.clientX,r.clientY+=i.clientY}return n?{clientX:r.clientX/n,clientY:r.clientY/n,originalClientX:r.originalClientX/n,originalClientY:r.originalClientY/n}:r}var _t=function(){function t(t){this.prevClients=[],this.startClients=[],this.movement=0,this.length=0,this.startClients=t,this.prevClients=t,this.length=t.length}var n=t.prototype;return n.addClients=function(t){void 0===t&&(t=this.prevClients);var n=this.getPosition(t),r=n.deltaX,e=n.deltaY;return this.movement+=Math.sqrt(r*r+e*e),this.prevClients=t,n},n.getAngle=function(t){return void 0===t&&(t=this.prevClients),Ft(t)},n.getRotation=function(t){return void 0===t&&(t=this.prevClients),Ft(t)-Ft(this.startClients)},n.getPosition=function(t){return qt(t||this.prevClients,this.prevClients,this.startClients)},n.getPositions=function(t){void 0===t&&(t=this.prevClients);var n=this.prevClients;return this.startClients.map((function(r,e){return qt([t[e]],[n[e]],[r])}))},n.getMovement=function(t){var n=this.movement;if(!t)return n;var r=Lt(t,this.length),e=Lt(this.prevClients,this.length),i=r.clientX-e.clientX,a=r.clientY-e.clientY;return Math.sqrt(i*i+a*a)+n},n.getDistance=function(t){return void 0===t&&(t=this.prevClients),Nt(t)},n.getScale=function(t){return void 0===t&&(t=this.prevClients),Nt(t)/Nt(this.startClients)},n.move=function(t,n){this.startClients.forEach((function(r){r.clientX-=t,r.clientY-=n})),this.prevClients.forEach((function(r){r.clientX-=t,r.clientY-=n}))},t}(),Ht=["textarea","input"],Vt=function(t){function n(n,r){void 0===r&&(r={});var e=t.call(this)||this;e.options={},e.flag=!1,e.pinchFlag=!1,e.datas={},e.isDrag=!1,e.isPinch=!1,e.isMouse=!1,e.isTouch=!1,e.clientStores=[],e.targets=[],e.prevTime=0,e.isDouble=!1,e.onDragStart=function(t,n){if(void 0===n&&(n=!0),e.flag||!1!==t.cancelable){var r=e.options,i=r.container,a=r.pinchOutside,o=r.preventRightClick,s=r.preventDefault,u=r.checkInput,l=e.isTouch,c=!e.flag;if(c){var f=document.activeElement,p=t.target,d=p.tagName.toLowerCase(),h=Ht.indexOf(d)>-1,g=p.isContentEditable;if(h||g){if(u||f===p)return!1;if(f&&g&&f.isContentEditable&&f.contains(p))return!1}else if((s||"touchstart"===t.type)&&f){var v=f.tagName;(f.isContentEditable||Ht.indexOf(v)>-1)&&f.blur()}if(e.clientStores=[new _t(jt(t))],e.flag=!0,e.isDrag=!1,e.datas={},o&&(3===t.which||2===t.button))return e.initDrag(),!1;!1===e.emit("dragStart",Xt({datas:e.datas,inputEvent:t,isTrusted:n},e.getCurrentStore().getPosition()))&&e.initDrag(),e.isDouble=I()-e.prevTime<200,e.flag&&s&&t.preventDefault()}if(!e.flag)return!1;var m=0;if(c&&l&&a&&(m=setTimeout((function(){H(i,"touchstart",e.onDragStart,{passive:!1})}))),!c&&l&&a&&V(i,"touchstart",e.onDragStart),e.flag&&function(t){return t.touches&&t.touches.length>=2}(t)){if(clearTimeout(m),c&&t.touches.length!==t.changedTouches.length)return;e.pinchFlag||e.onPinchStart(t)}}},e.onDrag=function(t,n){if(e.flag){var r=jt(t),i=e.moveClients(r,t,!1);(e.pinchFlag||i.deltaX||i.deltaY)&&e.emit("drag",Xt({},i,{isScroll:!!n,inputEvent:t})),e.pinchFlag&&e.onPinch(t,r),e.getCurrentStore().addClients(r)}},e.onDragEnd=function(t){if(e.flag){var n=e.options,r=n.pinchOutside,i=n.container;e.isTouch&&r&&V(i,"touchstart",e.onDragStart),e.flag=!1;var a=e.getCurrentStore().getPosition(),o=I(),s=!e.isDrag&&e.isDouble;e.prevTime=e.isDrag||s?0:o,e.emit("dragEnd",Xt({datas:e.datas,isDouble:s,isDrag:e.isDrag,inputEvent:t},a)),e.pinchFlag&&e.onPinchEnd(t),e.clientStores=[]}},e.onBlur=function(){e.onDragEnd()};var i=[].concat(n);e.options=Xt({checkInput:!1,container:i.length>1?window:i[0],preventRightClick:!0,preventDefault:!0,checkWindowBlur:!1,pinchThreshold:0,events:["touch","mouse"]},r);var a=e.options,o=a.container,s=a.events,u=a.checkWindowBlur;if(e.isTouch=s.indexOf("touch")>-1,e.isMouse=s.indexOf("mouse")>-1,e.targets=i,e.isMouse&&(i.forEach((function(t){H(t,"mousedown",e.onDragStart)})),H(o,"mousemove",e.onDrag),H(o,"mouseup",e.onDragEnd),H(o,"contextmenu",e.onDragEnd)),u&&H(window,"blur",e.onBlur),e.isTouch){var l={passive:!1};i.forEach((function(t){H(t,"touchstart",e.onDragStart,l)})),H(o,"touchmove",e.onDrag,l),H(o,"touchend",e.onDragEnd,l),H(o,"touchcancel",e.onDragEnd,l)}return e}!function(t,n){function r(){this.constructor=t}Yt(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t);var r=n.prototype;return r.getMovement=function(t){return this.getCurrentStore().getMovement(t)+this.clientStores.slice(1).reduce((function(t,n){return t+n.movement}),0)},r.isDragging=function(){return this.isDrag},r.isFlag=function(){return this.flag},r.isPinchFlag=function(){return this.pinchFlag},r.isPinching=function(){return this.isPinch},r.scrollBy=function(t,n,r,e){void 0===e&&(e=!0),this.flag&&(this.clientStores[0].move(t,n),e&&this.onDrag(r,!0))},r.move=function(t,n){var r=t[0],e=t[1],i=this.getCurrentStore().prevClients;return this.moveClients(i.map((function(t){var n=t.clientX,i=t.clientY;return{clientX:n+r,clientY:i+e,originalClientX:n,originalClientY:i}})),n,!0)},r.triggerDragStart=function(t){this.onDragStart(t,!1)},r.setEventDatas=function(t){var n=this.datas;for(var r in t)n[r]=t[r];return this},r.getEventDatas=function(){return this.datas},r.unset=function(){var t=this,n=this.targets,r=this.options.container;this.off(),V(window,"blur",this.onBlur),this.isMouse&&(n.forEach((function(n){V(n,"mousedown",t.onDragStart)})),V(r,"mousemove",this.onDrag),V(r,"mouseup",this.onDragEnd),V(r,"contextmenu",this.onDragEnd)),this.isTouch&&(n.forEach((function(n){V(n,"touchstart",t.onDragStart)})),V(r,"touchstart",this.onDragStart),V(r,"touchmove",this.onDrag),V(r,"touchend",this.onDragEnd),V(r,"touchcancel",this.onDragEnd))},r.onPinchStart=function(t){var n=this.options.pinchThreshold;if(!(this.isDrag&&this.getMovement()>n)){var r=new _t(jt(t));this.pinchFlag=!0,this.clientStores.splice(0,0,r),!1===this.emit("pinchStart",Xt({datas:this.datas,angle:r.getAngle(),touches:this.getCurrentStore().getPositions()},r.getPosition(),{inputEvent:t}))&&(this.pinchFlag=!1)}},r.onPinch=function(t,n){if(this.flag&&this.pinchFlag&&!(n.length<2)){var r=this.getCurrentStore();this.isPinch=!0,this.emit("pinch",Xt({datas:this.datas,movement:this.getMovement(n),angle:r.getAngle(n),rotation:r.getRotation(n),touches:r.getPositions(n),scale:r.getScale(n),distance:r.getDistance(n)},r.getPosition(n),{inputEvent:t}))}},r.onPinchEnd=function(t){if(this.pinchFlag){var n=this.isPinch;this.isPinch=!1,this.pinchFlag=!1;var r=this.getCurrentStore();this.emit("pinchEnd",Xt({datas:this.datas,isPinch:n,touches:r.getPositions()},r.getPosition(),{inputEvent:t})),this.isPinch=!1,this.pinchFlag=!1}},r.initDrag=function(){this.clientStores=[],this.pinchFlag=!1,this.flag=!1},r.getCurrentStore=function(){return this.clientStores[0]},r.moveClients=function(t,n,r){var e=this.getCurrentStore()[r?"addClients":"getPosition"](t);return this.isDrag=!0,Xt({datas:this.datas},e,{movement:this.getMovement(t),isDrag:this.isDrag,isPinch:this.isPinch,isScroll:!1,inputEvent:n})},n}(Gt),Ut=function(){function t(){this.keys=[],this.values=[]}var n=t.prototype;return n.get=function(t){return this.values[this.keys.indexOf(t)]},n.set=function(t,n){var r=this.keys,e=this.values,i=r.indexOf(t),a=-1===i?r.length:i;r[a]=t,e[a]=n},t}(),Zt=function(){function t(){this.object={}}var n=t.prototype;return n.get=function(t){return this.object[t]},n.set=function(t,n){this.object[t]=n},t}(),Kt="function"===typeof Map,$t=function(){function t(){}var n=t.prototype;return n.connect=function(t,n){this.prev=t,this.next=n,t&&(t.next=this),n&&(n.prev=this)},n.disconnect=function(){var t=this.prev,n=this.next;t&&(t.next=n),n&&(n.prev=t)},n.getIndex=function(){for(var t=this,n=-1;t;)t=t.prev,++n;return n},t}();var Jt=function(){function t(t,n,r,e,i,a,o,s){this.prevList=t,this.list=n,this.added=r,this.removed=e,this.changed=i,this.maintained=a,this.changedBeforeAdded=o,this.fixed=s}var n=t.prototype;return Object.defineProperty(n,"ordered",{get:function(){return this.cacheOrdered||this.caculateOrdered(),this.cacheOrdered},enumerable:!0,configurable:!0}),Object.defineProperty(n,"pureChanged",{get:function(){return this.cachePureChanged||this.caculateOrdered(),this.cachePureChanged},enumerable:!0,configurable:!0}),n.caculateOrdered=function(){var t=function(t,n){var r=[],e=[];return t.forEach((function(t){var n=t[0],i=t[1],a=new $t;r[n]=a,e[i]=a})),r.forEach((function(t,n){t.connect(r[n-1])})),t.filter((function(t,r){return!n[r]})).map((function(t,n){var i=t[0],a=t[1];if(i===a)return[0,0];var o=r[i],s=e[a-1],u=o.getIndex();return o.disconnect(),s?o.connect(s,s.next):o.connect(void 0,r[0]),[u,o.getIndex()]}))}(this.changedBeforeAdded,this.fixed),n=this.changed,r=[];this.cacheOrdered=t.filter((function(t,e){var i=t[0],a=t[1],o=n[e],s=o[0],u=o[1];if(i!==a)return r.push([s,u]),!0})),this.cachePureChanged=r},t}();function Qt(t,n,r){var e=Kt?Map:r?Zt:Ut,i=r||function(t){return t},a=[],o=[],s=[],u=t.map(i),l=n.map(i),c=new e,f=new e,p=[],d=[],h={},g=[],v=0,m=0;return u.forEach((function(t,n){c.set(t,n)})),l.forEach((function(t,n){f.set(t,n)})),u.forEach((function(t,n){var r=f.get(t);"undefined"===typeof r?(++m,o.push(n)):h[r]=m})),l.forEach((function(t,n){var r=c.get(t);"undefined"===typeof r?(a.push(n),++v):(s.push([r,n]),m=h[n]||0,p.push([r-m,n-v]),d.push(n===r),r!==n&&g.push([r,n]))})),o.reverse(),new Jt(t,n,a,o,g,s,p,d)}var tn=function(){function t(t,n){void 0===t&&(t=[]),this.findKeyCallback=n,this.list=[].slice.call(t)}return t.prototype.update=function(t){var n=[].slice.call(t),r=Qt(this.list,n,this.findKeyCallback);return this.list=n,r},t}(),nn=function(t,n){return(nn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};var rn="function"===typeof Map?void 0:function(){var t=0;return function(n){return n.__DIFF_KEY__||(n.__DIFF_KEY__=++t)}}();var en=function(t){function n(n){return void 0===n&&(n=[]),t.call(this,n,rn)||this}return function(t,n){function r(){this.constructor=t}nn(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n}(tn);var an=function(t){for(var n=5381,r=t.length;r;)n=33*n^t.charCodeAt(--r);return n>>>0};function on(t,n,r,e){var i=document.createElement("style");return i.setAttribute("type","text/css"),i.setAttribute("data-styled-id",t),r.nonce&&i.setAttribute("nonce",r.nonce),i.innerHTML=function(t,n,r){return r.original?n:n.replace(/([^};{\s}][^};{]*|^\s*){/gm,(function(n,r){var e=r.trim();return(e?G(e):[""]).map((function(n){var r=n.trim();return 0===r.indexOf("@")?r:r.indexOf(":global")>-1?r.replace(/\:global/g,""):r.indexOf(":host")>-1?""+r.replace(/\:host/g,"."+t):r?"."+t+" "+r:"."+t})).join(", ")+" {"}))}(t,n,r),(e||document.head||document.body).appendChild(i),i}var sn=function(t){var n,r="rCS"+an(t).toString(36),e=0;return{className:r,inject:function(i,a){void 0===a&&(a={});var o,s=function(t){if(t&&t.getRootNode){var n=t.getRootNode();if(11===n.nodeType)return n}}(i),u=0===e;return(s||u)&&(o=on(r,t,a,s)),u&&(n=o),s||++e,{destroy:function(){s?(i.removeChild(o),o=null):(e>0&&--e,0===e&&n&&(n.parentNode.removeChild(n),n=null))}}}}},un=function(t,n){return(un=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function ln(t,n){function r(){this.constructor=t}un(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var cn=function(){return(cn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};var fn=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.injectResult=null,n.tag="div",n}ln(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=t.className,r=void 0===n?"":n,e=(t.cspNonce,function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]])}return r}(t,["className","cspNonce"])),i=this.injector.className,a=this.tag;return Object(kt.createElement)(a,cn({ref:E(this,"element"),"data-styled-id":i,className:r+" "+i},e))},r.componentDidMount=function(){this.injectResult=this.injector.inject(this.element,{nonce:this.props.cspNonce})},r.componentWillUnmount=function(){this.injectResult.destroy(),this.injectResult=null},r.getElement=function(){return this.element},n}(kt.Component);var pn=function(t,n){var r=sn(n);return function(n){function e(){var e=null!==n&&n.apply(this,arguments)||this;return e.injector=r,e.tag=t,e}return ln(e,n),e}(fn)},dn=function(t,n){return(dn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])})(t,n)};function hn(t,n){function r(){this.constructor=t}dn(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var gn=function(){return(gn=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t}).apply(this,arguments)};function vn(){for(var t=0,n=0,r=arguments.length;n<r;n++)t+=arguments[n].length;var e=Array(t),i=0;for(n=0;n<r;n++)for(var a=arguments[n],o=0,s=a.length;o<s;o++,i++)e[i]=a[o];return e}function mn(t,n){return'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="'+32*t+'px" height="'+32*t+'px" viewBox="0 0 32 32" ><path d="M 16,5 L 12,10 L 14.5,10 L 14.5,22 L 12,22 L 16,27 L 20,22 L 17.5,22 L 17.5,10 L 20, 10 L 16,5 Z" stroke-linejoin="round" stroke-width="1.2" fill="black" stroke="white" style="transform:rotate('+n+'deg);transform-origin: 16px 16px"></path></svg>'}var bn=b().browser.webkit,xn=bn&&function(){var t=/applewebkit\/([^\s]+)/g.exec(navigator.userAgent.toLowerCase());return!!t&&parseFloat(t[1])<605}(),En="moveable-",Sn="\n{\n\tposition: absolute;\n\twidth: 1px;\n\theight: 1px;\n\tleft: 0;\n\ttop: 0;\n    z-index: 3000;\n    --zoom: 1;\n    --zoompx: 1px;\n}\n.control-box {\n    z-index: 0;\n}\n.line, .control {\n\tleft: 0;\n    top: 0;\n    will-change: transform;\n}\n.control {\n\tposition: absolute;\n\twidth: 14px;\n\theight: 14px;\n\tborder-radius: 50%;\n\tborder: 2px solid #fff;\n\tbox-sizing: border-box;\n\tbackground: #4af;\n\tmargin-top: -7px;\n    margin-left: -7px;\n    width: calc(14 * var(--zoompx));\n    height: calc(14 * var(--zoompx));\n    margin-top: calc(-7 * var(--zoompx));\n    margin-left: calc(-7 * var(--zoompx));\n    border: calc(2 * var(--zoompx)) solid #fff;\n    z-index: 10;\n}\n.padding {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100px;\n    height: 100px;\n    transform-origin: 0 0;\n}\n.line {\n\tposition: absolute;\n\twidth: 1px;\n    height: 1px;\n    width: var(--zoompx);\n    height: var(--zoompx);\n\tbackground: #4af;\n\ttransform-origin: 0px 50%;\n}\n.line.dashed {\n    box-sizing: border-box;\n    background: transparent;\n}\n.line.dashed.horizontal {\n    border-top: 1px dashed #4af;\n    border-top: var(--zoompx) dashed #4af;\n}\n.line.dashed.vertical {\n    border-left: 1px dashed #4af;\n    border-left: var(--zoompx) dashed #4af;\n}\n.line.dashed:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #4af;\n    font-size: 12px;\n    font-weight: bold;\n}\n.line.dashed.horizontal:before, .line.gap.horizontal:before {\n    left: 50%;\n    transform: translateX(-50%);\n    bottom: 5px;\n}\n.line.dashed.vertical:before, .line.gap.vertical:before {\n    top: 50%;\n    transform: translateY(-50%);\n    left: 5px;\n}\n.line.vertical {\n    transform: translateX(-50%);\n}\n.line.horizontal {\n    transform: translateY(-50%);\n}\n.line.vertical.bold {\n    width: 2px;\n    width: calc(2 * var(--zoompx));\n}\n.line.horizontal.bold {\n    height: 2px;\n    height: calc(2 * var(--zoompx));\n}\n\n.line.gap {\n    background: #f55;\n}\n.line.gap:before {\n    position: absolute;\n    content: attr(data-size);\n    color: #f55;\n    font-size: 12px;\n    font-weight: bold;\n}\n.control.origin {\n\tborder-color: #f55;\n\tbackground: #fff;\n\twidth: 12px;\n\theight: 12px;\n\tmargin-top: -6px;\n    margin-left: -6px;\n    width: calc(12 * var(--zoompx));\n    height: calc(12 * var(--zoompx));\n    margin-top: calc(-6 * var(--zoompx));\n    margin-left: calc(-6 * var(--zoompx));\n\tpointer-events: none;\n}\n"+[0,15,30,45,60,75,90,105,120,135,150,165].map((function(t){return'\n.direction[data-rotation="'+t+'"] {\n\t'+function(t){var n=mn(1,t),r=mn(2,t),e=45*Math.round(t/45)%180,i=135===e?"nwse-resize":45===e?"nesw-resize":90===e?"ew-resize":"ns-resize";return"cursor:"+i+";cursor: url('"+n+"') 16 16, "+i+";cursor: -webkit-image-set(url('"+n+"') 1x, url('"+r+"') 2x) 16 16, "+i+";"}(t)+"\n}\n"})).join("\n")+"\n.group {\n    z-index: -1;\n}\n.area {\n    position: absolute;\n}\n.area-pieces {\n    position: absolute;\n    top: 0;\n    left: 0;\n    display: none;\n}\n.area.avoid, .area.pass {\n    pointer-events: none;\n}\n.area.avoid+.area-pieces {\n    display: block;\n}\n.area-piece {\n    position: absolute;\n}\n\n"+(xn?':global svg *:before {\n\tcontent:"";\n\ttransform-origin: inherit;\n}':"")+"\n",yn=[[0,1,2],[1,0,3],[2,0,3],[3,1,2]],Mn=1e-7,Cn=1e-9,wn=Math.pow(10,10),Dn=-wn,Rn=["n","w","s","e","nw","ne","sw","se"],Pn={n:[0,1],s:[2,3],w:[2,0],e:[1,3],nw:[0],ne:[1],sw:[2],se:[3]},On={n:0,s:180,w:270,e:90,nw:315,ne:45,sw:225,se:135},zn=["isMoveableElement","updateRect","updateTarget","destroy","dragStart","isInside","hitTest","setState","getRect","request","isDragging","getManager"];function Bn(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return x.apply(void 0,vn([En],t))}function Gn(t,n,r){return nt(n,mt(r,n),t,mt(r.map((function(t){return-t})),n))}function Tn(t){return An(cr(t,":before")).map((function(n,r){var e=A(n),i=e.value,a=e.unit;return i*function(t,n,r){return"%"===n?qn(t.ownerSVGElement)[r?"width":"height"]/100:1}(t,a,0===r)}))}function An(t){var n=t.transformOrigin;return n?n.split(" "):["0","0"]}function In(t,n,r){for(var e=document.body,i=!t||r?t:t.parentElement,a=!1,o="relative";i&&i!==e;){n===i&&(a=!0);var s=cr(i),u=s.transform;if("static"!==(o=s.position)||u&&"none"!==u)break;i=i.parentElement,o="relative"}return{isStatic:"static"===o,isEnd:a||!i||i===e,offsetParent:i||e}}function kn(t,n,r,e){var i,a=t.tagName.toLowerCase(),o=t.offsetLeft,s=t.offsetTop;if(e){var u=(n||document.documentElement).getBoundingClientRect();o-=u.left,s-=u.top}var l,c,f=w(o),p=!f;return p||"svg"===a?c=(l=An(r).map((function(t){return parseFloat(t)}))).slice():(c=(l=xn?Tn(t):An(r).map((function(t){return parseFloat(t)}))).slice(),p=!0,"g"===a?(o=0,s=0):(o=(i=function(t,n){if(!t.getBBox)return[0,0];var r=t.getBBox(),e=qn(t.ownerSVGElement),i=r.x-e.x,a=r.y-e.y;return[i,a,n[0]-i,n[1]-a]}(t,l))[0],s=i[1],l[0]=i[2],l[1]=i[3])),{isSVG:f,hasOffset:p,offset:[o||0,s||0],origin:l,targetOrigin:c}}function Yn(t,n,r){void 0===r&&(r=window.getComputedStyle(t));var e=window.getComputedStyle(document.body),i=e.position;if(!n&&(!i||"static"===i))return[0,0];var a=parseInt(e.marginLeft,10),o=parseInt(e.marginTop,10);return"absolute"===r.position&&("auto"===r.top&&"auto"===r.bottom||(o=0),"auto"===r.left&&"auto"===r.right||(a=0)),[a,o]}function Xn(t,n){for(var r,e,i,a,o,s,u=t,l=[],c=!1,f=!1,p=3,d=In(n,n,!0).offsetParent;u&&!c;){var h=cr(u),g=u.tagName.toLowerCase(),v=h.position,m="fixed"===v,b=(s=h.transform,a=s&&"none"!==s?D(s)?s:T(s).value.split(/s*,\s*/g).map((function(t){return parseFloat(t)})):[1,0,0,1,0,0],void 0===(o=void 0)&&(o=6===a.length),o?[a[0],a[1],0,a[2],a[3],0,a[4],a[5],1]:a),x=b.length;if(!f&&16===x){f=!0,p=4;for(var E=l.length,S=0;S<E;++S)l[S]=tt(l[S],3,4)}f&&9===x&&(b=tt(b,3,4));var y=kn(u,n,h,m),M=y.hasOffset,C=y.isSVG,w=y.origin,R=y.targetOrigin,P=y.offset,O=P[0],z=P[1];"svg"===g&&i&&l.push(Nn(u,p),gt(p));var B=In(u,n),G=B.offsetParent,A=B.isEnd,I=B.isStatic;bn&&M&&!C&&I&&("relative"===v||"static"===v)&&(O-=G.offsetLeft,z-=G.offsetTop,c=c||A);var k=0,Y=0;if(M&&d!==G&&(k=G.clientLeft,Y=G.clientTop),M&&G===document.body){var X=Yn(u,!1,h);O+=X[0],z+=X[1]}if(l.push(Gn(b,p,w),mt(M?[O-u.scrollLeft+k,z-u.scrollTop+Y]:[u,w],p)),i||(i=b),r||(r=w),e||(e=R),c||m)break;u=G,c=A}return i||(i=gt(p)),r||(r=[0,0]),e||(e=[0,0]),{offsetContainer:d,matrixes:l,targetMatrix:i,transformOrigin:r,targetOrigin:e,is3d:f}}function Fn(t,n,r,e,i){var a;void 0===r&&(r=n);var o,s,u=0,l=0,c=0,f={};if(i)u=i.width,l=i.height;else if(t){var p=cr(t);u=t.offsetWidth,l=t.offsetHeight,w(u)&&(u=(a=Jn(t,p,!0))[0],l=a[1])}if(t){var d=function(t,n,r,e){void 0===r&&(r=n);var i=Xn(t,n),a=i.matrixes,o=i.is3d,s=i.targetMatrix,u=i.transformOrigin,l=i.targetOrigin,c=Xn(i.offsetContainer,r),f=c.matrixes,p=c.is3d,d=e||p||o,h=d?4:3,g="svg"!==t.tagName.toLowerCase()&&"ownerSVGElement"in t,v=n||document.body,m=s,b=gt(h),x=gt(h),E=gt(h),S=gt(h),y=a.length,M=In(v,v,!0).offsetParent;f.reverse(),a.reverse(),!o&&d&&(m=tt(m,3,4),a.forEach((function(t,n){a[n]=tt(t,3,4)})));!p&&d&&f.forEach((function(t,n){f[n]=tt(t,3,4)}));f.forEach((function(t){x=rt(x,t,h)})),a.forEach((function(t,n){var r;y-2===n&&(E=b.slice()),y-1===n&&(S=b.slice()),D(t[h*(h-1)])&&(r=function(t,n,r,e,i,a){var o,s=Jn(t,void 0,!0),u=s[0],l=s[1],c=n.getBoundingClientRect(),f=[0,0];n===document.body&&(f=Yn(t,!0));var p=t.getBoundingClientRect(),d=p.left-c.left+n.scrollLeft-(n.clientLeft||0)+f[0],h=p.top-c.top+n.scrollTop-(n.clientTop||0)+f[1],g=p.width,v=p.height,m=nt(r,i,a),b=Hn(m,u,l,r),x=b.left,E=b.top,S=b.width,y=b.height,M=Wn(m,e,r),C=it(M,[x,E]),w=[d+C[0]*g/S,h+C[1]*v/y],D=[0,0],R=0;for(;++R<10;){var P=J(i,r);o=it(Wn(P,w,r),Wn(P,M,r)),D[0]=o[0],D[1]=o[1];var O=Hn(nt(r,i,mt(D,r),a),u,l,r),z=O.left-d,B=O.top-h;if(Math.abs(z)<2&&Math.abs(B)<2)break;w[0]-=z,w[1]-=B}return D.map((function(t){return Math.round(t)}))}(t[h*(h-1)],M,h,t[h*(h-1)+1],b,a[n+1]),t[h*(h-1)]=r[0],t[h*(h-1)+1]=r[1]),b=rt(b,t,h)}));var C=!g&&o;m||(m=gt(C?4:3));var w=jn(g&&16===m.length?tt(m,4,3):m,C);return{rootMatrix:x=$(x,h,h),beforeMatrix:E,offsetMatrix:S,allMatrix:b,targetMatrix:m,targetTransform:w,transformOrigin:u,targetOrigin:l,is3d:d}}(t,n,r,e),h=Vn(d.allMatrix,d.transformOrigin,u,l);f=gn(gn({},d),h);var g=Vn(d.allMatrix,[50,50],100,100);o=[g.pos1,g.pos2],c=N((s=g.direction)>0?o[0]:o[1],s>0?o[1]:o[0])}var v=e?4:3;return gn({width:u,height:l,rotation:c,rootMatrix:gt(v),beforeMatrix:gt(v),offsetMatrix:gt(v),allMatrix:gt(v),targetMatrix:gt(v),targetTransform:"",transformOrigin:[0,0],targetOrigin:[0,0],is3d:!!e,left:0,top:0,right:0,bottom:0,origin:[0,0],pos1:[0,0],pos2:[0,0],pos3:[0,0],pos4:[0,0],direction:1},f)}function jn(t,n){return void 0===n&&(n=t.length>9),(n?"matrix3d":"matrix")+"("+at(t,!n).join(",")+")"}function qn(t){var n=t.clientWidth,r=t.clientHeight,e=t.viewBox,i=e&&e.baseVal||{x:0,y:0,width:0,height:0};return{x:i.x,y:i.y,width:i.width||n,height:i.height||r}}function Nn(t,n){var r=t.clientWidth,e=t.clientHeight,i=qn(t),a=i.width,o=i.height,s=r/a,u=e/o,l=t.preserveAspectRatio.baseVal,c=l.align,f=l.meetOrSlice,p=[0,0],d=[s,u],h=[0,0];if(1!==c){var g=(c-2)%3,v=Math.floor((c-2)/3);p[0]=a*g/2,p[1]=o*v/2;var m=2===f?Math.max(u,s):Math.min(s,u);d[0]=m,d[1]=m,h[0]=(r-a)/2*g,h[1]=(e-o)/2*v}var b=vt(d,n);return b[n*(n-1)]=h[0],b[n*(n-1)+1]=h[1],Gn(b,n,p)}function Wn(t,n,r){return ot(t,Q(n,r),r)}function Ln(t,n,r,e){return[[0,0],[n,0],[0,r],[n,r]].map((function(n){return Wn(t,n,e)}))}function _n(t){var n=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]})),e=Math.min.apply(Math,n),i=Math.min.apply(Math,r),a=Math.max.apply(Math,n),o=Math.max.apply(Math,r);return{left:e,top:i,right:a,bottom:o,width:a-e,height:o-i}}function Hn(t,n,r,e){return _n(Ln(t,n,r,e))}function Vn(t,n,r,e){var i=16===t.length?4:3,a=Ln(t,r,e,i),o=a[0],s=o[0],u=o[1],l=a[1],c=l[0],f=l[1],p=a[2],d=p[0],h=p[1],g=a[3],v=g[0],m=g[1],b=Wn(t,n,i),x=b[0],E=b[1],S=Math.min(s,c,d,v),y=Math.min(u,f,h,m),M=Math.max(s,c,d,v);return s=s-S||0,{left:S,top:y,right:M,bottom:Math.max(u,f,h,m),origin:[x=x-S||0,E=E-y||0],pos1:[s,u=u-y||0],pos2:[c=c-S||0,f=f-y||0],pos3:[d=d-S||0,h=h-y||0],pos4:[v=v-S||0,m=m-y||0],direction:W(a)}}function Un(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Zn(t,n){return Un([n[0]-t[0],n[1]-t[1]])}function Kn(t,n,r){void 0===r&&(r=N(t,n));var e=Zn(t,n);return{transform:"translateY(-50%) translate("+t[0]+"px, "+t[1]+"px) rotate("+r+"rad)",width:e+"px"}}function $n(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var e=n.length,i=n.reduce((function(t,n){return t+n[0]}),0)/e,a=n.reduce((function(t,n){return t+n[1]}),0)/e;return{transform:"translate("+i+"px, "+a+"px) rotate("+t+"rad)"}}function Jn(t,n,r,e){void 0===n&&(n=window.getComputedStyle(t)),void 0===e&&(e=r||"border-box"===n.boxSizing);var i=t.offsetWidth,a=t.offsetHeight,o=!w(i);if((r||e)&&o)return[i,a];if(!o&&"svg"!==t.tagName.toLowerCase()){var s=t.getBBox();return[s.width,s.height]}return i=t.clientWidth,a=t.clientHeight,r||e?[i+(parseFloat(n.borderLeftWidth)||0)+(parseFloat(n.borderRightWidth)||0),a+(parseFloat(n.borderTopWidth)||0)+(parseFloat(n.borderBottomWidth)||0)]:[i-(parseFloat(n.paddingLeft)||0)-(parseFloat(n.paddingRight)||0),a-(parseFloat(n.paddingTop)||0)-(parseFloat(n.paddingBottom)||0)]}function Qn(t,n,r,e,i,a){var o=1,s=[0,0],u={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},l={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},c={left:0,right:0,top:0,bottom:0,width:0,height:0,clientLeft:0,clientTop:0,clientWidth:0,clientHeight:0,scrollWidth:0,scrollHeight:0},f=Fn(n,r,i,!1,a);if(n){var p=f.is3d?4:3,d=Vn(f.offsetMatrix,et(f.transformOrigin,function(t,n){void 0===n&&(n=Math.sqrt(t.length));for(var r=[],e=t[n*n-1],i=0;i<n-1;++i)r[i]=t[n*(n-1)+i]/e;return r[n-1]=0,r}(f.targetMatrix,p)),f.width,f.height);o=d.direction,s=et(d.origin,[d.left-f.left,d.top-f.top]),u=tr(n),l=tr(In(e,e,!0).offsetParent||document.body,!0),t&&(c=tr(t))}return gn({targetClientRect:u,containerClientRect:l,moveableClientRect:c,beforeDirection:o,beforeOrigin:s,target:n},f)}function tr(t,n){var r=t.getBoundingClientRect(),e=r.left,i=r.width,a=r.top,o=r.bottom,s={left:e,right:r.right,top:a,bottom:o,width:i,height:r.height};return n&&(s.clientLeft=t.clientLeft,s.clientTop=t.clientTop,s.clientWidth=t.clientWidth,s.clientHeight=t.clientHeight,s.scrollWidth=t.scrollWidth,s.scrollHeight=t.scrollHeight),s}function nr(t){if(t){var n=t.getAttribute("data-direction");if(n){var r=[0,0];return n.indexOf("w")>-1&&(r[0]=-1),n.indexOf("e")>-1&&(r[0]=1),n.indexOf("n")>-1&&(r[1]=-1),n.indexOf("s")>-1&&(r[1]=1),r}}}function rr(t,n){return[et(n,t[0]),et(n,t[1]),et(n,t[2]),et(n,t[3])]}function er(t){var n=t.left,r=t.top;return rr([t.pos1,t.pos2,t.pos3,t.pos4],[n,r])}function ir(t,n){return n?Math.round(t/n)*n:t}function ar(t,n){return t.forEach((function(r,e){t[e]=ir(t[e],n)})),t}function or(t,n){t[n]&&(t[n].unset(),t[n]=null)}function sr(t,n,r){var e=n.datas;e.datas||(e.datas={});var i=gn(gn({},r),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,datas:e.datas});return e.isStartEvent?e.lastEvent=i:e.isStartEvent=!0,i}function ur(t,n,r){var e=n.datas,i="isDrag"in r?r.isDrag:n.isDrag;return e.datas||(e.datas={}),gn(gn({isDrag:i},r),{target:t.state.target,clientX:n.clientX,clientY:n.clientY,inputEvent:n.inputEvent,currentTarget:t,lastEvent:e.lastEvent,isDouble:n.isDouble,datas:e.datas})}function lr(t,n,r,e){return t.triggerEvent(n,r,e)}function cr(t,n){return window.getComputedStyle(t,n)}function fr(t,n,r){var e={},i={};return t.filter((function(t){var a=t.name;if(e[a]||!n.some((function(n){return t[n]})))return!1;if(!r&&t.ableGroup){if(i[t.ableGroup])return!1;i[t.ableGroup]=!0}return e[a]=!0,!0}))}function pr(t,n,r){return t*(n?r:1/r)}function dr(t,n,r){return t*(n?1/r:r)}function hr(t,n){return t===n||null==t&&null==n}function gr(t,n){var r=[],e=[];return t.forEach((function(i,a){var o=n(i,a,t),s=e.indexOf(o),u=r[s]||[];-1===s&&(e.push(o),r.push(u)),u.push(i)})),r}function vr(t){return t.reduce((function(t,n){return t.concat(n)}),[])}function mr(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort((function(t,n){return Math.abs(n)-Math.abs(t)})),t[0]}function br(t,n,r){return ot(J(t,r),Q(n,r),r)}function xr(t,n){var r,e=t.is3d?4:3;return r=br(t.rootMatrix,[n.distX,n.distY],e),n.distX=r[0],n.distY=r[1],n}function Er(t,n,r,e,i){return it(Wn(t,et(r,n),i),e)}function Sr(t,n,r){return r?t/n*100+"%":t+"px"}function yr(t){return Math.abs(t)<=Mn?0:t}function Mr(t){return t.isRequest?("resizable"===t.requestAble||"scalable"===t.requestAble)&&t.parentDirection:_(t.inputEvent.target,Bn("direction"))}function Cr(t){var n={};for(var r in t)n[t[r]]=r;return n}function wr(t){return t?((n=t)&&D(n)&&(R(n)||"length"in n)?[].slice.call(t):[t]).map((function(t){return t?P(t)?t:"current"in t?t.current:t:null})):[];var n}var Dr={name:"pinchable",updateRect:!0,props:{pinchable:Boolean},events:{onPinchStart:"pinchStart",onPinch:"pinch",onPinchEnd:"pinchEnd",onPinchGroupStart:"pinchGroupStart",onPinchGroup:"pinchGroup",onPinchGroupEnd:"pinchGroupEnd"},dragStart:function(){return!0},pinchStart:function(t,n){var r=n.datas,e=n.targets,i=n.angle,a=n.originalDatas,o=t.props,s=o.pinchable,u=o.ables;if(!s)return!1;var l="onPinch"+(e?"Group":"")+"Start",c="drag"+(e?"Group":"")+"ControlStart",f=(!0===s?t.controlAbles:u.filter((function(t){return s.indexOf(t.name)>-1}))).filter((function(t){return t.canPinch&&t[c]})),p=sr(t,n,{});e&&(p.targets=e);var d=lr(t,l,p);r.isPinch=!1!==d,r.ables=f;var h=r.isPinch;return!!h&&(f.forEach((function(r){if(a[r.name]=a[r.name]||{},r[c]){var e=gn(gn({},n),{datas:a[r.name],parentRotate:i,isPinch:!0});r[c](t,e)}})),t.state.snapRenderInfo={request:n.isRequest,direction:[0,0]},h)},pinch:function(t,n){var r=n.datas,e=n.scale,i=n.distance,a=n.originalDatas,o=n.inputEvent,s=n.targets,u=n.angle;if(r.isPinch){var l=i*(1-1/e),c=sr(t,n,{});s&&(c.targets=s),lr(t,"onPinch"+(s?"Group":""),c);var f=r.ables,p="drag"+(s?"Group":"")+"Control";return f.forEach((function(r){r[p]&&r[p](t,gn(gn({},n),{datas:a[r.name],inputEvent:o,parentDistance:l,parentRotate:u,isPinch:!0}))})),c}},pinchEnd:function(t,n){var r=n.datas,e=n.isPinch,i=n.inputEvent,a=n.targets,o=n.originalDatas;if(r.isPinch){var s="onPinch"+(a?"Group":"")+"End",u=ur(t,n,{isDrag:e});a&&(u.targets=a),lr(t,s,u);var l=r.ables,c="drag"+(a?"Group":"")+"ControlEnd";return l.forEach((function(r){r[c]&&r[c](t,gn(gn({},n),{isDrag:e,datas:o[r.name],inputEvent:i,isPinch:!0}))})),e}},pinchGroupStart:function(t,n){return this.pinchStart(t,gn(gn({},n),{targets:t.props.targets}))},pinchGroup:function(t,n){return this.pinch(t,gn(gn({},n),{targets:t.props.targets}))},pinchGroupEnd:function(t,n){return this.pinchEnd(t,gn(gn({},n),{targets:t.props.targets}))}};function Rr(t,n,r,e,i){var a=n.gesto.move(r,t.inputEvent),o=a.originalDatas||a.datas,s=o.draggable||(o.draggable={});return gn(gn({},i?xr(n,a):a),{isDrag:!0,isPinch:!!e,parentEvent:!0,datas:s,originalDatas:t.originalDatas})}var Pr=function(){function t(){this.prevX=0,this.prevY=0,this.startX=0,this.startY=0,this.isDrag=!1,this.isFlag=!1,this.datas={draggable:{}}}var n=t.prototype;return n.dragStart=function(t,n){this.isDrag=!1,this.isFlag=!1;var r=n.originalDatas;return this.datas=r,r.draggable||(r.draggable={}),gn(gn({},this.move(t,n.inputEvent)),{type:"dragstart"})},n.drag=function(t,n){return this.move([t[0]-this.prevX,t[1]-this.prevY],n)},n.move=function(t,n){var r,e;return this.isFlag?(r=this.prevX+t[0],e=this.prevY+t[1],this.isDrag=!0):(this.prevX=t[0],this.prevY=t[1],this.startX=t[0],this.startY=t[1],r=t[0],e=t[1],this.isFlag=!0),this.prevX=r,this.prevY=e,{type:"drag",clientX:r,clientY:e,inputEvent:n,isDrag:this.isDrag,distX:r-this.startX,distY:e-this.startY,deltaX:t[0],deltaY:t[1],datas:this.datas.draggable,originalDatas:this.datas,parentEvent:!0,parentGesto:this}},t}();function Or(t,n,r){var e=r.originalDatas;e.groupable=e.groupable||{};var i=e.groupable;i.childDatas=i.childDatas||[];var a=i.childDatas,o=r.inputEvent,s=r.isPinch,u=r.clientX,l=r.clientY,c=r.distX,f=r.distY;return t.moveables.map((function(t,r){return a[r]=a[r]||{},a[r][n]=a[r][n]||{},{inputEvent:o,datas:a[r][n],originalDatas:a[r],isPinch:s,clientX:u,clientY:l,distX:c,distY:f}}))}function zr(t,n,r,e,i,a){var o=!!r.match(/Start$/g),s=!!r.match(/End$/g),u=i.isPinch,l=i.datas,c=Or(t,n.name,i),f=t.moveables,p=c.map((function(t,i){var c=f[i],p=t;o?p=(new Pr).dragStart(e,t):(c.state.gesto||(c.state.gesto=l.childGestos[i]),p=Rr(t,c.state,e,u,a));var d=n[r](c,gn(gn({},p),{parentFlag:!0}));return s&&(c.state.gesto=null),d}));return o&&(l.childGestos=f.map((function(t){return t.state.gesto}))),p}function Br(t,n,r,e,i,a){void 0===i&&(i=function(t,n){return n});var o=!!r.match(/End$/g),s=Or(t,n.name,e),u=t.moveables;return s.map((function(t,e){var s,l=u[e];s=i(l,t);var c=n[r](l,gn(gn({},s),{parentFlag:!0}));return c&&a&&a(l,t,c,e),o&&(l.state.gesto=null),c}))}function Gr(t,n){var r=n.clientX,e=n.clientY,i=n.datas,a=t.state,o=a.moveableClientRect,s=a.rootMatrix,u=a.is3d,l=a.pos1,c=it(br(s,[r-o.left,e-o.top],u?4:3),l),f=Fr({datas:i,distX:c[0],distY:c[1]});return[f[0],f[1]]}function Tr(t,n){var r=n.datas,e=t.state,i=e.allMatrix,a=e.beforeMatrix,o=e.is3d,s=e.left,u=e.top,l=e.origin,c=e.offsetMatrix,f=e.targetMatrix,p=e.transformOrigin,d=o?4:3;r.is3d=o,r.matrix=i,r.targetMatrix=f,r.beforeMatrix=a,r.offsetMatrix=c,r.transformOrigin=p,r.inverseMatrix=J(i,d),r.inverseBeforeMatrix=J(a,d),r.absoluteOrigin=Q(et([s,u],l),d),r.startDragBeforeDist=ot(r.inverseBeforeMatrix,r.absoluteOrigin,d),r.startDragDist=ot(r.inverseMatrix,r.absoluteOrigin,d)}function Ar(t,n){var r=t.datas,e=t.originalDatas.beforeRenderable,i=r.transformIndex,a=e.nextTransforms,o=e.nextTransformAppendedIndexes,s=-1===i?a.length:i+o.filter((function(t){return t<i})).length,u=function(t,n){var r=t.slice(0,n<0?void 0:n),e=t[n]||"",i=n<0?[]:t.slice(n),a=St(r),o=St([e]),s=St(i),u=Et(a),l=Et(s),c=rt(u,l,4);return{transforms:t,beforeFunctionMatrix:u,targetFunctionMatrix:Et(o),afterFunctionMatrix:l,allFunctionMatrix:c,beforeFunctions:a,targetFunction:o[0],afterFunctions:s,beforeFunctionTexts:r,targetFunctionText:e,afterFunctionTexts:i}}(a,s),l=u.targetFunction,c="rotate"===n?"rotateZ":n;r.beforeFunctionTexts=u.beforeFunctionTexts,r.afterFunctionTexts=u.afterFunctionTexts,r.beforeTransform=u.beforeFunctionMatrix,r.targetTansform=u.targetFunctionMatrix,r.afterTransform=u.afterFunctionMatrix,r.targetAllTransform=u.allFunctionMatrix,l.functionName===c?(r.afterFunctionTexts.splice(0,1),r.isAppendTransform=!1):(r.isAppendTransform=!0,e.nextTransformAppendedIndexes=vn(o,[s]))}function Ir(t,n,r){return t.beforeFunctionTexts.join(" ")+" "+(t.isAppendTransform?r:n)+" "+t.afterFunctionTexts.join(" ")}function kr(t){var n=t.datas,r=Xr({datas:n,distX:t.distX,distY:t.distY});return ot(Yr(n,function(t,n){for(var r=gt(n),e=0;e<n-1;++e)r[n*(n-1)+e]=t[e]||0;return r}([r[0],r[1]],4)),Q([0,0,0],4),4)}function Yr(t,n,r){var e=t.beforeTransform,i=t.afterTransform,a=t.targetAllTransform,o=r?rt(a,n,4):rt(n,a,4),s=rt(J(e,4),o,4);return rt(s,J(i,4),4)}function Xr(t){var n=t.datas,r=t.distX,e=t.distY,i=n.inverseBeforeMatrix,a=n.is3d,o=n.startDragBeforeDist,s=a?4:3;return it(ot(i,et(n.absoluteOrigin,[r,e]),s),o)}function Fr(t,n){var r=t.datas,e=t.distX,i=t.distY,a=r.inverseBeforeMatrix,o=r.inverseMatrix,s=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist,c=s?4:3;return it(ot(n?a:o,et(r.absoluteOrigin,[e,i]),c),n?u:l)}function jr(t){var n=[];return t[1]>=0&&(t[0]>=0&&n.push(3),t[0]<=0&&n.push(2)),t[1]<=0&&(t[0]>=0&&n.push(1),t[0]<=0&&n.push(0)),n}function qr(t,n){return jr(n).map((function(n){return t[n]}))}function Nr(t,n){var r=qr(t,n);return[q(r.map((function(t){return t[0]}))),q(r.map((function(t){return t[1]})))]}function Wr(t,n){return Nr(t,n.map((function(t){return-t})))}function Lr(t,n,r,e){return rt(t,Gn(n,e,r),e)}function _r(t){var n=t.originalDatas.beforeRenderable;return{setTransform:function(r,e){void 0===e&&(e=-1),n.startTransforms=R(r)?r:B(r),Vr(t,e)},setTransformIndex:function(n){Vr(t,n)}}}function Hr(t){Vr(t,-1)}function Vr(t,n){var r=t.originalDatas.beforeRenderable,e=t.datas;if(e.transformIndex=n,-1!==n){var i=r.startTransforms[n];if(i){var a=St([i]);e.startValue=a[0].functionValue}}}function Ur(t,n){t.originalDatas.beforeRenderable.nextTransforms=B(n)}function Zr(t,n,r,e,i){return Ur(i,n),{transform:n,drag:Je.drag(t,Rr(i,t.state,r,e,!1))}}function Kr(t,n,r,e,i){var a=t.state,o=a.left,s=a.top,u=t.props.groupable,l=u?o:0,c=u?s:0,f=it(r,Jr(t,e,function(t,n,r){var e=t.transformOrigin,i=t.offsetMatrix,a=t.is3d,o=n.beforeTransform,s=n.afterTransform,u=a?4:3;return Lr(i,tt(rt(rt(o,xt([r]),4),s,4),4,u),e,u)}(t.state,i,n)));return it(f,[l,c])}function $r(t){var n=t.state,r=n.width,e=n.height,i=n.transformOrigin;return[i[0]/(r/2)-1,i[1]/(e/2)-1]}function Jr(t,n,r){void 0===r&&(r=t.state.allMatrix);var e=t.state,i=e.width,a=e.height,o=e.is3d?4:3;return Wn(r,[i/2*(1+n[0]),a/2*(1+n[1])],o)}function Qr(t,n,r,e,i,a){var o=t.props.groupable,s=t.state,u=s.transformOrigin,l=s.targetMatrix,c=s.offsetMatrix,f=s.is3d,p=s.width,d=s.height,h=s.left,g=s.top,v=f?4:3,m=o?h:0,b=o?g:0;return it(function(t,n,r,e,i,a){var o=Wr(Ln(n,r,e,i),a);return[t[0]-o[0],t[1]-o[1]]}(i,Lr(c,l,function(t,n,r,e,i,a){return void 0===e&&(e=n),void 0===i&&(i=r),void 0===a&&(a=[0,0]),t?t.map((function(t,o){var s=A(t),u=s.value,l=s.unit,c=o?i:e,f=o?r:n;return"%"===t||isNaN(u)?f*(c?a[o]/c:0):"%"!==l?u:f*u/100})):a}(a,n,r,p,d,u),v),n,r,v,e),[m,b])}function te(t,n){if(!n[0]&&!n[1])return[0,0];var r=[-1,-1];return[n[0]?n[0]:-1*r[0],n[1]?n[1]:-1*r[1]]}function ne(t,n){return Wr(er(t.state),n)}function re(t,n,r,e,i,a){var o=i[0],s=i[1],u=a[0],l=a[1],c=[],f=e?0:1,p="vertical"===n?"horizontal":"vertical",d=gr(t.filter((function(t){return t.type===n})),(function(t){return t.element})).map((function(t){return t[0]})).filter((function(t){var n=t.pos,r=t.sizes;return n[f]<=l&&u<=n[f]+r[f]}));return d.forEach((function(t){var n=t.pos[e],i=n+t.sizes[e];d.forEach((function(t){var a=t.pos,u=t.sizes,l=t.element,f=a[e],h=f+u[e],g=0,v=0,m=!0;if(i<=f)o<(g=h-(v=i-f))-r&&(m=!1);else{if(!(h<=n))return;s>(g=f-(v=n-h))+r&&(m=!1)}if(m&&c.push({pos:"vertical"===p?[g,a[1]]:[a[0],g],element:l,sizes:u,size:0,type:p,gap:v,gapGuidelines:d}),i<=o&&s<=f){var b=(f+i-(s-o))/2;ir(o-(b-r),.1)>=0&&c.push({pos:"vertical"===p?[b,a[1]]:[a[0],b],element:l,sizes:u,size:0,type:p,gap:i-o,gapGuidelines:d})}}))})),c}function ee(t,n,r,e,i){return e&&e.forEach((function(r){t.push({type:"horizontal",pos:[0,ir(r,.1)],size:n})})),i&&i.forEach((function(n){t.push({type:"vertical",pos:[ir(n,.1),0],size:r})})),t}function ie(t,n,r,e,i){var a=function(t){var n=t.state,r=n.guidelines,e=n.containerClientRect,i=e.scrollHeight,a=e.scrollWidth,o=t.props,s=o.snapHorizontal,u=void 0===s||s,l=o.snapVertical,c=void 0===l||l,f=o.snapGap,p=void 0===f||f,d=o.verticalGuidelines,h=o.horizontalGuidelines,g=o.snapThreshold,v=void 0===g?5:g,m=vn(r);if(p){var b=_n(er(t.state)),x=b.top,E=b.left,S=b.bottom,y=b.right,M=r.filter((function(t){return t.element}));m.push.apply(m,vn(re(M,"horizontal",v,0,[E,y],[x,S]),re(M,"vertical",v,1,[x,S],[E,y])))}return ee(m,a,i,u&&h,c&&d),m}(t),o=t.props,s=o.snapElement,u=void 0===s||s;return ae(a,n,r,{snapThreshold:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=t.length-1,e=0;e<r;++e){var i=t[e];if(!w(i))return i}return t[r]}(i,o.snapThreshold,5),snapCenter:e,snapElement:u})}function ae(t,n,r,e){return{vertical:ue(t,"vertical",n,e),horizontal:ue(t,"horizontal",r,e)}}function oe(t,n,r,e){var i=t.props.snapCenter&&r,a=["left","right"],o=["top","bottom"];return i&&(a.push("center"),o.push("middle")),a=a.filter((function(t){return t in n})),o=o.filter((function(t){return t in n})),ie(t,a.map((function(t){return n[t]})),o.map((function(t){return n[t]})),i,e)}function se(t){var n=t.isSnap;if(!n)return{isSnap:!1,offset:0,dist:-1,pos:0,guideline:null};var r=t.posInfos[0],e=r.guidelineInfos[0],i=e.offset,a=e.dist,o=e.guideline;return{isSnap:n,offset:i,dist:a,pos:r.pos,guideline:o}}function ue(t,n,r,e){var i=void 0===e?{}:e,a=i.snapThreshold,o=void 0===a?5:a,s=i.snapElement,u=i.snapCenter;if(!t||!t.length)return{isSnap:!1,index:-1,posInfos:[]};var l="vertical"===n?0:1,c=r.map((function(r,e){var i=t.map((function(t){var n=t.pos,e=r-n[l];return{offset:e,dist:Math.abs(e),guideline:t}})).filter((function(t){var r=t.guideline,e=t.dist,i=r.type,a=r.center,l=r.element;return!(!s&&l||!u&&a||i!==n||e>o)})).sort((function(t,n){return t.dist-n.dist}));return{pos:r,index:e,guidelineInfos:i}})).filter((function(t){return t.guidelineInfos.length>0})).sort((function(t,n){return t.guidelineInfos[0].dist-n.guidelineInfos[0].dist})),f=c.length>0;return{isSnap:f,index:f?c[0].index:-1,posInfos:c}}function le(t,n){var r=Math.abs(t.offset),e=Math.abs(n.offset);return t.isBound&&n.isBound?e-r:t.isBound?-1:n.isBound?1:t.isSnap&&n.isSnap?e-r:t.isSnap?-1:n.isSnap||r<Mn?1:e<Mn?-1:r-e}function ce(t,n){return t.slice().sort((function(t,r){var e=t.sign[n],i=r.sign[n],a=t.offset[n],o=r.offset[n];return e?i?le({isBound:t.isBound,isSnap:t.isSnap,offset:a},{isBound:r.isBound,isSnap:r.isSnap,offset:o}):-1:1}))[0]}function fe(t,n){var r=q([n[0][0],n[1][0]]),e=q([n[0][1],n[1][1]]);return{vertical:r<=t[0],horizontal:e<=t[1]}}function pe(t,n){var r,e,i=n[0],a=n[1],o=a[0]-i[0],s=a[1]-i[1];if(Math.abs(o)<Mn&&(o=0),Math.abs(s)<Mn&&(s=0),o)if(s){r=s/o*(t[0]-i[0])+i[1],e=t[1]}else r=i[1],e=t[1];else r=i[0],e=t[0];return r-e}function de(t,n,r){void 0===r&&(r=Mn);var e=pe(t[0],n)<=0;return t.slice(1).every((function(t){var i=pe(t,n);return i<=0===e||Math.abs(i)<=r}))}function he(t,n,r,e,i){return void 0===i&&(i=0),e&&n-i<=t||!e&&t<=r+i?{isBound:!0,offset:e?n-t:r-t}:{isBound:!1,offset:0}}function ge(t,n,r,e,i){var a=t[0],o=t[1],s=n[0],u=n[1],l=yr(o[1]-a[1]),c=yr(o[0]-a[0]),f=yr(u[1]-s[1]);if(!yr(u[0]-s[0])){if(i&&!l)return{isBound:!1,offset:0};if(c)return he(l/c*(s[0]-a[0])+a[1],s[1],u[1],r,e);var p=s[0]-a[0];return{isBound:d=Math.abs(p)<=(e||0),offset:d?p:0}}if(!f){if(i&&!c)return{isBound:!1,offset:0};if(l)return he((s[1]-a[1])/(l/c)+a[0],s[0],u[0],r,e);var d;p=s[1]-a[1];return{isBound:d=Math.abs(p)<=(e||0),offset:d?p:0}}return{isBound:!1,offset:0}}function ve(t,n,r,e){return n.map((function(n){var i=n[0],a=n[1],o=n[2],s=function(t,n,r){var e=t.props.innerBounds;if(!e)return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var i=e.left,a=e.top,o=e.width,s=e.height,u=[[i,a],[i,a+s]],l=[[i,a],[i+o,a]],c=[[i+o,a],[i+o,a+s]],f=[[i,a+s],[i+o,a+s]],p=fe(r,n),d=p.horizontal,h=p.vertical;if(de([r,[i,a],[i+o,a],[i,a+s],[i+o,a+s]],n))return{isAllBound:!1,isBound:!1,isVerticalBound:!1,isHorizontalBound:!1,offset:[0,0]};var g=ge(n,l,h),v=ge(n,f,h),m=ge(n,u,d),b=ge(n,c,d),x=g.isBound&&v.isBound,E=g.isBound||v.isBound,S=m.isBound&&b.isBound,y=m.isBound||b.isBound,M=mr(g.offset,v.offset),C=mr(m.offset,b.offset),w=[0,0],D=!1,R=!1;return Math.abs(C)<Math.abs(M)?(w=[M,0],D=E,R=x):(w=[0,C],D=y,R=S),{isAllBound:R,isVerticalBound:E,isHorizontalBound:y,isBound:D,offset:w}}(t,[a,o],r),u=s.isBound,l=s.offset,c=s.isVerticalBound,f=s.isHorizontalBound,p=Fr({datas:e,distX:l[0],distY:l[1]}).map((function(t,n){return t*(i[n]?2/i[n]:0)}));return{sign:i,isBound:u,isVerticalBound:c,isHorizontalBound:f,isSnap:!1,offset:p}}))}function me(t,n,r){var e,i=ve(t,be(n,[0,0],!1).map((function(t){var n=t[0],r=t[1],e=t[2];return[n.map((function(t){return 2*Math.abs(t)})),r,e]})),Nr(n,[0,0]),r),a=ce(i,0),o=ce(i,1),s=0,u=0,l=a.isVerticalBound||o.isVerticalBound,c=a.isHorizontalBound||o.isHorizontalBound;return(l||c)&&(s=(e=function(t,n){var r=t.datas,e=t.distX,i=t.distY,a=r.beforeMatrix,o=r.matrix,s=r.is3d,u=r.startDragBeforeDist,l=r.startDragDist,c=r.absoluteOrigin,f=s?4:3;return it(ot(n?a:o,et(n?u:l,[e,i]),f),c)}({datas:r,distX:-a.offset[0],distY:-o.offset[1]}))[0],u=e[1]),{vertical:{isBound:l,offset:s},horizontal:{isBound:c,offset:u}}}function be(t,n,r){return function(t,n){var r=[],e=t[0],i=t[1];return e&&i?r.push([[0,2*i],t,[-e,i]],[[2*e,0],t,[e,-i]]):e?(r.push([[2*e,0],[e,1],[e,-1]]),n&&r.push([[0,-1],[e,-1],[-e,-1]],[[0,1],[e,1],[-e,1]])):i?(r.push([[0,2*i],[1,i],[-1,i]]),n&&r.push([[-1,0],[-1,i],[-1,-i]],[[1,0],[1,i],[1,-i]])):r.push([[-1,0],[-1,-1],[-1,1]],[[1,0],[1,-1],[1,1]],[[0,-1],[-1,-1],[1,-1]],[[0,1],[-1,1],[1,1]]),r}(n,r).map((function(n){var r=n[0],e=n[1],i=n[2];return[r,Nr(t,e),Nr(t,i)]}))}function xe(t,n,r,e){var i=e?t.map((function(t){return ft(t,e)})):t,a=vn([r],n);return[[i[0],i[1]],[i[1],i[3]],[i[3],i[2]],[i[2],i[0]]].some((function(t,n){return!de(a,t)}))}function Ee(t,n,r,e,i){var a=t.props.innerBounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,u=a.top,l=a.width,c=a.height,f=s-e[0],p=s+l-e[0],d=u-e[1],h=u+c-e[1],g=[[f,d],[p,d],[f,h],[p,h]],v=Nr(r,[0,0]);if(!xe(r,g,v,0))return[];var m=[],b=g.map((function(t){return[Un(t),N([0,0],t)]}));return[[r[0],r[1]],[r[1],r[3]],[r[3],r[2]],[r[2],r[0]]].forEach((function(t){var r=N([0,0],function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return[n[0],0];if(!i)return[0,n[1]];var a=i/e,o=-a*n[0]+n[1];return[-o/(a+1/a),o/(a*a+1)]}(t)),e=function(t){var n=t[0],r=t[1],e=r[0]-n[0],i=r[1]-n[1];if(!e)return Math.abs(n[0]);if(!i)return Math.abs(n[1]);var a=i/e;return Math.abs((-a*n[0]+n[1])/Math.sqrt(Math.pow(a,2)+1))}(t);m.push.apply(m,b.filter((function(t){var n=t[0];return n&&e<=n})).map((function(t){var n=t[0],i=t[1],a=Math.acos(n?e/n:0);return[o+(i+a)-r,o+(i-a)-r]})).reduce((function(t,n){return t.push.apply(t,n),t}),[]).filter((function(t){return!xe(n,g,v,t)})).map((function(t){return ir(180*t/Math.PI,Mn)})))})),m}function Se(t,n,r){var e=t||{},i=e.left,a=void 0===i?-1/0:i,o=e.top,s=void 0===o?-1/0:o,u=e.right,l=void 0===u?1/0:u,c=e.bottom,f={left:a,top:s,right:l,bottom:void 0===c?1/0:c};return{vertical:ye(f,n,!0),horizontal:ye(f,r,!1)}}function ye(t,n,r){var e=t[r?"left":"top"],i=t[r?"right":"bottom"],a=Math.min.apply(Math,n),o=Math.max.apply(Math,n),s=[];return e+1>a&&s.push({isBound:!0,offset:a-e,pos:e}),i-1<o&&s.push({isBound:!0,offset:o-i,pos:i}),s.length||s.push({isBound:!1,offset:0,pos:0}),s.sort((function(t,n){return Math.abs(n.offset)-Math.abs(t.offset)}))}function Me(t,n,r){return(r?t.map((function(t){return ft(t,r)})):t).some((function(t){return t[0]<n.left&&Math.abs(t[0]-n.left)>.1||t[0]>n.right&&Math.abs(t[0]-n.right)>.1||t[1]<n.top&&Math.abs(t[1]-n.top)>.1||t[1]>n.bottom&&Math.abs(t[1]-n.bottom)>.1}))}function Ce(t,n,r,e,i){var a=t.props.bounds,o=i*Math.PI/180;if(!a)return[];var s=a.left,u=void 0===s?-1/0:s,l=a.top,c=void 0===l?-1/0:l,f=a.right,p=void 0===f?1/0:f,d=a.bottom,h=void 0===d?1/0:d,g=u-e[0],v=p-e[0],m=c-e[1],b=h-e[1],x={left:g,top:m,right:v,bottom:b};if(!Me(r,x,0))return[];var E=[];return[[g,0],[v,0],[m,1],[b,1]].forEach((function(t,e){var i=t[0],a=t[1];r.forEach((function(t){var r=N([0,0],t);E.push.apply(E,function(t,n,r){var e=Un(t),i=Math.sqrt(e*e-n*n)||0;return[i,-i].sort((function(n,e){return Math.abs(n-t[r?0:1])-Math.abs(e-t[r?0:1])})).map((function(t){return N([0,0],r?[t,n]:[n,t])}))}(t,i,a).map((function(t){return o+t-r})).filter((function(t){return!Me(n,x,t)})).map((function(t){return ir(180*t/Math.PI,Mn)})))}))})),E}function we(t,n,r){var e=Wn(t,[n.clientLeft,n.clientTop],r);return[n.left+e[0],n.top+e[1]]}function De(t){var n=t.state;if(!n.guidelines||!n.guidelines.length){var r=t.props,e=r.horizontalGuidelines,i=void 0===e?[]:e,a=r.verticalGuidelines,o=void 0===a?[]:a,s=r.elementGuidelines,u=void 0===s?[]:s,l=r.bounds,c=r.innerBounds,f=r.snapCenter;if(c||l||i.length||o.length||u.length){var p=n.containerClientRect,d=n.targetClientRect,h=d.top,g=d.left,v=n.rootMatrix,m=n.is3d?4:3,b=we(v,p,m),x=b[0],E=b[1],S=Ct(er(n)),y=it([S.minX,S.minY],br(v,[g-x,h-E],m)).map((function(t){return n=t,Math.round(n%1===-.5?n-1:n);var n})),M=y[0],C=y[1],w=[];u.forEach((function(t){var n=t.getBoundingClientRect(),r=n.left-x,e=n.top-E,i=e+n.height,a=r+n.width,o=br(v,[r,e],m),s=o[0],u=o[1],l=br(v,[a,i],m),c=l[0],p=l[1],d=c-s,h=p-u,g=[d,h];w.push({type:"vertical",element:t,pos:[ir(s+M,.1),u],size:h,sizes:g}),w.push({type:"vertical",element:t,pos:[ir(c+M,.1),u],size:h,sizes:g}),w.push({type:"horizontal",element:t,pos:[s,ir(u+C,.1)],size:d,sizes:g}),w.push({type:"horizontal",element:t,pos:[s,ir(p+C,.1)],size:d,sizes:g}),f&&(w.push({type:"vertical",element:t,pos:[ir((s+c)/2+M,.1),u],size:h,sizes:g,center:!0}),w.push({type:"horizontal",element:t,pos:[s,ir((u+p)/2+C,.1)],size:d,sizes:g,center:!0}))})),n.guidelines=w,n.enableSnap=!0}}}function Re(t,n){var r=t.props,e=r.snappable,i=r.bounds,a=r.innerBounds,o=r.verticalGuidelines,s=r.horizontalGuidelines,u=t.state,l=u.guidelines,c=u.enableSnap;return!(!e||!c||n&&!0!==e&&e.indexOf(n)<0)&&!!(i||a||l&&l.length||o&&o.length||s&&s.length)}function Pe(t,n,r,e,i){var a=function(t,n,r,e){var i=n[0]-t[0],a=n[1]-t[1];Math.abs(i)<Mn&&(i=0);Math.abs(a)<Mn&&(a=0);if(!i)return e?[0,0]:[0,r];if(!a)return e?[r,0]:[0,0];var o=a/i,s=t[1]-o*t[0];return e?[r,o*(n[0]+r)+s-n[1]]:[(n[1]+r-s)/o-n[0],r]}(t,n,r,e);if(!a)return[0,0];var o=Fr({datas:i,distX:a[0],distY:a[1]});return[o[0],o[1]]}function Oe(t,n,r,e,i,a){var o=Ln(t,n,r,a?4:3);return rr(o,it(e,Wr(o,i)))}function ze(t,n){return t.isBound?t.offset:n.isSnap?n.offset:0}function Be(t,n){return t.isBound?t.offset:n.isSnap?se(n).offset:0}function Ge(t,n,r,e){var i=function(t,n,r){var e=t.props.bounds||{},i=e.left,a=void 0===i?-1/0:i,o=e.top,s=void 0===o?-1/0:o,u=e.right,l=void 0===u?1/0:u,c=e.bottom,f=void 0===c?1/0:c,p=r[0],d=r[1],h=it(r,n),g=h[0],v=h[1];Math.abs(g)<Mn&&(g=0),Math.abs(v)<Mn&&(v=0);var m=v>0,b=g>0,x={isBound:!1,offset:0,pos:0},E={isBound:!1,offset:0,pos:0};if(0===g&&0===v)return{vertical:x,horizontal:E};if(0===g)m?f<d&&(E.pos=f,E.offset=d-f):s>d&&(E.pos=s,E.offset=d-s);else if(0===v)b?l<p&&(x.pos=l,x.offset=p-l):a>p&&(x.pos=a,x.offset=p-a);else{var S=v/g,y=r[1]-S*p,M=0,C=0,w=!1;b&&l<=p?(M=S*l+y,C=l,w=!0):!b&&p<=a&&(M=S*a+y,C=a,w=!0),w&&(M<s||M>f)&&(w=!1),w||(m&&f<=d?(C=((M=f)-y)/S,w=!0):!m&&d<=s&&(C=((M=s)-y)/S,w=!0)),w&&(x.isBound=!0,x.pos=C,x.offset=p-C,E.isBound=!0,E.pos=M,E.offset=d-M)}return{vertical:x,horizontal:E}}(t,n,r),a=i.horizontal,o=i.vertical,s=e?{horizontal:{isSnap:!1},vertical:{isSnap:!1}}:function(t,n,r){var e=r[0],i=r[1],a=n[0],o=n[1],s=it(r,n),u=s[0],l=s[1],c=l>0,f=u>0;u=yr(u),l=yr(l);var p={isSnap:!1,offset:0,pos:0},d={isSnap:!1,offset:0,pos:0};if(0===u&&0===l)return{vertical:p,horizontal:d};var h=ie(t,u?[e]:[],l?[i]:[]),g=h.vertical,v=h.horizontal;g.posInfos.filter((function(t){var n=t.pos;return f?n>=a:n<=a})),v.posInfos.filter((function(t){var n=t.pos;return c?n>=o:n<=o})),g.isSnap=g.posInfos.length>0,v.isSnap=v.posInfos.length>0;var m=se(g),b=m.isSnap,x=m.guideline,E=se(v),S=E.isSnap,y=E.guideline,M=S?y.pos[1]:0,C=b?x.pos[0]:0;if(0===u)S&&(d.isSnap=!0,d.pos=y.pos[1],d.offset=i-d.pos);else if(0===l)b&&(p.isSnap=!0,p.pos=C,p.offset=e-C);else{var w=l/u,D=r[1]-w*e,R=0,P=0,O=!1;b?(R=w*(P=C)+D,O=!0):S&&(P=((R=M)-D)/w,O=!0),O&&(p.isSnap=!0,p.pos=P,p.offset=e-P,d.isSnap=!0,d.pos=R,d.offset=i-R)}return{vertical:p,horizontal:d}}(t,n,r),u=s.horizontal,l=s.vertical,c=ze(a,u),f=ze(o,l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:a.isBound,isSnap:u.isSnap,offset:c,dist:p},vertical:{isBound:o.isBound,isSnap:l.isSnap,offset:f,dist:d}}}function Te(t,n,r,e){void 0===e&&(e=r);var i=Se(t.props.bounds,e.map((function(t){return t[0]})),e.map((function(t){return t[1]}))),a=i.horizontal,o=i.vertical,s=n?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ie(t,r.map((function(t){return t[0]})),r.map((function(t){return t[1]}))),u=s.horizontal,l=s.vertical,c=Be(a[0],u),f=Be(o[0],l),p=Math.abs(c),d=Math.abs(f);return{horizontal:{isBound:a[0].isBound,isSnap:u.isSnap,snapIndex:u.index,offset:c,dist:p,bounds:a,snap:u},vertical:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l}}}function Ae(t,n,r,e,i){void 0===i&&(i={});var a=Se(n,r,e),o=a.horizontal,s=a.vertical,u=i.isRequest?{horizontal:{isSnap:!1,index:-1},vertical:{isSnap:!1,index:-1}}:ae(t,r,e,i),l=u.horizontal,c=u.vertical,f=Be(o[0],l),p=Be(s[0],c),d=Math.abs(f),h=Math.abs(p);return{horizontal:{isBound:o[0].isBound,isSnap:l.isSnap,snapIndex:l.index,offset:f,dist:d,bounds:o,snap:l},vertical:{isBound:s[0].isBound,isSnap:c.isSnap,snapIndex:c.index,offset:p,dist:h,bounds:s,snap:c}}}function Ie(t){return t?t/Math.abs(t):0}function ke(t,n,r,e,i,a){return r.map((function(r){var o=r[0],s=r[1],u=Nr(n,o),l=Nr(n,s),c=e?Ge(t,u,l,i):Te(t,i,[l]),f=c.horizontal,p=f.offset,d=f.isBound,h=f.isSnap,g=c.vertical,v=g.offset,m=g.isBound,b=g.isSnap,x=it(s,o);if(!v&&!p)return{isBound:m||d,isSnap:b||h,sign:x,offset:[0,0]};var E=function(t,n,r,e){var i=N(t,n)/Math.PI*180,a=r.vertical,o=a.isBound,s=a.isSnap,u=a.dist,l=r.horizontal,c=l.isBound,f=l.isSnap,p=i%180,d=p<3||p>177,h=p>87&&p<93;return l.dist<u&&(o||s&&!h&&(!e||!d))?"vertical":!c&&(!f||d||e&&h)?"":"horizontal"}(u,l,c,e);if(!E)return{sign:x,isBound:!1,isSnap:!1,offset:[0,0]};var S="vertical"===E,y=Pe(u,l,-(S?v:p),S,a).map((function(t,n){return t*(x[n]?2/x[n]:0)}));return{sign:x,isBound:S?m:d,isSnap:S?b:h,offset:y}}))}function Ye(t,n,r,e,i,a){var o=function(t,n){var r=[],e=[-t[0],-t[1]];return t[0]&&t[1]?(r.push([e,[t[0],-t[1]]],[e,[-t[0],t[1]]]),n&&r.push([e,t])):t[0]?n?r.push([e,[e[0],-1]],[e,[e[0],1]],[e,[t[0],-1]],[e,t],[e,[t[0],1]]):r.push([[e[0],-1],[t[0],-1]],[[e[0],0],[t[0],0]],[[e[0],1],[t[0],1]]):t[1]?n?r.push([e,[-1,e[1]]],[e,[1,e[1]]],[e,[-1,t[1]]],[e,[1,t[1]]],[e,t]):r.push([[-1,e[1]],[-1,t[1]]],[[0,e[1]],[0,t[1]]],[[1,e[1]],[1,t[1]]]):r.push([e,[1,0]],[e,[-1,0]],[e,[0,-1]],[e,[0,1]],[[1,0],[1,-1]],[[1,0],[1,1]],[[0,1],[1,1]],[[0,1],[-1,1]],[[-1,0],[-1,-1]],[[-1,0],[-1,1]],[[0,-1],[1,-1]],[[0,-1],[-1,-1]]),r}(r,e),s=be(n,r,e),u=vn(ke(t,n,o,e,i,a),ve(t,s,Nr(n,[0,0]),a)),l=ce(u,0),c=ce(u,1);return{width:{isBound:l.isBound,offset:l.offset[0]},height:{isBound:c.isBound,offset:c.offset[1]}}}function Xe(t,n,r,e,i,a,o,s){for(var u=er(t.state),l=t.props.keepRatio,c=0,f=0,p=0;p<2;++p){var d=Ye(t,n(c,f),i,l,o,s),h=d.width,g=d.height,v=h.isBound,m=g.isBound,b=h.offset,x=g.offset;if(1===p&&(v||(b=0),m||(x=0)),0===p&&o&&!v&&!m)return[0,0];if(l){var E=Math.abs(b)*(r?1/r:1),S=Math.abs(x)*(e?1/e:1);(v&&m?E<S:m||!v&&E<S)?b=r*x/e:x=e*b/r}c+=b,f+=x}if(i[0]&&i[1]){var y=function(t,n,r,e,i){var a=[-r[0],-r[1]],o=t.state,s=o.width,u=o.height,l=t.props.bounds,c=1/0,f=1/0;if(l){var p=[[r[0],-r[1]],[-r[0],r[1]]],d=l.left,h=void 0===d?-1/0:d,g=l.top,v=void 0===g?-1/0:g,m=l.right,b=void 0===m?1/0:m,x=l.bottom,E=void 0===x?1/0:x;p.forEach((function(t){var r=t[0]!==a[0],o=t[1]!==a[1],l=Nr(n,t),p=Ie(t[1]-a[1]),d=Ie(t[0]-a[0]),g=360*N(e,l)/Math.PI;if(o){var m=l.slice();(Math.abs(g-360)<2||Math.abs(g-180)<2)&&(m[1]=e[1]);var x=Pe(e,m,(e[1]<l[1]?E:v)-l[1],!1,i)[1];isNaN(x)||(f=u+p*x)}if(r){m=l.slice(),(Math.abs(g-90)<2||Math.abs(g-270)<2)&&(m[0]=e[0]);var S=Pe(e,m,(e[0]<l[0]?b:h)-l[0],!0,i)[0];isNaN(S)||(c=s+d*S)}}))}return{maxWidth:c,maxHeight:f}}(t,u,i,a,s),M=y.maxWidth,C=y.maxHeight,w=function(t,n,r,e,i,a,o,s,u){var l=Te(t,s,[Nr(n,o)]),c=l.horizontal.offset,f=l.vertical.offset;if(f||c){var p=Fr({datas:u,distX:-f,distY:-c}),d=p[0],h=p[1];return[Math.min(i||1/0,r+o[0]*d)-r,Math.min(a||1/0,e+o[1]*h)-e]}return[0,0]}(t,n(c,f),r+c,e+f,M,C,i,o,s);c+=b=w[0],f+=x=w[1]}return[c,f]}function Fe(t,n,r,e){if(!Re(t,"rotatable"))return e;var i=n.pos1,a=n.pos2,o=n.pos3,s=n.pos4,u=e*Math.PI/180,l=[i,a,o,s].map((function(t){return it(t,r)})),c=l.map((function(t){return ft(t,u)})),f=vn(Ce(t,l,c,r,e),Ee(t,l,c,r,e));return f.sort((function(t,n){return Math.abs(t-e)-Math.abs(n-e)})),f.length?f[0]:e}function je(t,n,r,e,i,a){var o=a.width,s=a.height;if(!Re(t,"scalable"))return[0,0];var u=a.is3d,l=Xe(t,(function(t,i){return Oe(function(t,n){var r=t.transformOrigin,e=t.offsetMatrix,i=t.is3d?4:3;return Lr(e,rt(t.targetMatrix,vt(n,i),i),r,i)}(a,et(n,[t/o,i/s])),o,s,e,r,u)}),o,s,r,e,i,a);return[l[0]/o,l[1]/s]}function qe(t,n,r,e,i,a){if(!Re(t,"draggable"))return[{isSnap:!1,isBound:!1,offset:0},{isSnap:!1,isBound:!1,offset:0}];var o=rr(a.absolutePoses,[n,r]),s=_n(o),u=s.left,l=s.right,c=s.top,f=s.bottom,p=[[u,c],[l,c],[u,f],[l,f]];t.props.snapCenter&&p.push([(u+l)/2,(c+f)/2]);var d=Te(t,i,p,o),h=d.vertical,g=d.horizontal,v=me(t,o,a),m=v.vertical,b=v.horizontal,x=h.isSnap,E=g.isSnap,S=h.isBound||m.isBound,y=g.isBound||b.isBound,M=function(t,n,r,e,i){var a=n[0],o=n[1],s=r[0],u=r[1],l=e[0],c=e[1],f=i[0],p=i[1],d=-f,h=-p;if(t&&a&&o){d=0,h=0;var g=[];if(s&&u?g.push([0,p],[f,0]):s?g.push([f,0]):u?g.push([0,p]):l&&c?g.push([0,p],[f,0]):l?g.push([f,0]):c&&g.push([0,p]),g.length){g.sort((function(t,n){return Un(it([a,o],t))-Un(it([a,o],n))}));var v=g[0];if(v[0]&&Math.abs(a)>Mn)d=-v[0],h=o*Math.abs(a+d)/Math.abs(a)-o;else if(v[1]&&Math.abs(o)>Mn){var m=o;h=-v[1],d=a*Math.abs(o+h)/Math.abs(m)-a}if(t&&u&&s)if(Math.abs(d)>Mn&&Math.abs(d)<Math.abs(f))d*=b=Math.abs(f)/Math.abs(d),h*=b;else if(Math.abs(h)>Mn&&Math.abs(h)<Math.abs(p)){var b;d*=b=Math.abs(p)/Math.abs(h),h*=b}else d=mr(-f,d),h=mr(-p,h)}}else d=a||s?-f:0,h=o||u?-p:0;return[d,h]}(e,[n,r],[S,y],[x,E],[mr(h.offset,m.offset),mr(g.offset,b.offset)]);return[{isBound:S,isSnap:x,offset:M[0]},{isBound:y,isSnap:E,offset:M[1]}]}function Ne(t){var n=[];return t.forEach((function(t){t.guidelineInfos.forEach((function(t){var r=t.guideline;n.indexOf(r)>-1||n.push(r)}))})),n}function We(t,n,r,e){var i=t-r,a=i<0?i+n:e;return{size:(i<0?0:i)-a,pos:a}}function Le(t,n,r,e){var i=[],a=gr(t.filter((function(t){var n=t.element,r=t.gap;return n&&!r})),(function(t){var r=t.element,a=t.pos,o=a[e],s=(Math.min(0,o-n)<0?-1:1)+"_"+a[e?0:1],u=function(t,n,r){var e=k(t,n);return e>-1?t[e]:r}(i,(function(t){var n=t[0],e=t[1];return r===n&&o===e}));return u?u[2]:(i.push([r,o,s]),s)}));return a.forEach((function(t){t.sort((function(t,i){return We(t.pos[e],t.size,n,r).size-We(i.pos[e],t.size,n,r).size||t.pos[e?0:1]-i.pos[e?0:1]}))})),a}function _e(t,n,r,e,i,a,o,s,u,l,c,f){var p=n[0],d=n[1],h=n[2],g=n[3];return vr(t.map((function(t,n){var v=!0;return t.map((function(t,m){var b,x=t.pos,E=t.size,S=We(x[l],E,e,i),y=S.pos,M=S.size;if(M<o)return null;var C=v;v=!1;var w=s&&C?parseFloat(M.toFixed(u)):0;return f.createElement("div",{className:Bn("line",p,"guideline","dashed"),"data-size":w>0?c(w):"",key:p+"LinkGuideline"+n+"-"+m,style:(b={},b[d]=r+y+"px",b[h]=-a+x[l?0:1]+"px",b[g]=M+"px",b)})}))})))}function He(t,n,r,e,i,a){var o=n[0],s=n[1],u=n[2],l=n[3];return t.map((function(t,n){var c,f=t.type,p=t.pos;return a.createElement("div",{className:Bn("line",o,"guideline","target","bold",f),key:o+"TargetGuideline"+n,style:(c={},c[s]=r+"px",c[u]=-e+p+"px",c[l]=i+"px",c)})}))}function Ve(t,n,r,e,i,a){var o=n[0],s=n[1],u=n[2],l=n[3];return t.map((function(t,n){var c,f=t.pos,p=t.size,d=t.element;return a.createElement("div",{className:Bn("line",o,"guideline",d?"bold":""),key:o+"Guideline"+n,style:(c={},c[s]=-r+f[i]+"px",c[u]=-e+f[i?0:1]+"px",c[l]=p+"px",c)})}))}function Ue(t,n,r,e){var i=t.filter((function(t){var r=t.element,e=t.gap,i=t.type;return r&&e&&i===n})),a="vertical"===n?[0,1]:[1,0],o=a[0],s=a[1];return vr(i.map((function(t,n){var i=t.pos,a=t.gap,u=t.gapGuidelines,l=t.sizes,c=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.sort((function(t,n){return Math.abs(t)-Math.abs(n)})),t[0]}(i[s]+l[s]-r[s],i[s]-r[s]-e[s]),f=Math.min(l[s],e[s]);c>0&&c>f?c=2*(c-f/2):c<0&&c<-f&&(c=2*(c+f/2));var p=(c>0?0:e[s])+c/2;return vn(function(t,n,r,e,i,a,o){var s=Math.abs(a),u=i[n]+(a>0?e[0]:0);return t.filter((function(t){return t.pos[n]<=r[n]})).sort((function(t,r){var e=t.pos;return r.pos[n]-e[n]})).filter((function(t){var r=t.pos,e=t.sizes,i=r[n];return ir(i+e[n],1e-4)===ir(u-s,1e-4)&&(u=i,!0)})).map((function(t){var e=-r[n]+t.pos[n]+t.sizes[n];return gn(gn({},t),{gap:a,renderPos:n?[o,e]:[e,o]})}))}(u,o,r,e,i,a,p),function(t,n,r,e,i,a,o){var s=Math.abs(a),u=i[n]+(a<0?e[n]:0);return t.filter((function(t){return t.pos[n]>r[n]})).sort((function(t,r){var e=t.pos,i=r.pos;return e[n]-i[n]})).filter((function(t){var r=t.pos,e=t.sizes,i=r[n];return ir(i,1e-4)===ir(u+s,1e-4)&&(u=i+e[n],!0)})).map((function(t){var e=-r[n]+t.pos[n]-s;return gn(gn({},t),{gap:a,renderPos:n?[o,e]:[e,o]})}))}(u,o,r,e,i,a,p))})))}function Ze(t,n,r,e,i,a){var o=e[0],s=e[1],u=e[2],l=e[3],c=t.props,f=c.snapDigit,p=void 0===f?0:f,d=c.isDisplaySnapDigit,h=void 0===d||d,g="vertical"===r?"horizontal":"vertical",v="vertical"===r?[0,1]:[1,0],m=v[0],b=v[1];return n.map((function(t,n){var r,e=t.renderPos,c=t.gap,f=Math.abs(c),d=h?parseFloat(f.toFixed(p)):0;return a.createElement("div",{className:Bn("line",o,"guideline","gap"),"data-size":d>0?i(d):"",key:g+"GapGuideline"+n,style:(r={},r[s]=e[m]+"px",r[u]=e[b]+"px",r[l]=f+"px",r)})}))}function Ke(t,n,r,e,i,a){var o=Se(a||t.props.bounds,n,r),s=o.vertical,u=o.horizontal;s.forEach((function(t){t.isBound&&e.push({type:"bounds",pos:t.pos})})),u.forEach((function(t){t.isBound&&i.push({type:"bounds",pos:t.pos})}));var l=function(t){var n=t.props.innerBounds;if(!n)return{vertical:[],horizontal:[]};var r=t.getRect(),e=r.pos1,i=r.pos2,a=r.pos3,o=r.pos4,s=Nr([e,i,a,o],[0,0]),u=n.left,l=n.top,c=n.width,f=n.height,p=[[u,l],[u,l+f]],d=[[u,l],[u+c,l]],h=[[u+c,l],[u+c,l+f]],g=[[u,l+f],[u+c,l+f]],v=[],m=[],b={top:!1,bottom:!1,left:!1,right:!1};return[[e,i],[i,o],[o,a],[a,e]].forEach((function(t){var n=fe(s,t),r=n.horizontal,e=n.vertical,i=ge(t,d,e,1,!0),a=ge(t,g,e,1,!0),o=ge(t,p,r,1,!0),x=ge(t,h,r,1,!0);i.isBound&&!b.top&&(v.push(l),b.top=!0),a.isBound&&!b.bottom&&(v.push(l+f),b.bottom=!0),o.isBound&&!b.left&&(m.push(u),b.left=!0),x.isBound&&!b.right&&(m.push(u+c),b.right=!0)})),{horizontal:v,vertical:m}}(t),c=l.vertical,f=l.horizontal;c.forEach((function(t){k(e,(function(n){var r=n.type,e=n.pos;return"bounds"===r&&e===t}))>=0||e.push({type:"bounds",pos:t})})),f.forEach((function(t){k(i,(function(n){var r=n.type,e=n.pos;return"bounds"===r&&e===t}))>=0||i.push({type:"bounds",pos:t})}))}var $e={name:"snappable",props:{snappable:[Boolean,Array],snapCenter:Boolean,snapHorizontal:Boolean,snapVertical:Boolean,snapElement:Boolean,snapGap:Boolean,isDisplaySnapDigit:Boolean,snapDigit:Number,snapThreshold:Number,horizontalGuidelines:Array,verticalGuidelines:Array,elementGuidelines:Array,bounds:Object,innerBounds:Object,snapDistFormat:Function},events:{onSnap:"snap"},css:[":host {\n    --bounds-color: #d66;\n}",".guideline {\npointer-events: none;\nz-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,n){var r=t.state,e=r.top,i=r.left,a=r.pos1,o=r.pos2,s=r.pos3,u=r.pos4,l=r.snapRenderInfo,c=r.targetClientRect,f=r.containerClientRect,p=r.is3d,d=r.rootMatrix;if(!l||!Re(t,""))return[];var h=p?4:3,g=Math.min(a[0],o[0],s[0],u[0]),v=Math.min(a[1],o[1],s[1],u[1]),m=we(d,f,h),b=br(d,[c.left-m[0],c.top-m[1]],h),x=b[0],E=b[1],S=t.props,y=S.snapThreshold,M=void 0===y?5:y,C=S.snapDigit,w=void 0===C?0:C,D=S.isDisplaySnapDigit,R=void 0===D||D,P=S.snapDistFormat,O=void 0===P?function(t){return t}:P,z=l.externalPoses||[],B=er(t.state),G=[],T=[],A=[],I=[],k=[],Y=_n(B),X=Y.width,F=Y.height,j=Y.top,q=Y.left,N=Y.bottom,W=Y.right,L=z.length>0,_=L?_n(z):{};if(!l.request){if(l.direction&&k.push(function(t,n,r){var e=[];if(r[0]&&r[1])e=[r,[-r[0],r[1]],[r[0],-r[1]]].map((function(t){return Nr(n,t)}));else if(r[0]||r[1])t.props.keepRatio?e=[[-1,-1],[-1,1],[1,-1],[1,1],r].map((function(t){return Nr(n,t)})):(e=qr(n,r)).length>1&&e.push([(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]);else for(var i=[n[0],n[1],n[3],n[2],n[0]],a=0;a<4;++a)e.push(i[a]),e.push([(i[a][0]+i[a+1][0])/2,(i[a][1]+i[a+1][1])/2]);return ie(t,e.map((function(t){return t[0]})),e.map((function(t){return t[1]})),!0,1)}(t,B,l.direction)),l.snap){var H=_n(B);l.center&&(H.middle=(H.top+H.bottom)/2,H.center=(H.left+H.right)/2),k.push(oe(t,H,!0,1))}L&&(l.center&&(_.middle=(_.top+_.bottom)/2,_.center=(_.left+_.right)/2),k.push(oe(t,_,!0,1))),k.forEach((function(t){var n=t.vertical.posInfos,r=t.horizontal.posInfos;G.push.apply(G,n.map((function(t){return{type:"snap",pos:t.pos}}))),T.push.apply(T,r.map((function(t){return{type:"snap",pos:t.pos}}))),A.push.apply(A,Ne(n)),I.push.apply(I,Ne(r))}))}Ke(t,[q,W],[j,N],G,T),L&&Ke(t,[_.left,_.right],[_.top,_.bottom],G,T,l.externalBounds);var V=Le(I,x,X,0),U=Le(A,E,F,1),Z=["horizontal","left","top","width"],K=["vertical","top","left","height"],$=Ue(A,"vertical",[i,e],[X,F]),J=Ue(I,"horizontal",[i,e],[X,F]),Q=vn(A,I);return lr(t,"onSnap",{guidelines:Q.filter((function(t){return!t.element})),elements:gr(Q.filter((function(t){return t.element})),(function(t){return t.element})),gaps:vn($,J)},!0),vn(Ze(t,$,"vertical",Z,O,n),Ze(t,J,"horizontal",K,O,n),_e(V,Z,g,x,X,e,M,R,w,0,O,n),_e(U,K,v,E,F,i,M,R,w,1,O,n),He(T,Z,g,e,X,n),He(G,K,v,i,F,n),Ve(I,Z,i,e,0,n),Ve(A,K,e,i,1,n))},dragStart:function(t,n){t.state.snapRenderInfo={request:n.isRequest,snap:!0,center:!0},De(t)},pinchStart:function(t){this.unset(t)},dragEnd:function(t){this.unset(t)},dragControlCondition:function(t){return!(!Mr(t)&&!ei(t))||(!t.isRequest&&t.inputEvent?_(t.inputEvent.target,Bn("snap-control")):void 0)},dragControlStart:function(t,n){t.state.snapRenderInfo=null,De(t)},dragControlEnd:function(t){this.unset(t)},dragGroupStart:function(t,n){this.dragStart(t,n)},dragGroupEnd:function(t){this.unset(t)},dragGroupControlStart:function(t,n){t.state.snapRenderInfo=null,De(t)},dragGroupControlEnd:function(t){this.unset(t)},unset:function(t){var n=t.state;n.enableSnap=!1,n.guidelines=[],n.snapRenderInfo=null}},Je={name:"draggable",props:{draggable:Boolean,throttleDrag:Number,throttleDragRotate:Number,startDragRotate:Number,edgeDraggable:Boolean},events:{onDragStart:"dragStart",onDrag:"drag",onDragEnd:"dragEnd",onDragGroupStart:"dragGroupStart",onDragGroup:"dragGroup",onDragGroupEnd:"dragGroupEnd"},render:function(t,n){var r=t.props.throttleDragRotate,e=t.state,i=e.dragInfo,a=e.beforeOrigin;if(!r||!i)return[];var o=i.dist;if(!o[0]&&!o[1])return[];var s=Un(o),u=N(o,[0,0]);return[n.createElement("div",{className:Bn("line","horizontal","dragline","dashed"),key:"dragRotateGuideline",style:{width:s+"px",transform:"translate("+a[0]+"px, "+a[1]+"px) rotate("+u+"rad)"}})]},dragStart:function(t,n){var r=n.datas,e=n.parentEvent,i=n.parentGesto,a=t.state,o=a.target;if(a.gesto)return!1;a.gesto=i||t.targetGesto;var s=window.getComputedStyle(o);r.datas={},r.left=parseFloat(s.left||"")||0,r.top=parseFloat(s.top||"")||0,r.bottom=parseFloat(s.bottom||"")||0,r.right=parseFloat(s.right||"")||0,r.startValue=[0,0],Tr(t,n),Hr(n),function(t,n){n.absolutePoses=er(t.state)}(t,r),r.prevDist=[0,0],r.prevBeforeDist=[0,0],r.isDrag=!1;var u=sr(t,n,gn({set:function(t){r.startValue=t}},_r(n)));return!1!==(e||lr(t,"onDragStart",u))?(r.isDrag=!0,t.state.dragInfo={startRect:t.getRect(),dist:[0,0]}):(a.gesto=null,r.isPinch=!1),!!r.isDrag&&u},drag:function(t,n){Ar(n,"translate");var r=n.datas,e=n.parentEvent,i=n.parentFlag,a=n.isPinch,o=n.isRequest,s=n.distX,u=n.distY,l=r.isDrag,c=r.prevDist,f=r.prevBeforeDist,p=r.startValue;if(l){var d=t.props,h=d.parentMoveable,g=e?0:d.throttleDrag||0,v=e?0:d.throttleDragRotate||0,m=!1,b=0;if(!e&&v>0&&(s||u)){var x=d.startDragRotate||0,E=ir(x+180*N([0,0],[s,u])/Math.PI,v)-x,S=u*Math.abs(Math.cos((E-90)/180*Math.PI)),y=Un([s*Math.abs(Math.cos(E/180*Math.PI)),S]);b=E*Math.PI/180,s=y*Math.cos(b),u=y*Math.sin(b)}if(!a&&!e&&!i&&(!v||s||u)){var M=qe(t,s,u,v,o,r),C=M[0],w=M[1],D=C.isSnap,R=C.isBound,P=C.offset,O=w.isSnap,z=w.isBound;m=D||O||R||z,s+=P,u+=w.offset}r.passDeltaX=s-(r.passDistX||0),r.passDeltaY=u-(r.passDistY||0),r.passDistX=s,r.passDistY=u;var B=et(Xr({datas:r,distX:s,distY:u}),p),G=et(kr({datas:r,distX:s,distY:u}),p);v||m||(ar(G,g),ar(B,g));var T=it(B,p),A=it(G,p),I=it(A,c),k=it(T,f);r.prevDist=A,r.prevBeforeDist=T;var Y=r.left+T[0],X=r.top+T[1],F=r.right-T[0],j=r.bottom-T[1],q=Ir(r,"translate("+G[0]+"px, "+G[1]+"px)","translate("+A[0]+"px, "+A[1]+"px)");if(t.state.dragInfo.dist=e?[0,0]:A,e||h||!I.every((function(t){return!t}))||!k.some((function(t){return!t}))){var W=t.state,L=sr(t,n,{transform:q,dist:A,delta:I,translate:G,beforeDist:T,beforeDelta:k,beforeTranslate:B,left:Y,top:X,right:F,bottom:j,width:W.width,height:W.height,isPinch:a});return!e&&lr(t,"onDrag",L),L}}},dragEnd:function(t,n){var r=n.parentEvent,e=n.datas,i=n.isDrag;if(t.state.gesto=null,t.state.dragInfo=null,e.isDrag)return e.isDrag=!1,!r&&lr(t,"onDragEnd",ur(t,n,{})),i},dragGroupStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,a=this.dragStart(t,n);if(!a)return!1;var o=zr(t,this,"dragStart",[e||0,i||0],n,!1),s=lr(t,"onDragGroupStart",gn(gn({},a),{targets:t.props.targets,events:o}));return r.isDrag=!1!==s,!!r.isDrag&&a},dragGroup:function(t,n){if(n.datas.isDrag){var r=this.drag(t,n),e=n.datas,i=zr(t,this,"drag",[e.passDeltaX,e.passDeltaY],n,!1);if(r){var a=gn({targets:t.props.targets,events:i},r);return lr(t,"onDragGroup",a),a}}},dragGroupEnd:function(t,n){var r=n.isDrag;if(n.datas.isDrag)return this.dragEnd(t,n),zr(t,this,"dragEnd",[0,0],n,!1),lr(t,"onDragGroupEnd",ur(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=t.getRect(),e=0,i=0;return{isControl:!1,requestStart:function(){return{datas:n}},request:function(t){return"x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY),{datas:n,distX:e,distY:i}},requestEnd:function(){return{datas:n,isDrag:!0}}}},unset:function(t){t.state.dragInfo=null}};function Qe(t,n,r,e,i,a){var o=t.state.is3d?4:3,s=Wn(t.state.rootMatrix,i,o),u=et([a.left,a.top],s);n.startAbsoluteOrigin=u,n.prevDeg=N(u,[r,e])/Math.PI*180,n.prevSnapDeg=n.prevDeg,n.startDeg=n.prevDeg,n.loop=0}function ti(t,n,r,e,i,a){var o=r.prevDeg,s=Fe(t,n,r.origin,e);return r.prevDeg=s,[s-o,s,a+s]}function ni(t,n,r,e,i,a,o,s){var u=r.prevDeg,l=r.prevSnapDeg,c=r.startDeg,f=r.loop;u>e&&u>270&&e<90?++r.loop:u<e&&u<90&&e>270&&--r.loop;var p=r.loop,d=360*f+l-c+a,h=360*p+e-c+a;r.prevDeg=h-360*p+c-a;var g=i*((h=ir(h,o))-a);return s&&(h=(g=Fe(t,n,r.origin,g))/i+a),r.prevSnapDeg=h-360*p+c-a,[i*(h-d),g,a+g]}function ri(t,n,r,e,i,a,o,s){return ni(t,n,r,N(r.startAbsoluteOrigin,[i,a])/Math.PI*180,e,o,s,!0)}function ei(t){return t.isRequest?"rotatable"===t.requestAble:_(t.inputEvent.target,Bn("rotation"))}var ii={name:"rotatable",canPinch:!0,props:{rotatable:Boolean,rotationPosition:String,throttleRotate:Number},events:{onRotateStart:"rotateStart",onRotate:"rotate",onRotateEnd:"rotateEnd",onRotateGroupStart:"rotateGroupStart",onRotateGroup:"rotateGroup",onRotateGroupEnd:"rotateGroupEnd"},css:[".line.rotation-line {\n            height: 40px;\n            width: 1px;\n            transform-origin: 50% calc(100% - 0.5px);\n            top: -40px;\n            width: var(--zoompx);\n            height: calc(40 * var(--zoompx));\n            top: calc(-40 * var(--zoompx));\n            transform-origin: 50% calc(100% - 0.5 * var(--zoompx));\n        }\n        .line.rotation-line .control {\n            border-color: #4af;\n            background:#fff;\n            cursor: alias;\n            left: 50%;\n        }"],render:function(t,n){var r=t.props,e=r.rotatable,i=r.rotationPosition,a=t.state,o=a.rotation,s=a.renderPoses;if(!e)return null;var u=function(t,n){var r=n[0],e=n[1],i=n[2],a=n[3],o=(t||"top").split("-"),s=o[0],u=o[1],l=[r,e];"left"===s?l=[i,r]:"right"===s?l=[e,a]:"bottom"===s&&(l=[a,i]);var c=[(l[0][0]+l[1][0])/2,(l[0][1]+l[1][1])/2];if(u){var f="top"===u||"left"===u,p="bottom"===s||"left"===s;c=l[f&&!p||!f&&p?0:1]}return c}(i,s);return n.createElement("div",{key:"rotation",className:Bn("line rotation-line"),style:{transform:"translate(-50%) translate("+u[0]+"px, "+u[1]+"px) rotate("+o+"rad)"}},n.createElement("div",{className:Bn("control","rotation")}))},dragControlCondition:ei,dragControlStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY,a=n.parentRotate,o=n.parentFlag,s=n.isPinch,u=n.isRequest,l=t.state,c=l.target,f=l.left,p=l.top,d=l.origin,h=l.beforeOrigin,g=l.direction,v=l.beforeDirection,m=l.targetTransform;if(!u&&!c)return!1;var b=t.getRect();if(r.rect=b,r.transform=m,r.left=f,r.top=p,r.fixedPosition=Jr(t,$r(t)),u||s||o){var x=a||0;r.beforeInfo={origin:b.beforeOrigin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0},r.afterInfo={origin:b.origin,prevDeg:x,startDeg:x,prevSnapDeg:x,loop:0}}else{r.beforeInfo={origin:b.beforeOrigin},r.afterInfo={origin:b.origin};var E=tr(t.controlBox.getElement());Qe(t,r.beforeInfo,e,i,h,E),Qe(t,r.afterInfo,e,i,d,E)}r.direction=g,r.beforeDirection=v,r.startValue=0,r.datas={},Hr(n);var S=sr(t,n,gn(gn({set:function(t){r.startValue=t*Math.PI/180}},_r(n)),{dragStart:Je.dragStart(t,(new Pr).dragStart([0,0],n))})),y=lr(t,"onRotateStart",S);return r.isRotate=!1!==y,t.state.snapRenderInfo={request:n.isRequest},!!r.isRotate&&S},dragControl:function(t,n){var r,e,i,a,o,s,u=n.datas,l=n.clientX,c=n.clientY,f=n.parentRotate,p=n.parentFlag,d=n.isPinch,h=n.groupDelta,g=u.beforeDirection,v=u.beforeInfo,m=u.afterInfo,b=u.isRotate,x=u.startValue,E=u.rect;if(b){Ar(n,"rotate");var S,y,M,C,w,D,R=g*function(t){return Vn(t.datas.beforeTransform,[50,50],100,100).direction}(n),P=t.props,O=P.throttleRotate,z=void 0===O?0:O,B=P.parentMoveable,G=180/Math.PI*x;if(!p&&"parentDist"in n){var T=n.parentDist;S=(r=ti(t,E,m,T,0,G))[0],y=r[1],M=r[2],C=(e=ti(t,E,v,T,0,G))[0],w=e[1],D=e[2]}else d||p?(S=(i=ni(t,E,m,f,R,G,z))[0],y=i[1],M=i[2],C=(a=ni(t,E,v,f,g,G,z))[0],w=a[1],D=a[2]):(S=(o=ri(t,E,m,R,l,c,G,z))[0],y=o[1],M=o[2],C=(s=ri(t,E,v,g,l,c,G,z))[0],w=s[1],D=s[2]);if(S||C||B){var A=Ir(u,"rotate("+M+"deg)","rotate("+y+"deg)"),I=function(t,n,r,e){return Kr(t,"rotate("+n+"deg)",r,$r(t),e)}(t,y,u.fixedPosition,u),k=it(et(h||[0,0],I),u.prevInverseDist||[0,0]);u.prevInverseDist=I;var Y=sr(t,n,gn({delta:S,dist:y,rotate:M,beforeDist:w,beforeDelta:C,beforeRotate:D,isPinch:!!d},Zr(t,A,k,d,n)));return lr(t,"onRotate",Y),Y}}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isRotate&&(r.isRotate=!1,lr(t,"onRotateEnd",ur(t,n,{})),e)},dragGroupControlCondition:ei,dragGroupControlStart:function(t,n){var r=n.datas,e=t.state,i=e.left,a=e.top,o=e.beforeOrigin,s=this.dragControlStart(t,n);if(!s)return!1;s.set(r.beforeDirection*t.rotation);var u=Br(t,this,"dragControlStart",n,(function(t,n){var r=t.state,e=r.left,s=r.top,u=r.beforeOrigin,l=et(it([e,s],[i,a]),it(u,o));return n.datas.groupClient=l,gn(gn({},n),{parentRotate:0})})),l=lr(t,"onRotateGroupStart",gn(gn({},s),{targets:t.props.targets,events:u}));return r.isRotate=!1!==l,!!r.isRotate&&s},dragGroupControl:function(t,n){var r=n.datas;if(r.isRotate){var e=this.dragControl(t,n);if(e){var i=r.beforeDirection,a=e.beforeDist,o=e.beforeDelta/180*Math.PI,s=Br(t,this,"dragControl",n,(function(t,n){var r=n.datas.groupClient,e=r[0],s=r[1],u=ft([e,s],o*i),l=u[0],c=u[1],f=[l-e,c-s];return n.datas.groupClient=[l,c],gn(gn({},n),{parentRotate:a,groupDelta:f})}));t.rotation=i*e.beforeRotate;var u=gn({targets:t.props.targets,events:s,set:function(n){t.rotation=n}},e);return lr(t,"onRotateGroup",u),u}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isRotate)return this.dragControlEnd(t,n),Br(t,this,"dragControlEnd",n),lr(t,"onRotateGroupEnd",ur(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=t.getRotation();return{isControl:!0,requestStart:function(t){return{datas:n}},request:function(t){return"deltaRotate"in t?r+=t.deltaRotate:"rotate"in t&&(r=t.rotate-e),{datas:n,parentDist:r}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function ai(t,n,r){var e=t.state,i=e.renderPoses,a=e.rotation,o=t.props.renderDirections,s=void 0===o?n:o,u=t.state.direction,l={};return s.forEach((function(t){l[t]=!0})),s.map((function(t){var n=Pn[t];if(!n||!l[t])return null;var e=ir(a/Math.PI*180,15)+On[t];return u<1&&(e=360-e),e%=180,r.createElement("div",{className:Bn("control","direction",t),"data-rotation":e,"data-direction":t,key:"direction-"+t,style:$n.apply(void 0,vn([a],n.map((function(t){return i[t]}))))})}))}function oi(t,n,r,e,i){for(var a=[],o=5;o<arguments.length;o++)a[o-5]=arguments[o];var s=N(r,e),u=n?ir(s/Math.PI*180,15)%180:-1;return t.createElement("div",{key:"line"+i,className:Bn.apply(void 0,vn(["line","direction",n],a)),"data-rotation":u,"data-line-index":i,"data-direction":n,style:Kn(r,e,s)})}function si(t,n){return ai(t,Rn,n)}function ui(t,n){return ai(t,["nw","ne","sw","se"],n)}var li={name:"resizable",ableGroup:"size",updateRect:!0,canPinch:!0,props:{resizable:Boolean,throttleResize:Number,renderDirections:Array,keepRatio:Boolean},events:{onResizeStart:"resizeStart",onResize:"resize",onResizeEnd:"resizeEnd",onResizeGroupStart:"resizeGroupStart",onResizeGroup:"resizeGroup",onResizeGroupEnd:"resizeGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.edge;if(e)return i?ui(t,n):si(t,n)},dragControlCondition:Mr,dragControlStart:function(t,n){var r,e=n.inputEvent,i=n.isPinch,a=n.parentDirection,o=n.datas,s=n.parentFlag,u=a||(i?[0,0]:nr(e.target)),l=t.state,c=l.target,f=l.width,p=l.height;if(!u||!c)return!1;!i&&Tr(t,n),o.datas={},o.direction=u,o.startOffsetWidth=f,o.startOffsetHeight=p,o.prevWidth=0,o.prevHeight=0,r=function(t){var n=window.getComputedStyle(t);return[parseFloat(n.width),parseFloat(n.height)]}(c),o.startWidth=r[0],o.startHeight=r[1];var d=[Math.max(0,f-o.startWidth),Math.max(0,p-o.startHeight)];if(o.minSize=d,o.maxSize=[1/0,1/0],!s){var h=window.getComputedStyle(c);o.minSize=et([parseFloat(h.minWidth)||0,parseFloat(h.minHeight)||0],d),o.maxSize=et([parseFloat(h.maxWidth)||1/0,parseFloat(h.maxHeight)||1/0],d)}var g=t.props.transformOrigin||"% %";o.transformOrigin=g&&P(g)?g.split(" "):g,o.startDirection=te(0,u),o.fixedPosition=ne(t,o.startDirection),o.fixedOriginalPosition=ne(t,u);var v=sr(t,n,{direction:u,set:function(t){var n=t[0],r=t[1];o.startWidth=n,o.startHeight=r},setMin:function(t){o.minSize=t},setMax:function(t){o.maxSize=t},setOrigin:function(t){o.transformOrigin=t},dragStart:Je.dragStart(t,(new Pr).dragStart([0,0],n))});return!1!==lr(t,"onResizeStart",v)&&(o.isResize=!0,t.state.snapRenderInfo={request:n.isRequest,direction:u}),!!o.isResize&&v},dragControl:function(t,n){var r,e=n.datas,i=n.distX,a=n.distY,o=n.parentFlag,s=n.isPinch,u=n.parentDistance,l=n.parentScale,c=n.parentKeepRatio,f=n.dragClient,p=n.parentDist,d=n.isRequest,h=e.isResize,g=e.transformOrigin,v=e.startWidth,m=e.startHeight,b=e.startOffsetWidth,x=e.startOffsetHeight,E=e.prevWidth,S=e.prevHeight,y=e.minSize,M=e.maxSize;if(h){var C=t.props,w=C.throttleResize,D=void 0===w?0:w,R=C.parentMoveable,P=C.snapThreshold,O=void 0===P?5:P,z=e.direction,B=z,G=f,T=0,A=0;z[0]||z[1]||(B=[1,1]);var I=0!==b&&0!==x&&(t.props.keepRatio||c),k=B[0]||!B[1],Y=k?x/b:b/x,X=vn(I||o?z:e.startDirection);if(f||(G=!o&&s?ne(t,[0,0]):I?e.fixedOriginalPosition:e.fixedPosition),p)T=p[0],A=p[1];else if(l)T=(l[0]-1)*b,A=(l[1]-1)*x;else if(s)u&&(T=u,A=u*x/b);else{var F=Fr({datas:e,distX:i,distY:a});if(T=B[0]*F[0],A=B[1]*F[1],I&&b&&x){var q=N([0,0],F),W=N([0,0],B),L=N([0,0],[b,x]),_=Un([T,A]),H=Math.cos(q-W)*_;B[0]?B[1]?(T=Math.cos(L)*H,A=Math.sin(L)*H):A=pr(T=H,k,Y):T=dr(A=H,k,Y)}else if(!I){var V=vn(z);b||(F[0]<0?V[0]=-1:F[0]>0&&(V[0]=1)),x||(F[1]<0?V[1]=-1:F[1]>0&&(V[1]=1)),z=V,B=V,X=te(0,V),T=B[0]*F[0],A=B[1]*F[1]}}var U=B[0]||I?Math.max(b+T,Mn):b,Z=B[1]||I?Math.max(x+A,Mn):x;I&&b&&x&&(Z=U*x/b);var K=[0,0];if(s||(K=function(t,n,r,e,i,a,o){if(!Re(t,"resizable"))return[0,0];var s=t.state,u=s.allMatrix,l=s.is3d;return Xe(t,(function(t,a){return Oe(u,n+t,r+a,i,e,l)}),n,r,e,i,a,o)}(t,U,Z,z,e.fixedOriginalPosition,d,e)),p&&(!p[0]&&(K[0]=0),!p[1]&&(K[1]=0)),I){B[0]&&B[1]&&K[0]&&K[1]&&(Math.abs(K[0])>Math.abs(K[1])?K[1]=0:K[0]=0);var $=!K[0]&&!K[1];$&&(k?U=ir(U,D):Z=ir(Z,D)),B[0]&&!B[1]||K[0]&&!K[1]||$&&k?Z=pr(U+=K[0],k,Y):(!B[0]&&B[1]||!K[0]&&K[1]||$&&!k)&&(U=dr(Z+=K[1],k,Y))}else b+T<-O&&(K[0]=0),b+A<-O&&(K[1]=0),U+=K[0],Z+=K[1],K[0]||(U=ir(U,D)),K[1]||(Z=ir(Z,D));U=(r=j([U,Z],y,M,I))[0],Z=r[1];var J=[(T=(U=Math.round(U))-b)-E,(A=(Z=Math.round(Z))-x)-S];e.prevWidth=T,e.prevHeight=A;var Q=Qr(t,U,Z,X,G,g);if(R||!J.every((function(t){return!t}))||!Q.every((function(t){return!t}))){var tt=sr(t,n,{width:v+T,height:m+A,offsetWidth:U,offsetHeight:Z,direction:z,dist:[T,A],delta:J,isPinch:!!s,drag:Je.drag(t,Rr(n,t.state,Q,!!s,!1))});return lr(t,"onResize",tt),tt}}},dragControlAfter:function(t,n){var r=n.datas,e=r.isResize,i=r.startOffsetWidth,a=r.startOffsetHeight,o=r.prevWidth,s=r.prevHeight;if(e){var u=t.state,l=u.width-(i+o),c=u.height-(a+s),f=Math.abs(l)>3,p=Math.abs(c)>3;return f&&(r.startWidth+=l,r.startOffsetWidth+=l,r.prevWidth+=l),p&&(r.startHeight+=c,r.startOffsetHeight+=c,r.prevHeight+=c),f||p?(this.dragControl(t,n),!0):void 0}},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isResize&&(r.isResize=!1,lr(t,"onResizeEnd",ur(t,n,{})),e)},dragGroupControlCondition:Mr,dragGroupControlStart:function(t,n){var r=n.datas,e=this.dragControlStart(t,n);if(!e)return!1;var i=e.direction,a=r.fixedOriginalPosition,o=Br(t,this,"dragControlStart",n,(function(n,r){var e=ne(n,i),o=ot(ht(-t.rotation/180*Math.PI,3),[e[0]-a[0],e[1]-a[1],1],3),s=o[0],u=o[1];return r.datas.originalX=s,r.datas.originalY=u,r})),s=gn(gn({},e),{targets:t.props.targets,events:o}),u=lr(t,"onResizeGroupStart",s);return r.isResize=!1!==u,!!r.isResize&&e},dragGroupControl:function(t,n){var r=n.datas;if(r.isResize){var e=this.dragControl(t,n);if(e){var i=e.offsetWidth,a=e.offsetHeight,o=e.dist,s=t.props.keepRatio,u=[i/(i-o[0]),a/(a-o[1])],l=r.fixedOriginalPosition,c=Br(t,this,"dragControl",n,(function(n,r){var e=ot(ht(t.rotation/180*Math.PI,3),[r.datas.originalX*u[0],r.datas.originalY*u[1],1],3),i=e[0],a=e[1];return gn(gn({},r),{parentDist:null,parentScale:u,dragClient:et(l,[i,a]),parentKeepRatio:s})})),f=gn({targets:t.props.targets,events:c},e);return lr(t,"onResizeGroup",f),f}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isResize)return this.dragControlEnd(t,n),Br(t,this,"dragControlEnd",n),lr(t,"onResizeGroupEnd",ur(t,n,{targets:t.props.targets})),r},request:function(t){var n={},r=0,e=0,i=t.getRect();return{isControl:!0,requestStart:function(t){return{datas:n,parentDirection:t.direction||[1,1]}},request:function(t){return"offsetWidth"in t?r=t.offsetWidth-i.offsetWidth:"deltaWidth"in t&&(r+=t.deltaWidth),"offsetHeight"in t?e=t.offsetHeight-i.offsetHeight:"deltaHeight"in t&&(e+=t.deltaHeight),{datas:n,parentDist:[r,e]}},requestEnd:function(){return{datas:n,isDrag:!0}}}}},ci={name:"scalable",ableGroup:"size",canPinch:!0,props:{scalable:Boolean,throttleScale:Number,renderDirections:String,keepRatio:Boolean},events:{onScaleStart:"scaleStart",onScale:"scale",onScaleEnd:"scaleEnd",onScaleGroupStart:"scaleGroupStart",onScaleGroup:"scaleGroup",onScaleGroupEnd:"scaleGroupEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,a=r.edge;if(!e&&i)return a?ui(t,n):si(t,n)},dragControlCondition:Mr,dragControlStart:function(t,n){var r=n.datas,e=n.isPinch,i=n.inputEvent,a=n.parentDirection||(e?[0,0]:nr(i.target)),o=t.state,s=o.width,u=o.height,l=o.targetTransform,c=o.target;if(!a||!c)return!1;e||Tr(t,n),Hr(n),r.datas={},r.transform=l,r.prevDist=[1,1],r.direction=a,r.width=s,r.height=u,r.startValue=[1,1],r.fixedDirection=a.map((function(t){return-t})),r.fixedPosition=ne(t,a);var f=sr(t,n,gn(gn({direction:a,set:function(t){r.startValue=t}},_r(n)),{dragStart:Je.dragStart(t,(new Pr).dragStart([0,0],n))}));return!1!==lr(t,"onScaleStart",f)&&(r.isScale=!0,t.state.snapRenderInfo={request:n.isRequest,direction:a}),!!r.isScale&&f},dragControl:function(t,n){Ar(n,"scale");var r=n.datas,e=n.distX,i=n.distY,a=n.parentScale,o=n.parentDistance,s=n.parentKeepRatio,u=n.parentFlag,l=n.isPinch,c=n.dragClient,f=n.parentDist,p=n.isRequest,d=r.prevDist,h=r.direction,g=r.width,v=r.height,m=r.isScale,b=r.startValue;if(!m)return!1;var x=t.props,E=x.throttleScale,S=x.parentMoveable,y=h;h[0]||h[1]||(y=[1,1]);var M=t.props.keepRatio||s,C=t.state,w=y[0]||!y[1],D=g*b[0],P=v*b[1],O=w?P/D:D/P,z=1,B=1,G=c;if(c||(G=!u&&l?ne(t,[0,0]):r.fixedPosition),f)z=(g+f[0])/g,B=(v+f[1])/v;else if(a)z=a[0],B=a[1];else if(l)o&&(z=(g+o)/g,B=(v+o*v/g)/v);else{var T=Fr({datas:r,distX:e,distY:i}),A=y[0]*T[0],I=y[1]*T[1];if(M&&g&&v){var k=N([0,0],T),Y=N([0,0],y),X=N([0,0],[D,P]),F=Un([A,I]),j=Math.cos(k-Y)*F;y[0]?y[1]?(A=Math.cos(X)*j,I=Math.sin(X)*j):I=pr(A=j,w,O):A=dr(I=j,w,O)}z=(g+A)/g,B=(v+I)/v}z=y[0]||M?z*b[0]:b[0],B=y[1]||M?B*b[1]:b[1],0===z&&(z=(d[0]>0?1:-1)*Cn),0===B&&(B=(d[1]>0?1:-1)*Cn);var q=[z/b[0],B/b[1]],W=[z,B];if(!l&&t.props.groupable){var L=(C.snapRenderInfo||{}).direction;R(L)&&(L[0]||L[1])&&(C.snapRenderInfo={direction:h,request:n.isRequest})}var _=[0,0];if(l||(_=je(t,q,h,r.fixedPosition,p,r)),M){y[0]&&y[1]&&_[0]&&_[1]&&(Math.abs(_[0])>Math.abs(_[1])?_[1]=0:_[0]=0);var H=!_[0]&&!_[1];if(H&&(w?q[0]=ir(q[0]*b[0],E)/b[0]:q[1]=ir(q[1]*b[1],E)/b[1]),y[0]&&!y[1]||_[0]&&!_[1]||H&&w){q[0]+=_[0];var V=pr(g*q[0]*b[0],w,O);q[1]=V/v/b[1]}else if(!y[0]&&y[1]||!_[0]&&_[1]||H&&!w){q[1]+=_[1];var U=dr(v*q[1]*b[1],w,O);q[0]=U/g/b[0]}}else q[0]+=_[0],q[1]+=_[1],_[0]||(q[0]=ir(q[0]*b[0],E)/b[0]),_[1]||(q[1]=ir(q[1]*b[1],E)/b[1]);0===q[0]&&(q[0]=(d[0]>0?1:-1)*Cn),0===q[1]&&(q[1]=(d[1]>0?1:-1)*Cn);var Z,K,$=[q[0]/d[0],q[1]/d[1]];K=b,W=[(Z=q)[0]*K[0],Z[1]*K[1]];var J=function(t,n,r,e,i){return Kr(t,"scale("+n.join(", ")+")",e,r.map((function(t){return-t})),i)}(t,q,h,G,r),Q=it(J,r.prevInverseDist||[0,0]);if(r.prevDist=q,r.prevInverseDist=J,z===d[0]&&B===d[1]&&Q.every((function(t){return!t}))&&!S)return!1;var tt=Ir(r,"scale("+W.join(", ")+")","scale("+q.join(", ")+")"),nt=sr(t,n,gn({offsetWidth:g,offsetHeight:v,direction:h,scale:W,dist:q,delta:$,isPinch:!!l},Zr(t,tt,Q,l,n)));return lr(t,"onScale",nt),nt},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isScale&&(r.isScale=!1,lr(t,"onScaleEnd",ur(t,n,{})),e)},dragGroupControlCondition:Mr,dragGroupControlStart:function(t,n){var r=n.datas,e=this.dragControlStart(t,n);if(!e)return!1;var i=e.direction,a=r.fixedPosition;r.moveableScale=t.scale;var o=Br(t,this,"dragControlStart",n,(function(n,r){var e=ne(n,i),o=ot(ht(-t.rotation/180*Math.PI,3),[e[0]-a[0],e[1]-a[1],1],3),s=o[0],u=o[1];return r.datas.originalX=s,r.datas.originalY=u,r})),s=gn(gn({},e),{targets:t.props.targets,events:o}),u=lr(t,"onScaleGroupStart",s);return r.isScale=!1!==u,!!r.isScale&&s},dragGroupControl:function(t,n){var r=n.datas;if(r.isScale){var e=this.dragControl(t,n);if(e){var i=r.moveableScale;t.scale=[e.scale[0]*i[0],e.scale[1]*i[1]];var a=t.props.keepRatio,o=e.dist,s=e.scale,u=r.fixedPosition,l=Br(t,this,"dragControl",n,(function(n,r){var e=ot(ht(t.rotation/180*Math.PI,3),[r.datas.originalX*o[0],r.datas.originalY*o[1],1],3),i=e[0],l=e[1];return gn(gn({},r),{parentDist:null,parentScale:s,parentKeepRatio:a,dragClient:et(u,[i,l])})})),c=gn({targets:t.props.targets,events:l},e);return lr(t,"onScaleGroup",c),c}}},dragGroupControlEnd:function(t,n){var r=n.isDrag;if(n.datas.isScale)return this.dragControlEnd(t,n),Br(t,this,"dragControlEnd",n),lr(t,"onScaleGroupEnd",ur(t,n,{targets:t.props.targets})),r},request:function(){var t={},n=0,r=0;return{isControl:!0,requestStart:function(n){return{datas:t,parentDirection:n.direction||[1,1]}},request:function(e){return n+=e.deltaWidth,r+=e.deltaHeight,{datas:t,parentDist:[n,r]}},requestEnd:function(){return{datas:t,isDrag:!0}}}}};function fi(t,n){return t.map((function(t,r){return e=t,i=n[r],(e*(o=2)+i*(a=1))/(a+o);var e,i,a,o}))}function pi(t,n,r){var e=N(t,n),i=N(t,r)-e;return i>=0?i:i+2*Math.PI}var di={name:"warpable",ableGroup:"size",props:{warpable:Boolean,renderDirections:Array},events:{onWarpStart:"warpStart",onWarp:"warp",onWarpEnd:"warpEnd"},render:function(t,n){var r=t.props,e=r.resizable,i=r.scalable,a=r.warpable;if(e||i||!a)return[];var o=t.state,s=o.pos1,u=o.pos2,l=o.pos3,c=o.pos4,f=fi(s,u),p=fi(u,s),d=fi(s,l),h=fi(l,s),g=fi(l,c),v=fi(c,l),m=fi(u,c),b=fi(c,u);return vn([n.createElement("div",{className:Bn("line"),key:"middeLine1",style:Kn(f,g)}),n.createElement("div",{className:Bn("line"),key:"middeLine2",style:Kn(p,v)}),n.createElement("div",{className:Bn("line"),key:"middeLine3",style:Kn(d,m)}),n.createElement("div",{className:Bn("line"),key:"middeLine4",style:Kn(h,b)})],si(t,n))},dragControlCondition:function(t){return!t.isRequest&&_(t.inputEvent.target,Bn("direction"))},dragControlStart:function(t,n){var r=n.datas,e=n.inputEvent,i=t.props.target,a=nr(e.target);if(!a||!i)return!1;var o=t.state,s=o.transformOrigin,u=o.is3d,l=o.targetTransform,c=o.targetMatrix,f=o.width,p=o.height,d=o.left,h=o.top;return r.datas={},r.targetTransform=l,r.warpTargetMatrix=u?c:tt(c,3,4),r.targetInverseMatrix=$(J(r.warpTargetMatrix,4),3,4),r.direction=a,r.left=d,r.top=h,Tr(t,n),Hr(n),r.poses=[[0,0],[f,0],[0,p],[f,p]].map((function(t){return it(t,s)})),r.nextPoses=r.poses.map((function(t){var n=t[0],e=t[1];return ot(r.warpTargetMatrix,[n,e,0,1],4)})),r.startValue=gt(4),r.prevMatrix=gt(4),r.absolutePoses=er(o),r.posIndexes=jr(a),o.snapRenderInfo={request:n.isRequest,direction:a},!1!==lr(t,"onWarpStart",sr(t,n,gn({set:function(t){r.startValue=t}},_r(n))))&&(r.isWarp=!0),r.isWarp},dragControl:function(t,n){var r=n.datas,e=n.isRequest,i=n.distX,a=n.distY,o=r.targetInverseMatrix,s=r.prevMatrix,u=r.isWarp,l=r.startValue,c=r.poses,f=r.posIndexes,p=r.absolutePoses;if(!u)return!1;if(Ar(n,"matrix3d"),Re(t,"warpable")){var d=f.map((function(t){return p[t]}));d.length>1&&d.push([(d[0][0]+d[1][0])/2,(d[0][1]+d[1][1])/2]);var h=Te(t,e,d.map((function(t){return[t[0]+i,t[1]+a]}))),g=h.horizontal,v=h.vertical;a-=g.offset,i-=v.offset}var m=Fr({datas:r,distX:i,distY:a},!0),b=r.nextPoses.slice();if(f.forEach((function(t){b[t]=et(b[t],m)})),!yn.every((function(t){return function(t,n){var r=pi(t[0],t[1],t[2]),e=pi(n[0],n[1],n[2]),i=Math.PI;return!(r>=i&&e<=i||r<=i&&e>=i)}(t.map((function(t){return c[t]})),t.map((function(t){return b[t]})))})))return!1;var x=bt(c[0],c[2],c[1],c[3],b[0],b[2],b[1],b[3]);if(!x.length)return!1;var E=Yr(r,rt(o,x,4),!0),S=rt(J(s,4),E,4);r.prevMatrix=E;var y=rt(l,E,4),M=Ir(r,"matrix3d("+y.join(", ")+")","matrix3d("+E.join(", ")+")");return Ur(n,M),lr(t,"onWarp",sr(t,n,{delta:S,matrix:y,dist:E,multiply:rt,transform:M})),!0},dragControlEnd:function(t,n){var r=n.datas,e=n.isDrag;return!!r.isWarp&&(r.isWarp=!1,lr(t,"onWarpEnd",ur(t,n,{})),e)}},hi=Bn("area-pieces"),gi=Bn("area-piece"),vi=Bn("avoid");function mi(t){var n=t.areaElement,r=t.state,e=r.width,i=r.height;!function(t,n){if(t.classList)t.classList.remove(n);else{var r=new RegExp("(\\s|^)"+n+"(\\s|$)");t.className=t.className.replace(r," ")}}(n,vi),n.style.cssText+="left: 0px; top: 0px; width: "+e+"px; height: "+i+"px"}function bi(t){return t.createElement("div",{key:"area_pieces",className:hi},t.createElement("div",{className:gi}),t.createElement("div",{className:gi}),t.createElement("div",{className:gi}),t.createElement("div",{className:gi}))}var xi={name:"dragArea",props:{dragArea:Boolean,passDragArea:Boolean},events:{onClick:"click",onClickGroup:"clickGroup"},render:function(t,n){var r=t.props,e=r.target,i=r.dragArea,a=r.groupable,o=r.passDragArea,s=t.state,u=s.width,l=s.height,c=s.renderPoses,f=o?Bn("area","pass"):Bn("area");if(a)return[n.createElement("div",{key:"area",ref:E(t,"areaElement"),className:f}),bi(n)];if(!e||!i)return[];var p=bt([0,0],[u,0],[0,l],[u,l],c[0],c[1],c[2],c[3]),d=p.length?jn(p,!0):"none";return[n.createElement("div",{key:"area",ref:E(t,"areaElement"),className:f,style:{top:"0px",left:"0px",width:u+"px",height:l+"px",transformOrigin:"0 0",transform:d}}),bi(n)]},dragStart:function(t,n){var r=n.datas,e=n.clientX,i=n.clientY;if(!n.inputEvent)return!1;r.isDragArea=!1;var a,o,s=t.areaElement,u=t.state,l=u.moveableClientRect,c=u.renderPoses,f=u.rootMatrix,p=u.is3d,d=l.left,h=l.top,g=_n(c),v=g.left,m=g.top,b=g.width,x=g.height,E=br(f,[e-d,i-h],p?4:3),S=E[0],y=E[1],M=[{left:v,top:m,width:b,height:(y-=m)-10},{left:v,top:m,width:(S-=v)-10,height:x},{left:v,top:m+y+10,width:b,height:x-y-10},{left:v+S+10,top:m,width:b-S-10,height:x}],C=[].slice.call(s.nextElementSibling.children);M.forEach((function(t,n){C[n].style.cssText="left: "+t.left+"px;top: "+t.top+"px; width: "+t.width+"px; height: "+t.height+"px;"})),o=vi,(a=s).classList?a.classList.add(o):a.className+=" "+o},drag:function(t,n){var r=n.datas;if(!n.inputEvent)return!1;r.isDragArea||(r.isDragArea=!0,mi(t))},dragEnd:function(t,n){var r=n.inputEvent,e=n.datas;if(!r)return!1;e.isDragArea||mi(t)},dragGroupStart:function(t,n){return this.dragStart(t,n)},dragGroup:function(t,n){return this.drag(t,n)},dragGroupEnd:function(t,n){return this.dragEnd(t,n)},unset:function(t){mi(t)}},Ei={name:"origin",props:{origin:Boolean},events:{},render:function(t,n){var r=t.state,e=r.beforeOrigin,i=r.rotation;return[n.createElement("div",{className:Bn("control","origin"),style:$n(i,e),key:"beforeOrigin"})]}};function Si(t){var n=t.scrollContainer;return[n.scrollLeft,n.scrollTop]}var yi={name:"scrollable",canPinch:!0,props:{scrollable:Boolean,scrollContainer:Object,scrollThreshold:Number,getScrollPosition:Function},events:{onScroll:"scroll",onScrollGroup:"scrollGroup"},dragStart:function(t,n){var r=t.props.scrollContainer,e=void 0===r?t.getContainer():r,i=new It;n.datas.dragScroll=i;var a=n.isControl?"controlGesto":"targetGesto",o=n.targets;i.on("scroll",(function(r){var e=r.container,i=r.direction,a=sr(t,n,{scrollContainer:e,direction:i}),s=o?"onScrollGroup":"onScroll";o&&(a.targets=o),lr(t,s,a)})).on("move",(function(r){var e=r.offsetX,i=r.offsetY;t[a].scrollBy(e,i,n.inputEvent,!1)})),i.dragStart(n,{container:e})},checkScroll:function(t,n){var r=n.datas.dragScroll;if(r){var e=t.props,i=e.scrollContainer,a=void 0===i?t.getContainer():i,o=e.scrollThreshold,s=void 0===o?0:o,u=e.getScrollPosition,l=void 0===u?Si:u;return r.drag(n,{container:a,threshold:s,getScrollPosition:function(t){return l({scrollContainer:t.container,direction:t.direction})}}),!0}},drag:function(t,n){return this.checkScroll(t,n)},dragEnd:function(t,n){n.datas.dragScroll.dragEnd(),n.datas.dragScroll=null},dragControlStart:function(t,n){return this.dragStart(t,gn(gn({},n),{isControl:!0}))},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupStart:function(t,n){return this.dragStart(t,gn(gn({},n),{targets:t.props.targets}))},dragGroup:function(t,n){return this.drag(t,gn(gn({},n),{targets:t.props.targets}))},dragGroupEnd:function(t,n){return this.dragEnd(t,gn(gn({},n),{targets:t.props.targets}))},dragGroupControlStart:function(t,n){return this.dragStart(t,gn(gn({},n),{targets:t.props.targets,isControl:!0}))},dragGroupContro:function(t,n){return this.drag(t,gn(gn({},n),{targets:t.props.targets}))},dragGroupControEnd:function(t,n){return this.dragEnd(t,gn(gn({},n),{targets:t.props.targets}))}},Mi={name:"",props:{target:Object,dragTarget:Object,container:Object,rootContainer:Object,zoom:Number,transformOrigin:Array,edge:Boolean,ables:Array,className:String,pinchThreshold:Number,pinchOutside:Boolean,triggerAblesSimultaneously:Boolean,checkInput:Boolean,cspNonce:String,translateZ:Number,props:Object},events:{}},Ci={name:"padding",props:{padding:Object},events:{},render:function(t,n){var r=t.props;if(r.dragArea)return[];var e=r.padding||{},i=e.left,a=void 0===i?0:i,o=e.top,s=void 0===o?0:o,u=e.right,l=void 0===u?0:u,c=e.bottom,f=void 0===c?0:c,p=t.state,d=p.renderPoses,h=[p.pos1,p.pos2,p.pos3,p.pos4],g=[];return a>0&&g.push([0,2]),s>0&&g.push([0,1]),l>0&&g.push([1,3]),f>0&&g.push([2,3]),g.map((function(t,r){var e=t[0],i=t[1],a=bt([0,0],[100,0],[0,100],[100,100],h[e],h[i],d[e],d[i]);if(a.length)return n.createElement("div",{key:"padding"+r,className:Bn("padding"),style:{transform:jn(a,!0)}})}))}},wi=["nw","ne","se","sw"];function Di(t,n){var r=t[0]+t[1],e=r>n?n/r:1;return t[0]*=e,t[1]=n-t[1]*e,t}var Ri=[1,2,5,6],Pi=[0,3,4,7],Oi=[1,-1,-1,1],zi=[1,1,-1,-1];function Bi(t,n,r,e,i,a,o,s,u){void 0===a&&(a=0),void 0===o&&(o=0),void 0===s&&(s=e),void 0===u&&(u=i);var l=[],c=!1,f=t.map((function(t,f){var p=n[f],d=p.horizontal,h=p.vertical;if(h&&!c&&(c=!0,l.push("/")),c){var g=Math.max(0,1===h?t[1]-o:u-t[1]);return l.push(Sr(g,i,r)),g}g=Math.max(0,1===d?t[0]-a:s-t[0]);return l.push(Sr(g,e,r)),g}));return{styles:l,raws:f}}function Gi(t){for(var n=[0,0],r=[0,0],e=t.length,i=0;i<e;++i){var a=t[i];a.sub&&(a.horizontal&&(0===n[1]&&(n[0]=i),n[1]=i-n[0]+1,r[0]=i+1),a.vertical&&(0===r[1]&&(r[0]=i),r[1]=i-r[0]+1))}return{horizontalRange:n,verticalRange:r}}function Ti(t,n,r,e,i,a){var o,s,u,l;void 0===a&&(a=[0,0]);var c=t.indexOf("/"),f=(c>-1?t.slice(0,c):t).length,p=t.slice(0,f),d=t.slice(f+1),h=p[0],g=void 0===h?"0px":h,v=p[1],m=void 0===v?g:v,b=p[2],x=void 0===b?g:b,E=p[3],S=void 0===E?m:E,y=d[0],M=void 0===y?g:y,C=d[1],w=void 0===C?M:C,D=d[2],R=void 0===D?M:D,P=d[3],O=void 0===P?w:P,z=[g,m,x,S].map((function(t){return X(t,n)})),B=[M,w,R,O].map((function(t){return X(t,r)})),G=z.slice(),T=B.slice();o=Di([G[0],G[1]],n),G[0]=o[0],G[1]=o[1],s=Di([G[3],G[2]],n),G[3]=s[0],G[2]=s[1],u=Di([T[0],T[3]],r),T[0]=u[0],T[3]=u[1],l=Di([T[1],T[2]],r),T[1]=l[0],T[2]=l[1];var A=G.slice(0,Math.max(a[0],p.length)),I=T.slice(0,Math.max(a[1],d.length));return vn(A.map((function(t,n){var a=wi[n];return{horizontal:Oi[n],vertical:0,pos:[e+t,i+(-1===zi[n]?r:0)],sub:!0,raw:z[n],direction:a}})),I.map((function(t,r){var a=wi[r];return{horizontal:0,vertical:zi[r],pos:[e+(-1===Oi[r]?n:0),i+t],sub:!0,raw:B[r],direction:a}})))}function Ai(t,n,r,e,i){void 0===i&&(i=n.length);var a=Gi(t.slice(e)),o=a.horizontalRange,s=a.verticalRange,u=r-e,l=0;if(0===u)l=i;else if(u>0&&u<o[1])l=o[1]-u;else{if(!(u>=s[0]))return;l=s[0]+s[1]-u}t.splice(r,l),n.splice(r,l)}function Ii(t,n,r,e,i,a,o,s,u,l,c){void 0===l&&(l=0),void 0===c&&(c=0);var f=Gi(t.slice(r)),p=f.horizontalRange,d=f.verticalRange;if(e>-1)for(var h=1===Oi[e]?a-l:s-a,g=p[1];g<=e;++g){var v=1===zi[g]?c:u,m=0;if(e===g?m=a:0===g?m=l+h:-1===Oi[g]&&(m=s-(n[r][0]-l)),t.splice(r+g,0,{horizontal:Oi[g],vertical:0,pos:[m,v]}),n.splice(r+g,0,[m,v]),0===g)break}else if(i>-1){var b=1===zi[i]?o-c:u-o;if(0===p[1]&&0===d[1]){var x=[l+b,c];t.push({horizontal:Oi[0],vertical:0,pos:x}),n.push(x)}var E=d[0];for(g=d[1];g<=i;++g){m=1===Oi[g]?l:s,v=0;if(i===g?v=o:0===g?v=c+b:1===zi[g]?v=n[r+E][1]:-1===zi[g]&&(v=u-(n[r+E][1]-c)),t.push({horizontal:0,vertical:zi[g],pos:[m,v]}),n.push([m,v]),0===g)break}}}function ki(t,n){return void 0===n&&(n=t.map((function(t){return t.raw}))),{horizontals:t.map((function(t,r){return t.horizontal?n[r]:null})).filter((function(t){return null!=t})),verticals:t.map((function(t,r){return t.vertical?n[r]:null})).filter((function(t){return null!=t}))}}var Yi=[[0,-1,"n"],[1,0,"e"]],Xi=[[-1,-1,"nw"],[0,-1,"n"],[1,-1,"ne"],[1,0,"e"],[1,1,"se"],[0,1,"s"],[-1,1,"sw"],[-1,0,"w"]];function Fi(t,n,r){var e=t.props.clipRelative,i=t.state,a=i.width,o=i.height,s=n,u=s.type,l=s.poses,c="rect"===u,f="circle"===u;if("polygon"===u)return r.map((function(t){return Sr(t[0],a,e)+" "+Sr(t[1],o,e)}));if(c||"inset"===u){var p=r[1][1],d=r[3][0],h=r[7][0],g=r[5][1];if(c)return[p,d,g,h].map((function(t){return t+"px"}));var v=[p,a-d,o-g,h].map((function(t,n){return Sr(t,n%2?a:o,e)}));if(r.length>8){var m=it(r[4],r[0]),b=m[0],x=m[1];v.push.apply(v,vn(["round"],Bi(r.slice(8),l.slice(8),e,b,x,h,p,d,g).styles))}return v}if(f||"ellipse"===u){var E=r[0],S=Sr(Math.abs(r[1][1]-E[1]),f?Math.sqrt((a*a+o*o)/2):o,e);return(v=f?[S]:[Sr(Math.abs(r[2][0]-E[0]),a,e),S]).push("at",Sr(E[0],a,e),Sr(E[1],o,e)),v}}function ji(t,n,r,e){var i=[e,(e+n)/2,n],a=[t,(t+r)/2,r];return Xi.map((function(t){var n=t[0],r=t[1],e=t[2],o=i[n+1],s=a[r+1];return{vertical:Math.abs(r),horizontal:Math.abs(n),direction:e,pos:[o,s]}}))}function qi(t,n,r,e,i){var a,o,s,u,l,c,f,p=i;if(!p){var d=getComputedStyle(t),h=d.clipPath;p="none"!==h?h:d.clip}if(p&&"none"!==p&&"auto"!==p||(p=e)){var g=T(p),v=g.prefix,m=void 0===v?p:v,b=g.value,x=void 0===b?"":b,E="circle"===m,S=" ";if("polygon"===m)return S=",",{type:m,clipText:p,poses:I=(D=G(x||"0% 0%, 100% 0%, 100% 100%, 0% 100%")).map((function(t){var e=t.split(" "),i=e[0],a=e[1];return{vertical:1,horizontal:1,pos:[X(i,n),X(a,r)]}})),splitter:S};if(E||"ellipse"===m){var y="",M="",C=0,w=0,D=B(x);if(E){var R;R=void 0===(a=D[0])?"50%":a,y=void 0===(o=D[2])?"50%":o,M=void 0===(s=D[3])?"50%":s,C=X(R,Math.sqrt((n*n+r*r)/2)),w=C}else{var P,O;P=void 0===(u=D[0])?"50%":u,O=void 0===(l=D[1])?"50%":l,y=void 0===(c=D[3])?"50%":c,M=void 0===(f=D[4])?"50%":f,C=X(P,n),w=X(O,r)}var z=[X(y,n),X(M,r)],I=vn([{vertical:1,horizontal:1,pos:z,direction:"nesw"}],Yi.slice(0,E?1:2).map((function(t){return{vertical:Math.abs(t[1]),horizontal:t[0],direction:t[2],sub:!0,pos:[z[0]+t[0]*C,z[1]+t[1]*w]}})));return{type:m,clipText:p,radiusX:C,radiusY:w,left:z[0]-C,top:z[1]-w,poses:I,splitter:S}}if("inset"===m){var k=(D=B(x||"0 0 0 0")).indexOf("round"),Y=(k>-1?D.slice(0,k):D).length,F=D.slice(Y+1),j=D.slice(0,Y),q=j[0],N=j[1],W=void 0===N?q:N,L=j[2],_=void 0===L?q:L,H=j[3],V=void 0===H?W:H,U=[q,_].map((function(t){return X(t,r)})),Z=U[0],K=U[1],$=[V,W].map((function(t){return X(t,n)})),J=$[0],Q=$[1],tt=n-Q,nt=r-K,rt=Ti(F,tt-J,nt-Z,J,Z);return{type:"inset",clipText:p,poses:I=vn(ji(Z,tt,nt,J),rt),top:Z,left:J,right:tt,bottom:nt,radius:F,splitter:S}}if("rect"===m){S=",";var et=(D=G(x||"0px, "+n+"px, "+r+"px, 0px")).map((function(t){return A(t).value}));return{type:"rect",clipText:p,poses:I=ji(Z=et[0],Q=et[1],K=et[2],J=et[3]),top:Z,right:Q,bottom:K,left:J,values:D,splitter:S}}}}var Ni={name:"clippable",props:{clippable:Boolean,defaultClipPath:String,customClipPath:String,clipRelative:Boolean,clipArea:Boolean,dragWithClip:Boolean,clipTargetBounds:Boolean,clipVerticalGuidelines:Array,clipHorizontalGuidelines:Array,clipSnapThreshold:Boolean},events:{onClipStart:"clipStart",onClip:"clip",onClipEnd:"clipEnd"},css:[".control.clip-control {\n    background: #6d6;\n    cursor: pointer;\n}\n.control.clip-control.clip-radius {\n    background: #d66;\n}\n.line.clip-line {\n    background: #6e6;\n    cursor: move;\n    z-index: 1;\n}\n.clip-area {\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n.clip-ellipse {\n    position: absolute;\n    cursor: move;\n    border: 1px solid #6d6;\n    border: var(--zoompx) solid #6d6;\n    border-radius: 50%;\n    transform-origin: 0px 0px;\n}",":host {\n    --bounds-color: #d66;\n}",".guideline {\n    pointer-events: none;\n    z-index: 2;\n}",".line.guideline.bounds {\n    background: #d66;\n    background: var(--bounds-color);\n}"],render:function(t,n){var r=t.props,e=r.customClipPath,i=r.defaultClipPath,a=r.clipArea,o=r.zoom,s=t.state,u=s.target,l=s.width,c=s.height,f=s.allMatrix,p=s.is3d,d=s.left,h=s.top,g=s.pos1,v=s.pos2,m=s.pos3,b=s.pos4,x=s.clipPathState,E=s.snapBoundInfos;if(!u)return[];var S=qi(u,l,c,i||"inset",x||e);if(!S)return[];var y=p?4:3,M=S.type,C=S.poses.map((function(t){var n=Wn(f,t.pos,y);return[n[0]-d,n[1]-h]})),w=[],D=[],R="rect"===M,P="inset"===M,O="polygon"===M;if(R||P||O){var z=P?C.slice(0,8):C;D=z.map((function(t,r){var e=0===r?z[z.length-1]:z[r-1],i=N(e,t),a=Zn(e,t);return n.createElement("div",{key:"clipLine"+r,className:Bn("line","clip-line","snap-control"),"data-clip-index":r,style:{width:a+"px",transform:"translate("+e[0]+"px, "+e[1]+"px) rotate("+i+"rad)"}})}))}if(w=C.map((function(t,r){return n.createElement("div",{key:"clipControl"+r,className:Bn("control","clip-control","snap-control"),"data-clip-index":r,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})})),P&&w.push.apply(w,C.slice(8).map((function(t,r){return n.createElement("div",{key:"clipRadiusControl"+r,className:Bn("control","clip-control","clip-radius","snap-control"),"data-clip-index":8+r,style:{transform:"translate("+t[0]+"px, "+t[1]+"px)"}})}))),"circle"===M||"ellipse"===M){var B=S.left,G=S.top,T=S.radiusX,A=S.radiusY,I=it(Wn(f,[B,G],y),Wn(f,[0,0],y)),k=I[0],Y=I[1],X="none";if(!a){for(var F=Math.max(10,T/5,A/5),j=[],q=0;q<=F;++q){var W=2*Math.PI/F*q;j.push([T+(T-o)*Math.cos(W),A+(A-o)*Math.sin(W)])}j.push([T,-2]),j.push([-2,-2]),j.push([-2,2*A+2]),j.push([2*T+2,2*A+2]),j.push([2*T+2,-2]),j.push([T,-2]),X="polygon("+j.map((function(t){return t[0]+"px "+t[1]+"px"})).join(", ")+")"}w.push(n.createElement("div",{key:"clipEllipse",className:Bn("clip-ellipse","snap-control"),style:{width:2*T+"px",height:2*A+"px",clipPath:X,transform:"translate("+(-d+k)+"px, "+(-h+Y)+"px) "+jn(f)}}))}if(a){var L=_n(vn([g,v,m,b],C)),_=L.width,H=L.height,V=L.left,U=L.top;if(O||R||P){j=P?C.slice(0,8):C;w.push(n.createElement("div",{key:"clipArea",className:Bn("clip-area","snap-control"),style:{width:_+"px",height:H+"px",transform:"translate("+V+"px, "+U+"px)",clipPath:"polygon("+j.map((function(t){return t[0]-V+"px "+(t[1]-U)+"px"})).join(", ")+")"}}))}}return E&&["vertical","horizontal"].forEach((function(t){var r=E[t],e="horizontal"===t;r.isSnap&&D.push.apply(D,r.snap.posInfos.map((function(r,i){var a=r.pos,o=it(Wn(f,e?[0,a]:[a,0],y),[d,h]),s=it(Wn(f,e?[l,a]:[a,c],y),[d,h]);return oi(n,"",o,s,"clip"+t+"snap"+i,"guideline")}))),r.isBound&&D.push.apply(D,r.bounds.map((function(r,i){var a=r.pos,o=it(Wn(f,e?[0,a]:[a,0],y),[d,h]),s=it(Wn(f,e?[l,a]:[a,c],y),[d,h]);return oi(n,"",o,s,"clip"+t+"bounds"+i,"guideline","bounds","bold")})))})),vn(w,D)},dragControlCondition:function(t){return t.inputEvent&&(t.inputEvent.target.getAttribute("class")||"").indexOf("clip")>-1},dragStart:function(t,n){var r=t.props.dragWithClip;return!(void 0===r||r)&&this.dragControlStart(t,n)},drag:function(t,n){return this.dragControl(t,n)},dragEnd:function(t,n){return this.dragControlEnd(t,n)},dragControlStart:function(t,n){var r=t.state,e=t.props,i=e.defaultClipPath,a=e.customClipPath,o=r.target,s=r.width,u=r.height,l=n.inputEvent?n.inputEvent.target:null,c=l?l.getAttribute("class"):"",f=n.datas,p=qi(o,s,u,i||"inset",a);if(!p)return!1;var d=p.clipText;return!1===lr(t,"onClipStart",sr(t,n,{clipType:p.type,clipStyle:d,poses:p.poses.map((function(t){return t.pos}))}))?(f.isClipStart=!1,!1):(f.isControl=c.indexOf("clip-control")>-1,f.isLine=c.indexOf("clip-line")>-1,f.isArea=c.indexOf("clip-area")>-1||c.indexOf("clip-ellipse")>-1,f.index=l?parseInt(l.getAttribute("data-clip-index"),10):-1,f.clipPath=p,f.isClipStart=!0,r.clipPathState=d,Tr(t,n),!0)},dragControl:function(t,n){var r=n.datas,e=n.originalDatas;if(!r.isClipStart)return!1;var i=e&&e.draggable||{},a=r,o=a.isControl,s=a.isLine,u=a.isArea,l=a.index,c=a.clipPath;if(!c)return!1;var f=i.isDrag?i.prevDist:Fr(n),p=f[0],d=f[1],h=t.props,g=t.state,v=g.width,m=g.height,b=!u&&!o&&!s,x=c.type,E=c.poses,S=c.splitter,y=E.map((function(t){return t.pos}));b&&(p=-p,d=-d);var M=!o||"nesw"===E[l].direction,C="inset"===x||"rect"===x,w=E.map((function(){return[0,0]}));if(o&&!M){var D=E[l],R=D.horizontal,P=D.vertical,O=[p*Math.abs(R),d*Math.abs(P)];w=function(t,n,r,e){var i=t[n],a=i.direction,o=i.sub,s=t.map((function(){return[0,0]})),u=a?a.split(""):[];if(e&&n<8){var l=u.filter((function(t){return"w"===t||"e"===t}))[0],c=u.filter((function(t){return"n"===t||"s"===t}))[0];s[n]=r,t.forEach((function(t,n){var e=t.direction;e&&(e.indexOf(l)>-1&&(s[n][0]=r[0]),e.indexOf(c)>-1&&(s[n][1]=r[1]))})),l&&(s[1][0]=r[0]/2,s[5][0]=r[0]/2),c&&(s[3][1]=r[1]/2,s[7][1]=r[1]/2)}else a&&!o?u.forEach((function(n){var e="n"===n||"s"===n;t.forEach((function(t,i){var a=t.direction,o=t.horizontal,u=t.vertical;a&&-1!==a.indexOf(n)&&(s[i]=[e||!o?0:r[0],e&&u?r[1]:0])}))})):s[n]=r;return s}(E,l,O,C)}else M&&(w=y.map((function(){return[p,d]})));var z=y.map((function(t,n){return et(t,w[n])})),B=vn(z);g.snapBoundInfos=null;var G="circle"===c.type,T="ellipse"===c.type;if(G||T){var A=_n(z),I=Math.abs(A.bottom-A.top),k=Math.abs(T?A.right-A.left:I),Y=z[0][1]+I,F=z[0][0]-k,j=z[0][0]+k;G&&(B.push([j,A.bottom]),w.push([1,0])),B.push([A.left,Y]),w.push([0,1]),B.push([F,A.bottom]),w.push([1,0])}var q=ee([],v,m,(h.clipHorizontalGuidelines||[]).map((function(t){return X(""+t,m)})),(h.clipVerticalGuidelines||[]).map((function(t){return X(""+t,v)}))),N=[],W=[];if(G||T)N=[B[4][0],B[2][0]],W=[B[1][1],B[3][1]];else if(C){var L=[B[0],B[2],B[4],B[6]],_=[w[0],w[2],w[4],w[6]];N=L.filter((function(t,n){return _[n][0]})).map((function(t){return t[0]})),W=L.filter((function(t,n){return _[n][1]})).map((function(t){return t[1]}))}else N=B.filter((function(t,n){return w[n][0]})).map((function(t){return t[0]})),W=B.filter((function(t,n){return w[n][1]})).map((function(t){return t[1]}));for(var H=function(t){var n=Ae(q,h.clipTargetBounds&&{left:0,top:0,right:v,bottom:m},N,W,{snapThreshold:5}),r=n.horizontal,e=n.vertical,i=r.offset,a=e.offset;if(!T&&!G||0!==w[0][0]||0!==w[0][1])return B.forEach((function(t,n){var r=w[n];r[0]&&(t[0]-=a),r[1]&&(t[1]-=i)})),"break";var o=_n(z),s=o.bottom-o.top,u=T?o.right-o.left:s;u-=e.isBound?Math.abs(a):0===e.snapIndex?-a:a,s-=r.isBound?Math.abs(i):0===r.snapIndex?-i:i,G&&(u=s=le(e,r)>0?s:u);var l=B[0];B[1][1]=l[1]-s,B[2][0]=l[0]+u,B[3][1]=l[1]+s,B[4][0]=l[0]-u},V=0;V<2;++V){if("break"===H())break}var U=Fi(t,c,z),Z=x+"("+U.join(S)+")";if(g.clipPathState=Z,G||T)N=[B[4][0],B[2][0]],W=[B[1][1],B[3][1]];else if(C){L=[B[0],B[2],B[4],B[6]];N=L.map((function(t){return t[0]})),W=L.map((function(t){return t[1]}))}else N=B.map((function(t){return t[0]})),W=B.map((function(t){return t[1]}));return g.snapBoundInfos=Ae(q,h.clipTargetBounds&&{left:0,top:0,right:v,bottom:m},N,W,{snapThreshold:1}),lr(t,"onClip",sr(t,n,{clipEventType:"changed",clipType:x,poses:z,clipStyle:Z,clipStyles:U,distX:p,distY:d})),!0},dragControlEnd:function(t,n){this.unset(t);var r=n.isDrag,e=n.datas,i=n.isDouble,a=e.isLine,o=e.isClipStart,s=e.isControl;return!!o&&(lr(t,"onClipEnd",ur(t,n,{})),i&&(s?function(t,n){var r=n.datas,e=r.clipPath,i=r.index,a=e,o=a.type,s=a.poses,u=a.splitter,l=s.map((function(t){return t.pos})),c=l.length;if("polygon"===o)s.splice(i,1),l.splice(i,1);else{if("inset"!==o)return;if(i<8)return;if(Ai(s,l,i,8,c),c===s.length)return}var f=Fi(t,e,l);lr(t,"onClip",sr(t,n,{clipEventType:"removed",clipType:o,poses:l,clipStyles:f,clipStyle:o+"("+f.join(u)+")",distX:0,distY:0}))}(t,n):a&&function(t,n){var r=Gr(t,n),e=r[0],i=r[1],a=n.datas,o=a.clipPath,s=a.index,u=o,l=u.type,c=u.poses,f=u.splitter,p=c.map((function(t){return t.pos}));if("polygon"===l)p.splice(s,0,[e,i]);else{if("inset"!==l)return;var d=Ri.indexOf(s),h=Pi.indexOf(s),g=c.length;if(Ii(c,p,8,d,h,e,i,p[4][0],p[4][1],p[0][0],p[0][1]),g===c.length)return}var v=Fi(t,o,p);lr(t,"onClip",sr(t,n,{clipEventType:"added",clipType:l,poses:p,clipStyles:v,clipStyle:l+"("+v.join(f)+")",distX:0,distY:0}))}(t,n)),i||r)},unset:function(t){t.state.clipPathState="",t.state.snapBoundInfos=null}},Wi={name:"originDraggable",props:{originDraggable:Boolean,originRelative:Boolean},events:{onDragOriginStart:"dragOriginStart",onDragOrigin:"dragOrigin",onDragOriginEnd:"dragOriginEnd"},css:[":host[data-able-origindraggable] .control.origin {\n    pointer-events: auto;\n}"],dragControlCondition:function(t){return t.isRequest?"originDraggable"===t.requestAble:_(t.inputEvent.target,Bn("origin"))},dragControlStart:function(t,n){var r=n.datas;Tr(t,n);var e=sr(t,n,{dragStart:Je.dragStart(t,(new Pr).dragStart([0,0],n))}),i=lr(t,"onDragOriginStart",e);return r.startOrigin=t.state.transformOrigin,r.startTargetOrigin=t.state.targetOrigin,r.prevOrigin=[0,0],r.isDragOrigin=!0,!1===i?(r.isDragOrigin=!1,!1):e},dragControl:function(t,n){var r=n.datas,e=n.isPinch,i=n.isRequest;if(!r.isDragOrigin)return!1;var a=Fr(n),o=a[0],s=a[1],u=t.state,l=u.width,c=u.height,f=u.offsetMatrix,p=u.targetMatrix,d=u.is3d,h=t.props.originRelative,g=void 0===h||h,v=d?4:3,m=[o,s];if(i){var b=n.distOrigin;(b[0]||b[1])&&(m=b)}var x=et(r.startOrigin,m),E=et(r.startTargetOrigin,m),S=it(m,r.prevOrigin),y=Lr(f,p,x,v),M=t.getRect(),C=_n(Ln(y,l,c,v)),w=[M.left-C.left,M.top-C.top];r.prevOrigin=m;var D=sr(t,n,{width:l,height:c,origin:x,dist:m,delta:S,transformOrigin:[Sr(E[0],l,g),Sr(E[1],c,g)].join(" "),drag:Je.drag(t,Rr(n,t.state,w,!!e,!1))});return lr(t,"onDragOrigin",D),D},dragControlEnd:function(t,n){return!!n.datas.isDragOrigin&&(lr(t,"onDragOriginEnd",ur(t,n,{})),!0)},dragGroupControlCondition:function(t){return this.dragControlCondition(t)},dragGroupControlStart:function(t,n){return!!this.dragControlStart(t,n)},dragGroupControl:function(t,n){var r=this.dragControl(t,n);return!!r&&(t.transformOrigin=r.transformOrigin,!0)},request:function(t){var n={},r=t.getRect(),e=0,i=0,a=r.transformOrigin,o=[0,0];return{isControl:!0,requestStart:function(){return{datas:n}},request:function(t){return"deltaOrigin"in t?(o[0]+=t.deltaOrigin[0],o[1]+=t.deltaOrigin[1]):"origin"in t?(o[0]=t.origin[0]-a[0],o[1]=t.origin[1]-a[1]):("x"in t?e=t.x-r.left:"deltaX"in t&&(e+=t.deltaX),"y"in t?i=t.y-r.top:"deltaY"in t&&(i+=t.deltaY)),{datas:n,distX:e,distY:i,distOrigin:o}},requestEnd:function(){return{datas:n,isDrag:!0}}}}};function Li(t,n,r,e,i){var a;void 0===e&&(e=[0,0]);if(i)a=i;else{var o=window.getComputedStyle(t);a=o&&o.borderRadius||""}return Ti(!a||!i&&"0px"===a?[]:B(a),n,r,0,0,e)}function _i(t,n,r,e,i,a){var o=t.state,s=o.width,u=o.height,l=Bi(a,i,t.props.roundRelative,s,u),c=l.raws,f=l.styles,p=ki(i,c),d=p.horizontals,h=p.verticals,g=f.join(" ");o.borderRadiusState=g,lr(t,"onRound",sr(t,n,{horizontals:d,verticals:h,borderRadius:g,width:s,height:u,delta:e,dist:r}))}var Hi={name:"roundable",props:{roundable:Boolean,roundRelative:Boolean,minRoundControls:Array,maxRoundControls:Array,roundClickable:Boolean},events:{onRoundStart:"roundStart",onRound:"round",onRoundEnd:"roundEnd"},css:[".control.border-radius {\n    background: #d66;\n    cursor: pointer;\n}",":host[data-able-roundable] .line.direction {\n    cursor: pointer;\n}"],render:function(t,n){var r=t.state,e=r.target,i=r.width,a=r.height,o=r.allMatrix,s=r.is3d,u=r.left,l=r.top,c=r.borderRadiusState,f=t.props,p=f.minRoundControls,d=void 0===p?[0,0]:p,h=f.maxRoundControls,g=void 0===h?[4,4]:h;if(!e)return null;var v=s?4:3,m=Li(e,i,a,d,c);if(!m)return null;var b=0,x=0;return m.map((function(t,r){x+=Math.abs(t.horizontal),b+=Math.abs(t.vertical);var e=it(Wn(o,t.pos,v),[u,l]),i=t.vertical?b<=g[1]:x<=g[0];return n.createElement("div",{key:"borderRadiusControl"+r,className:Bn("control","border-radius"),"data-radius-index":r,style:{display:i?"block":"none",transform:"translate("+e[0]+"px, "+e[1]+"px)"}})}))},dragControlCondition:function(t){if(!t.inputEvent||t.isRequest)return!1;var n=t.inputEvent.target.getAttribute("class")||"";return n.indexOf("border-radius")>-1||n.indexOf("moveable-line")>-1&&n.indexOf("moveable-direction")>-1},dragControlStart:function(t,n){var r=n.inputEvent,e=n.datas,i=r.target,a=i.getAttribute("class")||"",o=a.indexOf("border-radius")>-1,s=a.indexOf("moveable-line")>-1&&a.indexOf("moveable-direction")>-1,u=o?parseInt(i.getAttribute("data-radius-index"),10):-1,l=s?parseInt(i.getAttribute("data-line-index"),10):-1;if(!o&&!s)return!1;if(!1===lr(t,"onRoundStart",sr(t,n,{})))return!1;e.lineIndex=l,e.controlIndex=u,e.isControl=o,e.isLine=s,Tr(t,n);var c=t.props,f=c.roundRelative,p=c.minRoundControls,d=void 0===p?[0,0]:p,h=t.state,g=h.target,v=h.width,m=h.height;e.isRound=!0,e.prevDist=[0,0];var b=Li(g,v,m,d)||[];return e.controlPoses=b,h.borderRadiusState=Bi(b.map((function(t){return t.pos})),b,f,v,m).styles.join(" "),!0},dragControl:function(t,n){var r=n.datas;if(!r.isRound||!r.isControl||!r.controlPoses.length)return!1;var e=r.controlIndex,i=r.controlPoses,a=Fr(n),o=a[0],s=a[1],u=[o,s],l=it(u,r.prevDist),c=t.props.maxRoundControls,f=void 0===c?[4,4]:c,p=t.state,d=p.width,h=p.height,g=i[e],v=g.vertical,m=g.horizontal,b=i.map((function(t,n){var r=t.horizontal,e=t.vertical,i=[r*m*u[0],e*v*u[1]];if(r){if(1===f[0])return i;if(f[0]<4&&r!==m)return i}else{if(0===f[1])return i[1]=e*m*u[0]/d*h,i;if(v){if(1===f[1])return i;if(f[1]<4&&e!==v)return i}}return[0,0]}));b[e]=u;var x=i.map((function(t,n){return et(t.pos,b[n])}));return r.prevDist=[o,s],_i(t,n,u,l,i,x),!0},dragControlEnd:function(t,n){var r=t.state;r.borderRadiusState="";var e=n.datas,i=n.isDouble;if(!e.isRound)return!1;var a=r.width,o=r.height,s=e.isControl,u=e.controlIndex,l=e.isLine,c=e.lineIndex,f=e.controlPoses,p=f.map((function(t){return t.pos})),d=p.length,h=t.props.roundClickable;if(i&&(void 0===h||h)){if(s)Ai(f,p,u,0);else if(l){var g=Gr(t,n);!function(t,n,r,e,i,a,o){var s=ki(t),u=s.horizontals,l=s.verticals,c=u.length,f=l.length,p=-1,d=-1;0===r?0===c?p=0:1===c&&(p=1):3===r&&(c<=2?p=2:c<=3&&(p=3)),2===r?0===f?d=0:f<4&&(d=3):1===r&&(f<=1?d=1:f<=2&&(d=2)),Ii(t,n,0,p,d,e,i,a,o)}(f,p,c,g[0],g[1],a,o)}d!==f.length&&_i(t,n,[0,0],[0,0],f,p),lr(t,"onRoundEnd",ur(t,n,{}))}return r.borderRadiusState="",!0},unset:function(t){t.state.borderRadiusState=""}},Vi={isPinch:!0,name:"beforeRenderable",props:{},events:{onBeforeRenderStart:"beforeRenderStart",onBeforeRender:"beforeRender",onBeforeRenderEnd:"beforeRenderEnd",onBeforeRenderGroupStart:"beforeRenderGroupStart",onBeforeRenderGroup:"beforeRenderGroup",onBeforeRenderGroupEnd:"beforeRenderGroupEnd"},setTransform:function(t,n){var r=t.state,e=r.is3d,i=r.targetMatrix,a=e?"matrix3d("+i.join(",")+")":"matrix("+at(i,!0)+")";n.datas.startTransforms=[a]},resetTransform:function(t,n){n.datas.nextTransforms=n.datas.startTransforms,n.datas.nextTransformAppendedIndexes=[]},fillDragStartParams:function(t,n){return sr(t,n,{setTransform:function(t){n.datas.startTransforms=R(t)?t:B(t)},isPinch:!!n.isPinch})},fillDragParams:function(t,n){return sr(t,n,{isPinch:!!n.isPinch})},dragStart:function(t,n){this.setTransform(t,n),lr(t,"onBeforeRenderStart",this.fillDragStartParams(t,n))},drag:function(t,n){this.resetTransform(t,n),lr(t,"onBeforeRender",sr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){lr(t,"onBeforeRenderEnd",sr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){var r=this;this.dragStart(t,n);var e=Or(t,"beforeRenderable",n),i=t.moveables,a=e.map((function(t,n){var e=i[n];return r.setTransform(e,t),r.fillDragStartParams(e,t)}));lr(t,"onBeforeRenderGroupStart",sr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,setTransform:function(){},events:a}))},dragGroup:function(t,n){var r=this;this.drag(t,n);var e=Or(t,"beforeRenderable",n),i=t.moveables,a=e.map((function(t,n){var e=i[n];return r.resetTransform(e,t),r.fillDragParams(e,t)}));lr(t,"onBeforeRenderGroup",sr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets,events:a}))},dragGroupEnd:function(t,n){this.dragEnd(t,n),lr(t,"onBeforeRenderGroupEnd",sr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}},Ui={name:"Renderable",props:{},events:{onRenderStart:"renderStart",onRender:"render",onRenderEnd:"renderEnd",onRenderGroupStart:"renderGroupStart",onRenderGroup:"renderGroup",onRenderGroupEnd:"renderGroupEnd"},dragStart:function(t,n){lr(t,"onRenderStart",sr(t,n,{isPinch:!!n.isPinch}))},drag:function(t,n){lr(t,"onRender",sr(t,n,{isPinch:!!n.isPinch}))},dragEnd:function(t,n){lr(t,"onRenderEnd",sr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag}))},dragGroupStart:function(t,n){lr(t,"onRenderGroupStart",sr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroup:function(t,n){lr(t,"onRenderGroup",sr(t,n,{isPinch:!!n.isPinch,targets:t.props.targets}))},dragGroupEnd:function(t,n){lr(t,"onRenderGroupEnd",sr(t,n,{isPinch:!!n.isPinch,isDrag:n.isDrag,targets:t.props.targets}))},dragControlStart:function(t,n){return this.dragStart(t,n)},dragControl:function(t,n){return this.drag(t,n)},dragControlEnd:function(t,n){return this.dragEnd(t,n)},dragGroupControlStart:function(t,n){return this.dragGroupStart(t,n)},dragGroupControl:function(t,n){return this.dragGroup(t,n)},dragGroupControlEnd:function(t,n){return this.dragGroupEnd(t,n)}};function Zi(t,n,r,e,i,a,o){var s="Start"===i,u=t.state.target,l=a.isRequest;if(!u||s&&e.indexOf("Control")>-1&&!l&&t.areaElement===a.inputEvent.target)return!1;var c=""+r+e+i,f=""+r+e+"Condition",p="End"===i,d=i.indexOf("After")>-1,h=s&&(!t.targetGesto||!t.controlGesto||!t.targetGesto.isFlag()||!t.controlGesto.isFlag());h&&t.updateRect(i,!0,!1),""!==i||d||xr(t.state,a);var g=e.indexOf("Group")>-1,v=vn([Vi],t[n].slice(),[Ui]);if(l){var m=a.requestAble;v.some((function(t){return t.name===m}))||v.push.apply(v,t.props.ables.filter((function(t){return t.name===m})))}if(!v.length)return!1;var b=v.filter((function(t){return t[c]})),x=a.datas;h&&b.forEach((function(n){n.unset&&n.unset(t)}));var E,S=a.inputEvent;p&&S&&(E=document.elementFromPoint(a.clientX,a.clientY)||S.target);var y=b.filter((function(n){var r=n.name,e=x[r]||(x[r]={});return s&&(e.isEventStart=!n[f]||n[f](a,t)),!!e.isEventStart&&n[c](t,gn(gn({},a),{datas:e,originalDatas:x,inputTarget:E}))})),M=y.length,C=s&&b.length&&!M;return(p||C)&&(t.state.gesto=null,t.moveables&&t.moveables.forEach((function(t){t.state.gesto=null}))),h&&C&&b.forEach((function(n){n.unset&&n.unset(t)})),!t.isUnmounted&&!C&&((!s&&M&&!o||p)&&(y.some((function(t){return t.updateRect}))&&!g?t.updateRect(i,!1,!1):t.updateRect(i,!0,!1),t.forceUpdate()),s||p||d||!M||o||Zi(t,n,r,e,i+"After",a),!0)}function Ki(t,n,r){var e=t.controlBox.getElement(),i=[];i.push(e),t.props.dragArea||i.push(n);var a=function(n){var r=n.inputEvent.target;return r===t.areaElement||!t.isMoveableElement(r)||_(r,"moveable-area")||_(r,"moveable-padding")};return $i(t,i,"targetAbles",r,{dragStart:a,pinchStart:a})}function $i(t,n,r,e,i){void 0===i&&(i={});var a=t.props,o=a.pinchOutside,s=a.pinchThreshold,u={container:window,pinchThreshold:s,pinchOutside:o},l=new Vt(n,u);return["drag","pinch"].forEach((function(n){["Start","","End"].forEach((function(a){l.on(""+n+a,(function(o){var s=o.eventType;!i[s]||i[s](o)?Zi(t,r,n,e,a,o)||o.stop():o.stop()}))}))})),l}var Ji=function(){function t(t,n,r){var e=this;this.target=t,this.moveable=n,this.eventName=r,this.ables=[],this.onEvent=function(t){var n=e.eventName,r=e.moveable;e.ables.forEach((function(e){e[n]({inputEvent:t},r)}))},this.target.addEventListener(this.eventName.toLowerCase(),this.onEvent)}var n=t.prototype;return n.setAbles=function(t){this.ables=t},n.destroy=function(){this.target.removeEventListener(this.eventName.toLowerCase(),this.onEvent),this.target=null,this.moveable=null},t}(),Qi=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.state=gn({container:null,target:null,gesto:null,renderPoses:[[0,0],[0,0],[0,0],[0,0]]},Qn(null)),n.enabledAbles=[],n.targetAbles=[],n.controlAbles=[],n.rotation=0,n.scale=[1,1],n.isUnmounted=!1,n.events={mouseEnter:null,mouseLeave:null},n}hn(n,t);var r=n.prototype;return r.render=function(){var t=this.props,n=this.state,r=t.edge,e=t.parentPosition,i=t.className,a=t.target,o=t.zoom,s=t.cspNonce,u=t.translateZ,l=t.cssStyled;this.checkUpdate(),this.updateRenderPoses();var c=e||{left:0,top:0},f=c.left,p=c.top,d=n.left,h=n.top,g=n.target,v=n.direction,m=n.renderPoses,b=t.targets,x=(b&&b.length||a)&&g,S=this.isDragging(),y={},M={createElement:kt.createElement};return this.getEnabledAbles().forEach((function(t){y["data-able-"+t.name.toLowerCase()]=!0})),Object(kt.createElement)(l,gn({cspNonce:s,ref:E(this,"controlBox"),className:Bn("control-box",-1===v?"reverse":"",S?"dragging":"")+" "+i},y,{style:{position:"absolute",display:x?"block":"none",transform:"translate("+(d-f)+"px, "+(h-p)+"px) translateZ("+u+"px)","--zoom":o,"--zoompx":o+"px"}}),this.renderAbles(),oi(M,r?"n":"",m[0],m[1],0),oi(M,r?"e":"",m[1],m[3],1),oi(M,r?"w":"",m[0],m[2],2),oi(M,r?"s":"",m[2],m[3],3))},r.componentDidMount=function(){this.controlBox.getElement();var t=this.props,n=t.parentMoveable,r=t.container,e=t.wrapperMoveable;this.updateEvent(t),this.updateNativeEvents(t),r||n||e||this.updateRect("",!1,!0),this.updateCheckInput()},r.componentDidUpdate=function(t){this.updateNativeEvents(t),this.updateEvent(t),this.updateCheckInput()},r.componentWillUnmount=function(){this.isUnmounted=!0,or(this,"targetGesto"),or(this,"controlGesto");var t=this.events;for(var n in t){var r=t[n];r&&r.destroy()}},r.getContainer=function(){var t=this.props,n=t.parentMoveable,r=t.wrapperMoveable;return t.container||r&&r.getContainer()||n&&n.getContainer()||this.controlBox.getElement().parentElement},r.isMoveableElement=function(t){return t&&(t.getAttribute("class")||"").indexOf(En)>-1},r.dragStart=function(t){return this.targetGesto&&this.targetGesto.triggerDragStart(t),this},r.hitTest=function(t){var n,r=this.state,e=r.target,i=r.pos1,a=r.pos2,o=r.pos3,s=r.pos4,u=r.targetClientRect;if(!e)return 0;if(t instanceof Element){var l=t.getBoundingClientRect();n={left:l.left,top:l.top,width:l.width,height:l.height}}else n=gn({width:0,height:0},t);var c=n.left,f=n.top,p=n.width,d=n.height,h=Mt([i,a,s,o],u),g=zt(h,[[c,f],[c+p,f],[c+p,f+d],[c,f+d]]),v=yt(h);return g&&v?Math.min(100,g/v*100):0},r.isInside=function(t,n){var r=this.state,e=r.target,i=r.pos1,a=r.pos2,o=r.pos3,s=r.pos4,u=r.targetClientRect;return!!e&&wt([t,n],Mt([i,a,s,o],u))},r.updateRect=function(t,n,r){void 0===r&&(r=!0);var e=this.props,i=e.parentMoveable,a=this.state,o=a.target||this.props.target,s=this.getContainer(),u=i?i.props.rootContainer:e.rootContainer;this.updateState(Qn(this.controlBox&&this.controlBox.getElement(),o,s,s,u||s,n?a:void 0),!i&&r)},r.isTargetChanged=function(t,n){var r=this.props,e=r.dragTarget||r.target,i=t.dragTarget||t.target,a=r.dragArea,o=t.dragArea;return!a&&i!==e||(n||a)&&o!==a},r.updateNativeEvents=function(t){var n=this,r=this.props.dragArea?this.areaElement:this.state.target,e=this.events,i=Y(e);if(this.isTargetChanged(t))for(var a in e){var o=e[a];o&&o.destroy(),e[a]=null}if(r){var s=this.enabledAbles;i.forEach((function(t){var i=fr(s,[t]),a=i.length>0,o=e[t];a?(o||(o=new Ji(r,n,t),e[t]=o),o.setAbles(i)):o&&(o.destroy(),e[t]=null)}))}},r.updateEvent=function(t){var n=this.controlBox.getElement(),r=this.targetAbles.length,e=this.controlAbles.length,i=this.props,a=i.dragTarget||i.target,o=this.isTargetChanged(t,!0),s=!r&&this.targetGesto||o;s&&(or(this,"targetGesto"),this.updateState({gesto:null})),e||or(this,"controlGesto"),a&&r&&!this.targetGesto&&(this.targetGesto=Ki(this,a,"")),!this.controlGesto&&e&&(this.controlGesto=$i(this,n,"controlAbles","Control")),s&&this.unsetAbles()},r.isDragging=function(){return!!this.targetGesto&&this.targetGesto.isFlag()||!!this.controlGesto&&this.controlGesto.isFlag()},r.updateTarget=function(t){this.updateRect(t,!0)},r.getRect=function(){var t=this.state,n=er(this.state),r=n[0],e=n[1],i=n[2],a=n[3],o=_n(n),s=t.width,u=t.height,l=o.width,c=o.height,f=o.left,p=o.top,d=[t.left,t.top],h=et(d,t.origin);return{width:l,height:c,left:f,top:p,pos1:r,pos2:e,pos3:i,pos4:a,offsetWidth:s,offsetHeight:u,beforeOrigin:et(d,t.beforeOrigin),origin:h,transformOrigin:t.transformOrigin,rotation:this.getRotation()}},r.getManager=function(){return this},r.getRotation=function(){var t=this.state,n=t.pos1,r=t.pos2,e=t.direction,i=N(n,r)/Math.PI*180;return i=(i=e>=0?i:180-i)>=0?i:360+i},r.request=function(t,n,r){void 0===n&&(n={});var e=this.props,i=e.ables,a=e.groupable,o=i.filter((function(n){return n.name===t}))[0];if(this.isDragging()||!o||!o.request)return{request:function(){return this},requestEnd:function(){return this}};var s=this,u=o.request(this),l=r||n.isInstant,c=u.isControl?"controlAbles":"targetAbles",f=(a?"Group":"")+(u.isControl?"Control":""),p={request:function(n){return Zi(s,c,"drag",f,"",gn(gn({},u.request(n)),{requestAble:t,isRequest:!0}),l),this},requestEnd:function(){return Zi(s,c,"drag",f,"End",gn(gn({},u.requestEnd()),{requestAble:t,isRequest:!0}),l),this}};return Zi(s,c,"drag",f,"Start",gn(gn({},u.requestStart(n)),{requestAble:t,isRequest:!0}),l),l?p.request(n).requestEnd():p},r.destroy=function(){this.componentWillUnmount()},r.updateRenderPoses=function(){var t=this.state,n=this.props,r=t.beforeOrigin,e=t.transformOrigin,i=t.allMatrix,a=t.is3d,o=t.pos1,s=t.pos2,u=t.pos3,l=t.pos4,c=t.left,f=t.top,p=n.padding||{},d=p.left,h=void 0===d?0:d,g=p.top,v=void 0===g?0:g,m=p.bottom,b=void 0===m?0:m,x=p.right,E=void 0===x?0:x,S=a?4:3,y=n.groupable?r:et(r,[c,f]);t.renderPoses=[et(o,Er(i,[-h,-v],e,y,S)),et(s,Er(i,[E,-v],e,y,S)),et(u,Er(i,[-h,b],e,y,S)),et(l,Er(i,[E,b],e,y,S))]},r.checkUpdate=function(){var t=this.props,n=t.target,r=t.container,e=t.parentMoveable,i=this.state,a=i.target,o=i.container;(a||n)&&(this.updateAbles(),(!hr(a,n)||!hr(o,r))&&(this.updateState({target:n,container:r}),e||!r&&!this.controlBox||this.updateRect("End",!1,!1)))},r.triggerEvent=function(t,n){var r=this.props[t];return r&&r(n)},r.unsetAbles=function(){var t=this;this.targetAbles.filter((function(n){return!!n.unset&&(n.unset(t),!0)})).length&&this.forceUpdate()},r.updateAbles=function(t,n){void 0===t&&(t=this.props.ables),void 0===n&&(n="");var r=this.props,e=r.triggerAblesSimultaneously,i=t.filter((function(t){return t&&(t.always||r[t.name])})),a="drag"+n+"ControlStart",o=fr(i,["drag"+n+"Start","pinch"+n+"Start"],e),s=fr(i,[a],e);this.enabledAbles=i,this.targetAbles=o,this.controlAbles=s},r.updateState=function(t,n){if(n)this.setState(t);else{var r=this.state;for(var e in t)r[e]=t[e]}},r.getEnabledAbles=function(){var t=this.props;return t.ables.filter((function(n){return n&&t[n.name]}))},r.renderAbles=function(){var t=this,n=this.props.triggerAblesSimultaneously,r={createElement:kt.createElement};return function(t,n){var r=[],e={};return t.forEach((function(i,a){var o=n(i,a,t),s=e[o];s||(s=[],e[o]=s,r.push(s)),s.push(i)})),r}(vr(fr(this.getEnabledAbles(),["render"],n).map((function(n){return(0,n.render)(t,r)||[]}))).filter((function(t){return t})),(function(t){return t.key})).map((function(t){return t[0]}))},r.updateCheckInput=function(){this.targetGesto&&(this.targetGesto.options.checkInput=this.props.checkInput)},n.defaultProps={target:null,dragTarget:null,container:null,rootContainer:null,origin:!0,edge:!1,parentMoveable:null,wrapperMoveable:null,parentPosition:null,ables:[],pinchThreshold:20,dragArea:!1,passDragArea:!1,transformOrigin:"",className:"",zoom:1,triggerAblesSimultaneously:!1,padding:{},pinchOutside:!0,checkInput:!1,groupable:!1,cspNonce:"",translateZ:50,cssStyled:null,props:{}},n}(kt.PureComponent),ta={name:"groupable",props:{defaultGroupRotate:Number,defaultGroupOrigin:String,groupable:Boolean},events:{},render:function(t,n){var r=t.props.targets||[];t.moveables=[];var e=t.state,i={left:e.left,top:e.top};return r.map((function(r,e){return n.createElement(Qi,{key:"moveable"+e,ref:S(t,"moveables",e),target:r,origin:!1,cssStyled:t.props.cssStyled,parentMoveable:t,parentPosition:i})}))}};function na(t){var n=t.originalDatas.draggable;return n||(t.originalDatas.draggable={},n=t.originalDatas.draggable),gn(gn({},t),{datas:n})}var ra={name:"edgeDraggable",props:{edgeDraggable:Boolean},events:{},dragControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return _(r,Bn("direction"))&&_(r,Bn("line"))},dragControlStart:function(t,n){return Je.dragStart(t,na(n))},dragControl:function(t,n){return Je.drag(t,na(n))},dragControlEnd:function(t,n){return Je.dragEnd(t,na(n))},dragGroupControlCondition:function(t,n){if(!n.props.edgeDraggable||!t.inputEvent)return!1;var r=t.inputEvent.target;return _(r,Bn("direction"))&&_(r,Bn("line"))},dragGroupControlStart:function(t,n){return Je.dragGroupStart(t,na(n))},dragGroupControl:function(t,n){return Je.dragGroup(t,na(n))},dragGroupControlEnd:function(t,n){return Je.dragGroupEnd(t,na(n))},unset:function(t){t.state.dragInfo=null}},ea={name:"individualGroupable",props:{individualGroupable:Boolean},events:{}},ia=[Vi,Mi,$e,Dr,Je,ra,ii,li,ci,di,yi,Ci,Ei,Wi,Ni,Hi,ta,ea,{name:"clickable",props:{},events:{onClick:"click",onClickGroup:"clickGroup"},always:!0,dragStart:function(){},dragGroupStart:function(t,n){n.datas.inputTarget=n.inputEvent&&n.inputEvent.target},dragEnd:function(t,n){var r=t.state.target,e=n.inputEvent,i=n.inputTarget;if(e&&i&&!n.isDrag&&!t.isMoveableElement(i)){var a=r.contains(i);lr(t,"onClick",sr(t,n,{isDouble:n.isDouble,inputTarget:i,isTarget:r===i,containsTarget:a}))}},dragGroupEnd:function(t,n){var r=n.inputEvent,e=n.inputTarget;if(r&&e&&!n.isDrag&&!t.isMoveableElement(e)&&n.datas.inputTarget!==e){var i=t.props.targets,a=i.indexOf(e),o=a>-1,s=!1;-1===a&&(s=(a=k(i,(function(t){return t.contains(e)})))>-1),lr(t,"onClickGroup",sr(t,n,{isDouble:n.isDouble,targets:i,inputTarget:e,targetIndex:a,isTarget:o,containsTarget:s}))}}},xi,Ui],aa=ia.reduce((function(t,n){return gn(gn({},t),n.events)}),{}),oa=ia.reduce((function(t,n){return gn(gn({},t),n.props)}),{}),sa=Cr(aa);Object.keys(sa),Object.keys(oa);function ua(t,n){return Math.max.apply(Math,t.map((function(t){var r=t[0],e=t[1],i=t[2],a=t[3];return Math.max(r[n],e[n],i[n],a[n])})))}function la(t,n){return Math.min.apply(Math,t.map((function(t){var r=t[0],e=t[1],i=t[2],a=t[3];return Math.min(r[n],e[n],i[n],a[n])})))}var ca=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.differ=new en,n.moveables=[],n.transformOrigin="50% 50%",n}hn(n,t);var r=n.prototype;return r.updateEvent=function(t){var n=this.state,r=this.props;n.target||(n.target=this.areaElement,this.controlBox.getElement().style.display="block",this.targetGesto=Ki(this,n.target,"Group"),this.controlGesto=$i(this,this.controlBox.getElement(),"controlAbles","GroupControl"));var e=!hr(t.container,r.container);e&&(n.container=r.container);var i=this.differ.update(r.targets),a=i.added,o=i.changed,s=i.removed;(e||a.length||o.length||s.length)&&this.updateRect()},r.checkUpdate=function(){this.updateAbles()},r.updateRect=function(t,n,r){var e;if(void 0===r&&(r=!0),this.controlBox){this.moveables.forEach((function(n){n.updateRect(t,!1,!1)}));var i=this.state,a=this.props,o=i.target||a.target;(!n||""!==t&&a.updateGroup)&&(this.rotation=a.defaultGroupRotate,this.transformOrigin=a.defaultGroupOrigin||"50% 50%",this.scale=[1,1]);var s=this.rotation,u=this.scale,l=function(t,n){if(!t.length)return[0,0,0,0];var r=t.map((function(t){return er(t.state)})),e=wn,i=wn,a=0,o=0,s=ir(n,Mn);if(s%90){var u=n/180*Math.PI,l=Math.tan(u),c=-1/l,f=[Dn,wn],p=[Dn,wn];r.forEach((function(t){t.forEach((function(t){var n=t[1]-l*t[0],r=t[1]-c*t[0];f[0]=Math.max(f[0],n),f[1]=Math.min(f[1],n),p[0]=Math.max(p[0],r),p[1]=Math.min(p[1],r)}))})),f.forEach((function(t){p.forEach((function(n){var r=(n-t)/(l-c),a=l*r+t;e=Math.min(e,r),i=Math.min(i,a)}))}));var d=r.map((function(t){var n=t[0],r=t[1],e=t[2],i=t[3];return[ft(n,-u),ft(r,-u),ft(e,-u),ft(i,-u)]}));a=ua(d,0)-la(d,0),o=ua(d,1)-la(d,1)}else if(e=la(r,0),i=la(r,1),a=ua(r,0)-e,o=ua(r,1)-i,s%180){var h=a;a=o,o=h}return[e,i,a,o]}(this.moveables,s),c=l[0],f=l[1],p=l[2],d=l[3];o.style.cssText+="left:0px;top:0px; transform-origin: "+this.transformOrigin+"; width:"+p+"px; height:"+d+"px;transform:rotate("+s+"deg) scale("+(u[0]>=0?1:-1)+", "+(u[1]>=0?1:-1)+")",i.width=p,i.height=d;var h=this.getContainer(),g=Qn(this.controlBox.getElement(),o,this.controlBox.getElement(),this.getContainer(),this.props.rootContainer||h,i),v=[g.left,g.top];e=er(g),g.pos1=e[0],g.pos2=e[1],g.pos3=e[2],g.pos4=e[3],g.origin=et(v,g.origin),g.beforeOrigin=et(v,g.beforeOrigin);var m=g.targetClientRect;m.top+=f-g.top-i.top,m.left+=c-g.left-i.left;var b=u[0]*u[1]>0?1:-1;this.updateState(gn(gn({},g),{direction:b,beforeDirection:b,left:c-g.left,top:f-g.top}),r)}},r.getRect=function(){return gn(gn({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},r.triggerEvent=function(n,r,e){if(e||n.indexOf("Group")>-1)return t.prototype.triggerEvent.call(this,n,r)},r.updateAbles=function(){t.prototype.updateAbles.call(this,vn(this.props.ables,[ta]),"Group")},n.defaultProps=gn(gn({},Qi.defaultProps),{transformOrigin:["50%","50%"],groupable:!0,dragArea:!0,keepRatio:!0,targets:[],defaultGroupRotate:0,defaultGroupOrigin:"50% 50%"}),n}(Qi),fa=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.moveables=[],n}hn(n,t);var r=n.prototype;return r.render=function(){var t=this,n=this.props,r=n.cspNonce,e=n.cssStyled,i=n.targets;return Object(kt.createElement)(e,{cspNonce:r,ref:E(this,"controlBox"),className:Bn("control-box")},i.map((function(n,r){return Object(kt.createElement)(Qi,gn({key:"moveable"+r,ref:S(t,"moveables",r)},t.props,{target:n,wrapperMoveable:t}))})))},r.componentDidUpdate=function(){},r.updateRect=function(t,n,r){void 0===r&&(r=!0),this.moveables.forEach((function(e){e.updateRect(t,n,r)}))},r.getRect=function(){return gn(gn({},t.prototype.getRect.call(this)),{children:this.moveables.map((function(t){return t.getRect()}))})},r.request=function(){return{request:function(){return this},requestEnd:function(){return this}}},r.dragStart=function(){return this},r.hitTest=function(){return 0},r.isInside=function(){return!1},r.isDragging=function(){return!1},r.updateRenderPoses=function(){},r.updateEvent=function(){},r.checkUpdate=function(){},r.triggerEvent=function(){},r.updateAbles=function(){},n}(Qi),pa=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.refTargets=[],n.selectorMap={},n}hn(n,t);var r,e,i=n.prototype;return n.makeStyled=function(){var t={};this.getTotalAbles().forEach((function(n){var r=n.css;r&&r.forEach((function(n){t[n]=!0}))}));var n=Y(t).join("\n");this.defaultStyled=pn("div",function(t,n){return n.replace(/([^}{]*){/gm,(function(n,r){return r.replace(/\.([^{,\s\d.]+)/g,"."+t+"$1")+"{"}))}(En,Sn+n))},n.getTotalAbles=function(){return vn([Mi,ta,ea,xi],this.defaultAbles)},i.render=function(){var t=this.constructor;t.defaultStyled||t.makeStyled();var n=this.props,r=n.ables,e=n.props,i=function(t,n){var r={};for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&n.indexOf(e)<0&&(r[e]=t[e]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(e=Object.getOwnPropertySymbols(t);i<e.length;i++)n.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(t,e[i])&&(r[e[i]]=t[e[i]])}return r}(n,["ables","props"]),a=wr(i.target||i.targets),o=function(t,n){var r=[];return t.forEach((function(t){t&&(P(t)?n[t]&&r.push.apply(r,n[t]):r.push(t))})),r}(a,this.selectorMap);this.refTargets=a;var s=o.length>1,u=vn(t.getTotalAbles(),r||[]),l=gn(gn(gn({},i),e||{}),{ables:u});return s?i.individualGroupable?Object(kt.createElement)(fa,gn({key:"individual-group",ref:E(this,"moveable"),cssStyled:t.defaultStyled},l,{target:null,targets:o})):Object(kt.createElement)(ca,gn({key:"group",ref:E(this,"moveable"),cssStyled:t.defaultStyled},l,{target:null,targets:o})):Object(kt.createElement)(Qi,gn({key:"single",ref:E(this,"moveable"),cssStyled:t.defaultStyled},l,{target:o[0]}))},i.componentDidMount=function(){this.updateRefs()},i.componentDidUpdate=function(){this.updateRefs()},i.updateRefs=function(t){var n=wr(this.props.target||this.props.targets),r=this.refTargets.some((function(t,r){var e=n[r];return!(!t&&!e)&&t!==e})),e=t?{}:this.selectorMap,i={};this.refTargets.forEach((function(t){P(t)&&(e[t]?i[t]=e[t]:(r=!0,i[t]=[].slice.call(document.querySelectorAll(t))))})),this.selectorMap=i,r&&this.forceUpdate()},i.getManager=function(){return this.moveable},n.defaultAbles=[],n.defaultStyled=null,function(t,n,r,e){var i,a=arguments.length,o=a<3?n:null===e?e=Object.getOwnPropertyDescriptor(n,r):e;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)o=Reflect.decorate(t,n,r,e);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(o=(a<3?i(o):a>3?i(n,r,o):i(n,r))||o);a>3&&o&&Object.defineProperty(n,r,o)}([(r=zn,void 0===e&&(e={}),function(t,n){r.forEach((function(r){var i=e[r]||r;t[i]||(t[i]=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a=(t=this[n])[r].apply(t,e);return a===this[n]?this:a})}))})],n.prototype,"moveable",void 0),n}(kt.PureComponent),da=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return hn(n,t),n.defaultAbles=ia,n}(pa);n.a=da}}]);